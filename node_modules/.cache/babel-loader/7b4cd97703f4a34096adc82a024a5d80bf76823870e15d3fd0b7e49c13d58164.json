{"ast":null,"code":"var _jsxFileName = \"/Users/nakataniyuutomo/Desktop/Programing/\\u30BB\\u3099\\u30DF\\u958B\\u767A/sound-library2/src/pages/SoundCollection.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './SoundCollection.css';\nimport { useAnnouncement, useErrorMessages } from '../hooks/useAccessibility';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SoundCollection = () => {\n  _s();\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [currentRecording, setCurrentRecording] = useState(null);\n  const [audioLevel, setAudioLevel] = useState(0);\n  const [audioContext, setAudioContext] = useState(null);\n  const fileInputRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  const recordButtonRef = useRef(null);\n\n  // ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ•ãƒƒã‚¯\n  const {\n    announce,\n    AnnouncementRegion\n  } = useAnnouncement();\n  const {\n    showError,\n    clearError,\n    ErrorRegion\n  } = useErrorMessages();\n\n  // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n  useEffect(() => {\n    return () => {\n      // éŒ²éŸ³ä¸­ã®å ´åˆã¯åœæ­¢\n      if (mediaRecorder && isRecording) {\n        mediaRecorder.stop();\n        if (mediaRecorder.stream) {\n          mediaRecorder.stream.getTracks().forEach(track => track.stop());\n        }\n      }\n\n      // ä½œæˆã•ã‚ŒãŸBlobURLã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n      recordings.forEach(recording => {\n        if (recording.url && recording.url.startsWith('blob:')) {\n          URL.revokeObjectURL(recording.url);\n        }\n      });\n    };\n  }, [mediaRecorder, isRecording, recordings]);\n  const startRecording = async () => {\n    try {\n      // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢\n      clearError();\n      announce('éŒ²éŸ³ã‚’é–‹å§‹ã—ã¦ã„ã¾ã™...', 'assertive');\n\n      // iOSã§ã®ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹æ”¹å–„ - ã¾ãšãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ\n      const hasAccess = await testMicrophoneAccess();\n      if (!hasAccess) {\n        showError('ãƒã‚¤ã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');\n        return;\n      }\n      console.log('éŒ²éŸ³é–‹å§‹å‡¦ç†ä¸­...');\n\n      // iPadç”¨ã®éŸ³å£°è¨­å®šã‚’æœ€é©åŒ–\n      const audioConstraints = {\n        echoCancellation: false,\n        // iPadã§ã¯ç„¡åŠ¹ã«ã™ã‚‹\n        noiseSuppression: false,\n        // iPadã§ã¯ç„¡åŠ¹ã«ã™ã‚‹  \n        autoGainControl: false,\n        // iPadã§ã¯ç„¡åŠ¹ã«ã™ã‚‹\n        sampleRate: 44100,\n        // æ˜ç¤ºçš„ã«ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒ¼ãƒˆã‚’æŒ‡å®š\n        channelCount: 1 // ãƒ¢ãƒãƒ©ãƒ«éŒ²éŸ³ã‚’æ˜ç¤º\n      };\n      console.log('éŸ³å£°åˆ¶ç´„:', audioConstraints);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: audioConstraints\n      });\n      console.log('éŒ²éŸ³ã‚¹ãƒˆãƒªãƒ¼ãƒ å–å¾—æˆåŠŸ');\n      console.log('ã‚¹ãƒˆãƒªãƒ¼ãƒ è©³ç´°:', {\n        id: stream.id,\n        active: stream.active,\n        tracks: stream.getTracks().map(track => ({\n          id: track.id,\n          kind: track.kind,\n          label: track.label,\n          enabled: track.enabled,\n          muted: track.muted,\n          readyState: track.readyState,\n          settings: track.getSettings ? track.getSettings() : 'getSettings not supported'\n        }))\n      });\n\n      // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–ã®ãŸã‚ã®AudioContextã‚’è¨­å®š\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n      console.log('AudioContextä½œæˆ:', {\n        state: audioCtx.state,\n        sampleRate: audioCtx.sampleRate,\n        baseLatency: audioCtx.baseLatency\n      });\n\n      // AudioContextãŒåœæ­¢ã—ã¦ã„ã‚‹å ´åˆã¯å†é–‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å¾Œï¼‰\n      if (audioCtx.state === 'suspended') {\n        console.log('AudioContextã‚’å†é–‹ä¸­...');\n        await audioCtx.resume();\n        console.log('AudioContextå†é–‹å®Œäº†:', audioCtx.state);\n      }\n\n      // ç¢ºå®Ÿã«AudioContextãŒå®Ÿè¡Œä¸­ã«ãªã‚‹ã¾ã§å¾…æ©Ÿ\n      if (audioCtx.state !== 'running') {\n        console.log('AudioContextã®èµ·å‹•ã‚’å¾…æ©Ÿä¸­...');\n        await new Promise(resolve => {\n          const checkState = () => {\n            if (audioCtx.state === 'running') {\n              resolve();\n            } else {\n              setTimeout(checkState, 50);\n            }\n          };\n          checkState();\n        });\n        console.log('AudioContextèµ·å‹•å®Œäº†');\n      }\n      const source = audioCtx.createMediaStreamSource(stream);\n      const analyserNode = audioCtx.createAnalyser();\n      analyserNode.fftSize = 512; // ã‚ˆã‚Šç´°ã‹ã„è§£æã®ãŸã‚å¢—åŠ \n      analyserNode.smoothingTimeConstant = 0.3; // ã‚ˆã‚Šæ•æ„Ÿãªåå¿œã®ãŸã‚æ¸›å°‘\n      analyserNode.minDecibels = -90;\n      analyserNode.maxDecibels = -10;\n      source.connect(analyserNode);\n      console.log('AudioContextæ¥ç¶šå®Œäº†:', {\n        analyserFFTSize: analyserNode.fftSize,\n        frequencyBinCount: analyserNode.frequencyBinCount,\n        smoothingTimeConstant: analyserNode.smoothingTimeConstant,\n        minDecibels: analyserNode.minDecibels,\n        maxDecibels: analyserNode.maxDecibels\n      });\n      setAudioContext(audioCtx);\n\n      // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–é–‹å§‹ï¼ˆAudioContextã®å®‰å®šåŒ–ã‚’å¾…ã¤ï¼‰\n      setTimeout(() => {\n        if (isRecording) {\n          monitorAudioLevel(analyserNode);\n        }\n      }, 200);\n\n      // MediaRecorderã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ±ºå®š\n      let recorderOptions = {};\n      if (MediaRecorder.isTypeSupported('audio/webm;codecs=opus')) {\n        recorderOptions.mimeType = 'audio/webm;codecs=opus';\n        console.log('ä½¿ç”¨ã™ã‚‹MIMEã‚¿ã‚¤ãƒ—: audio/webm;codecs=opus');\n      } else if (MediaRecorder.isTypeSupported('audio/mp4')) {\n        recorderOptions.mimeType = 'audio/mp4';\n        console.log('ä½¿ç”¨ã™ã‚‹MIMEã‚¿ã‚¤ãƒ—: audio/mp4');\n      } else if (MediaRecorder.isTypeSupported('audio/wav')) {\n        recorderOptions.mimeType = 'audio/wav';\n        console.log('ä½¿ç”¨ã™ã‚‹MIMEã‚¿ã‚¤ãƒ—: audio/wav');\n      } else {\n        console.log('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆMIMEã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨');\n      }\n      const recorder = new MediaRecorder(stream, recorderOptions);\n      console.log('MediaRecorderä½œæˆ:', {\n        mimeType: recorder.mimeType,\n        state: recorder.state,\n        supportedTypes: {\n          'audio/webm;codecs=opus': MediaRecorder.isTypeSupported('audio/webm;codecs=opus'),\n          'audio/mp4': MediaRecorder.isTypeSupported('audio/mp4'),\n          'audio/wav': MediaRecorder.isTypeSupported('audio/wav')\n        }\n      });\n      const chunks = [];\n      recorder.ondataavailable = e => {\n        console.log('éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿å—ä¿¡:', e.data.size, 'bytes, type:', e.data.type);\n        chunks.push(e.data);\n      };\n      recorder.onstop = () => {\n        const blob = new Blob(chunks, {\n          type: 'audio/wav'\n        });\n        const url = URL.createObjectURL(blob);\n        console.log('éŒ²éŸ³å®Œäº† - Blobã‚µã‚¤ã‚º:', blob.size, 'bytes, type:', blob.type);\n        console.log('ãƒãƒ£ãƒ³ã‚¯æ•°:', chunks.length, 'chunks');\n        setCurrentRecording({\n          id: Date.now(),\n          url: url,\n          audioBlob: blob,\n          name: '',\n          tags: [],\n          createdAt: new Date()\n        });\n\n        // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–åœæ­¢\n        setAudioLevel(0);\n        if (animationFrameRef.current) {\n          cancelAnimationFrame(animationFrameRef.current);\n        }\n        announce('éŒ²éŸ³ãŒå®Œäº†ã—ã¾ã—ãŸã€‚éŸ³ã«åå‰ã‚’ã¤ã‘ã¦ä¿å­˜ã—ã¦ãã ã•ã„ã€‚', 'assertive');\n      };\n      recorder.start();\n      console.log('éŒ²éŸ³é–‹å§‹:', recorder.state);\n      setMediaRecorder(recorder);\n      setIsRecording(true);\n      announce('éŒ²éŸ³ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚', 'assertive');\n      console.log('éŒ²éŸ³é–‹å§‹å®Œäº†');\n    } catch (error) {\n      console.error('éŒ²éŸ³ã®é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);\n      let errorMessage = 'éŒ²éŸ³ã‚’é–‹å§‹ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚';\n      if (error.name === 'NotAllowedError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ã®ä½¿ç”¨ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚';\n      } else if (error.name === 'NotFoundError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ãƒ‡ãƒã‚¤ã‚¹ã«ãƒã‚¤ã‚¯ãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚';\n      } else if (error.name === 'NotSupportedError') {\n        errorMessage = 'ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŒ²éŸ³æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚';\n      } else if (error.name === 'NotReadableError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ãŒä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ä¸­ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      showError(errorMessage);\n      announce(errorMessage, 'assertive');\n    }\n  };\n  const stopRecording = () => {\n    console.log('éŒ²éŸ³åœæ­¢é–‹å§‹');\n    setIsRecording(false); // ã¾ãšéŒ²éŸ³çŠ¶æ…‹ã‚’åœæ­¢ã«è¨­å®š\n\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n      mediaRecorder.stream.getTracks().forEach(track => track.stop());\n      setMediaRecorder(null);\n      announce('éŒ²éŸ³ã‚’åœæ­¢ã—ã¾ã—ãŸã€‚', 'assertive');\n    }\n\n    // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–ã‚’åœæ­¢\n    setAudioLevel(0);\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n      animationFrameRef.current = null;\n    }\n\n    // AudioContextã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n    if (audioContext && audioContext.state !== 'closed') {\n      audioContext.close().catch(error => {\n        console.warn('SoundCollection AudioContext ã®ã‚¯ãƒ­ãƒ¼ã‚ºã«å¤±æ•—:', error);\n      });\n      setAudioContext(null);\n    }\n    console.log('éŒ²éŸ³åœæ­¢å®Œäº†');\n  };\n\n  // Blobã‚’ Base64 ã«å¤‰æ›ã™ã‚‹é–¢æ•°\n  const blobToBase64 = blob => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  };\n  const saveRecording = async (name, tags) => {\n    if (currentRecording && name.trim()) {\n      try {\n        // Blobã‚’base64ã«å¤‰æ›\n        const base64Data = await blobToBase64(currentRecording.audioBlob);\n        const savedRecording = {\n          ...currentRecording,\n          name: name.trim(),\n          tags: tags.filter(tag => tag.trim()).map(tag => tag.trim()),\n          audioData: base64Data,\n          // base64ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜\n          // audioBlobã¯ä¸€æ™‚çš„ãªã‚‚ã®ãªã®ã§å‰Šé™¤\n          audioBlob: undefined\n        };\n        setRecordings([...recordings, savedRecording]);\n        setCurrentRecording(null);\n\n        // LocalStorageã«ä¿å­˜ï¼ˆaudioBlobã¯é™¤å¤–ï¼‰\n        const existingRecordings = JSON.parse(localStorage.getItem('soundRecordings') || '[]');\n        const recordingToSave = {\n          ...savedRecording\n        };\n        delete recordingToSave.audioBlob; // Blobã¯ä¿å­˜ã—ãªã„\n        localStorage.setItem('soundRecordings', JSON.stringify([...existingRecordings, recordingToSave]));\n      } catch (error) {\n        console.error('éŒ²éŸ³ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);\n        alert('éŒ²éŸ³ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');\n      }\n    }\n  };\n  const handleFileUpload = event => {\n    const file = event.target.files[0];\n    if (file && file.type.startsWith('audio/')) {\n      const url = URL.createObjectURL(file);\n      setCurrentRecording({\n        id: Date.now(),\n        url: url,\n        audioBlob: file,\n        name: file.name.replace(/\\.[^/.]+$/, ''),\n        tags: [],\n        createdAt: new Date()\n      });\n    }\n  };\n\n  // ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ï¼ˆiOSã§ã®å•é¡Œå¯¾ç­–ï¼‰\n  const testMicrophoneAccess = async () => {\n    try {\n      console.log('ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆé–‹å§‹');\n\n      // HTTPSæ¥ç¶šãƒã‚§ãƒƒã‚¯\n      if (!checkHTTPS()) {\n        alert('ğŸ”’ éŒ²éŸ³æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯HTTPSæ¥ç¶šãŒå¿…è¦ã§ã™ã€‚\\n\\niPhoneã§ã¯ç‰¹ã«ã€ã‚»ã‚­ãƒ¥ã‚¢ãªæ¥ç¶šãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚');\n        return false;\n      }\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŒ²éŸ³æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚');\n      }\n\n      // ã¾ãšãƒã‚¤ã‚¯ã®æ¨©é™çŠ¶æ…‹ã‚’ç¢ºèª\n      if (navigator.permissions) {\n        try {\n          const permission = await navigator.permissions.query({\n            name: 'microphone'\n          });\n          console.log('ãƒã‚¤ã‚¯æ¨©é™çŠ¶æ…‹:', permission.state);\n          if (permission.state === 'denied') {\n            alert('ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‹ã‚‰ãƒã‚¤ã‚¯ã®ä½¿ç”¨ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚');\n            return false;\n          }\n        } catch (permError) {\n          console.log('æ¨©é™ç¢ºèªã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“:', permError);\n        }\n      }\n\n      // å®Ÿéš›ã«ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒ†ã‚¹ãƒˆ\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true\n        }\n      });\n\n      // ã™ãã«ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’åœæ­¢\n      stream.getTracks().forEach(track => track.stop());\n      console.log('ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆæˆåŠŸ');\n      return true;\n    } catch (error) {\n      console.error('ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆå¤±æ•—:', error);\n      let errorMessage = 'ãƒã‚¤ã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚';\n      if (error.name === 'NotAllowedError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ã®ä½¿ç”¨ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚\\n\\niPhoneã®å ´åˆï¼š\\n1. Safariè¨­å®š > ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ > ãƒã‚¤ã‚¯\\n2. ã“ã®ã‚µã‚¤ãƒˆã‚’è¨±å¯ã«è¨­å®š';\n      } else if (error.name === 'NotFoundError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚';\n      } else if (error.name === 'NotSupportedError') {\n        errorMessage = 'ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŒ²éŸ³æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      alert(errorMessage);\n      return false;\n    }\n  };\n\n  // HTTPSæ¥ç¶šãƒã‚§ãƒƒã‚¯ï¼ˆiOSã§ã®éŒ²éŸ³ã«å¿…è¦ï¼‰\n  const checkHTTPS = () => {\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {\n      return false;\n    }\n    return true;\n  };\n\n  // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–é–¢æ•°\n  const monitorAudioLevel = analyserNode => {\n    const bufferLength = analyserNode.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n    console.log('éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–é–‹å§‹ - bufferLength:', bufferLength);\n    const updateLevel = () => {\n      if (!isRecording) {\n        console.log('éŒ²éŸ³åœæ­¢ã®ãŸã‚éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–çµ‚äº†');\n        return;\n      }\n      try {\n        // å‘¨æ³¢æ•°é ˜åŸŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆã‚ˆã‚Šå®‰å®šã—ãŸçµæœãŒå¾—ã‚‰ã‚Œã‚‹ï¼‰\n        analyserNode.getByteFrequencyData(dataArray);\n\n        // å¹³å‡éŸ³é‡ã‚’è¨ˆç®—\n        let sum = 0;\n        for (let i = 0; i < bufferLength; i++) {\n          sum += dataArray[i];\n        }\n        const average = sum / bufferLength;\n\n        // 0-255ã®å€¤ã‚’0-100%ã«å¤‰æ›ï¼ˆã‚ˆã‚Šç›´æ„Ÿçš„ï¼‰\n        const level = Math.min(100, average / 255 * 200); // æ„Ÿåº¦ã‚’ä¸Šã’ã‚‹ãŸã‚2å€\n\n        // ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šãƒ¬ãƒ™ãƒ«ã‚’ãƒ­ã‚°å‡ºåŠ›ï¼ˆæ™‚ã€…ï¼‰\n        if (Math.random() < 0.05) {\n          // 5%ã®ç¢ºç‡ã§ãƒ­ã‚°å‡ºåŠ›\n          console.log('éŸ³å£°ãƒ¬ãƒ™ãƒ« - Average:', average, 'Level:', Math.round(level), '%');\n        }\n        setAudioLevel(level);\n        if (isRecording) {\n          animationFrameRef.current = requestAnimationFrame(updateLevel);\n        }\n      } catch (error) {\n        console.error('éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–ã‚¨ãƒ©ãƒ¼:', error);\n        setAudioLevel(0);\n      }\n    };\n\n    // å°‘ã—é…å»¶ã‚’å…¥ã‚Œã¦é–‹å§‹ï¼ˆAudioContextã®å®‰å®šåŒ–ã®ãŸã‚ï¼‰\n    setTimeout(updateLevel, 100);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sound-collection\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        id: \"page-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"\\u30DE\\u30A4\\u30AF\",\n          children: \"\\uD83C\\uDFA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this), \" \\u97F3\\u3042\\u3064\\u3081\\u30DA\\u30FC\\u30B8\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"page-description\",\n        children: \"\\u8EAB\\u306E\\u56DE\\u308A\\u306B\\u3042\\u308B\\u97F3\\u3092\\u9332\\u97F3\\u3057\\u305F\\u308A\\u3001\\u97F3\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\\u3057\\u3066\\u97F3\\u7D20\\u6750\\u3092\\u96C6\\u3081\\u307E\\u3057\\u3087\\u3046\\uFF01\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnnouncementRegion, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ErrorRegion, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"collection-actions\",\n      \"aria-labelledby\": \"collection-title\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        id: \"collection-title\",\n        className: \"sr-only\",\n        children: \"\\u97F3\\u306E\\u53CE\\u96C6\\u65B9\\u6CD5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"recording-section card\",\n        \"aria-labelledby\": \"recording-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          id: \"recording-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"\\u30DE\\u30A4\\u30AF\",\n            children: \"\\uD83C\\uDF99\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 13\n          }, this), \" \\u97F3\\u3092\\u9332\\u97F3\\u3059\\u308B\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ios-notice\",\n          role: \"region\",\n          \"aria-labelledby\": \"ios-instructions\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            id: \"ios-instructions\",\n            className: \"sr-only\",\n            children: \"iPhone/iPad\\u4F7F\\u7528\\u6642\\u306E\\u6CE8\\u610F\\u4E8B\\u9805\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              role: \"img\",\n              \"aria-label\": \"\\u30B9\\u30DE\\u30FC\\u30C8\\u30D5\\u30A9\\u30F3\",\n              children: \"\\uD83D\\uDCF1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"iPhone/iPad\\u3092\\u304A\\u4F7F\\u3044\\u306E\\u65B9\\u3078\\uFF1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u9332\\u97F3\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3059\\u3068\\u30DE\\u30A4\\u30AF\\u306E\\u4F7F\\u7528\\u8A31\\u53EF\\u3092\\u6C42\\u3081\\u308B\\u30C0\\u30A4\\u30A2\\u30ED\\u30B0\\u304C\\u8868\\u793A\\u3055\\u308C\\u307E\\u3059\\u3002\\u300C\\u8A31\\u53EF\\u300D\\u3092\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u30C0\\u30A4\\u30A2\\u30ED\\u30B0\\u304C\\u8868\\u793A\\u3055\\u308C\\u306A\\u3044\\u5834\\u5408\\u306F\\u3001Safari\\u8A2D\\u5B9A \\u2192 \\u30D7\\u30E9\\u30A4\\u30D0\\u30B7\\u30FC\\u3068\\u30BB\\u30AD\\u30E5\\u30EA\\u30C6\\u30A3 \\u2192 \\u30DE\\u30A4\\u30AF \\u3067\\u3053\\u306E\\u30B5\\u30A4\\u30C8\\u3092\\u8A31\\u53EF\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recording-controls\",\n          role: \"group\",\n          \"aria-labelledby\": \"recording-controls-label\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            id: \"recording-controls-label\",\n            className: \"sr-only\",\n            children: \"\\u9332\\u97F3\\u64CD\\u4F5C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this), !isRecording ? /*#__PURE__*/_jsxDEV(\"button\", {\n            ref: recordButtonRef,\n            className: \"accessible-button button-primary large-button record-btn\",\n            onClick: startRecording,\n            \"aria-describedby\": \"record-instructions\",\n            type: \"button\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              role: \"img\",\n              \"aria-label\": \"\\u9332\\u97F3\\u958B\\u59CB\",\n              children: \"\\uD83D\\uDD34\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this), \" \\u9332\\u97F3\\u958B\\u59CB\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"accessible-button button-secondary large-button stop-btn\",\n            onClick: stopRecording,\n            \"aria-describedby\": \"stop-instructions\",\n            type: \"button\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              role: \"img\",\n              \"aria-label\": \"\\u505C\\u6B62\",\n              children: \"\\u23F9\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 17\n            }, this), \" \\u9332\\u97F3\\u505C\\u6B62\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"record-instructions\",\n            className: \"sr-only\",\n            children: \"\\u9332\\u97F3\\u958B\\u59CB\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3059\\u3068\\u30DE\\u30A4\\u30AF\\u304C\\u6709\\u52B9\\u306B\\u306A\\u308A\\u3001\\u97F3\\u58F0\\u306E\\u9332\\u97F3\\u304C\\u59CB\\u307E\\u308A\\u307E\\u3059\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"stop-instructions\",\n            className: \"sr-only\",\n            children: \"\\u9332\\u97F3\\u505C\\u6B62\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3059\\u3068\\u9332\\u97F3\\u304C\\u7D42\\u4E86\\u3057\\u3001\\u97F3\\u306B\\u540D\\u524D\\u3092\\u3064\\u3051\\u308B\\u3053\\u3068\\u304C\\u3067\\u304D\\u307E\\u3059\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recording-status\",\n          role: \"status\",\n          \"aria-live\": \"polite\",\n          \"aria-label\": \"\\u9332\\u97F3\\u72B6\\u6CC1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"recording-indicator\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pulse-dot\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 17\n            }, this), \"\\u9332\\u97F3\\u4E2D...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"audio-level-meter\",\n            role: \"group\",\n            \"aria-labelledby\": \"audio-level-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"audio-level-label\",\n              className: \"audio-level-label\",\n              children: \"\\u97F3\\u58F0\\u5165\\u529B\\u30EC\\u30D9\\u30EB:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"audio-level-bar\",\n              role: \"progressbar\",\n              \"aria-valuenow\": Math.round(audioLevel),\n              \"aria-valuemin\": \"0\",\n              \"aria-valuemax\": \"100\",\n              \"aria-label\": `éŸ³å£°ãƒ¬ãƒ™ãƒ« ${Math.round(audioLevel)}%`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"audio-level-fill\",\n                style: {\n                  width: `${audioLevel}%`\n                },\n                \"aria-hidden\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"audio-level-value\",\n              \"aria-hidden\": \"true\",\n              children: [Math.round(audioLevel), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 521,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"upload-section card\",\n        \"aria-labelledby\": \"upload-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          id: \"upload-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"\\u30D5\\u30A9\\u30EB\\u30C0\",\n            children: \"\\uD83D\\uDCC1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 13\n          }, this), \" \\u97F3\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"accessible-button button-secondary large-button\",\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          \"aria-describedby\": \"upload-instructions\",\n          type: \"button\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"\\u30D5\\u30A1\\u30A4\\u30EB\\u9078\\u629E\",\n            children: \"\\uD83D\\uDCC2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 13\n          }, this), \" \\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"upload-instructions\",\n          className: \"sr-only\",\n          children: \"\\u97F3\\u58F0\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\\u3057\\u3066\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\\u3067\\u304D\\u307E\\u3059\\u3002\\u5BFE\\u5FDC\\u5F62\\u5F0F: MP3, WAV, M4A \\u306A\\u3069\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          accept: \"audio/*\",\n          onChange: handleFileUpload,\n          style: {\n            display: 'none'\n          },\n          \"aria-label\": \"\\u97F3\\u58F0\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 7\n    }, this), currentRecording && /*#__PURE__*/_jsxDEV(RecordingEditor, {\n      recording: currentRecording,\n      onSave: saveRecording,\n      onCancel: () => setCurrentRecording(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"recent-recordings\",\n      \"aria-labelledby\": \"recent-title\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        id: \"recent-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"\\u30E1\\u30E2\",\n          children: \"\\uD83D\\uDCDD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 11\n        }, this), \" \\u6700\\u8FD1\\u9332\\u97F3\\u3057\\u305F\\u97F3\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 9\n      }, this), recordings.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"no-recordings\",\n        children: \"\\u307E\\u3060\\u9332\\u97F3\\u3057\\u305F\\u97F3\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\\u3002\\u4E0A\\u306E\\u9332\\u97F3\\u30DC\\u30BF\\u30F3\\u304B\\u3089\\u59CB\\u3081\\u307E\\u3057\\u3087\\u3046\\uFF01\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recordings-grid\",\n        role: \"grid\",\n        \"aria-label\": \"\\u9332\\u97F3\\u3055\\u308C\\u305F\\u97F3\\u306E\\u30EA\\u30B9\\u30C8\",\n        children: recordings.map((recording, index) => /*#__PURE__*/_jsxDEV(SoundCard, {\n          recording: recording,\n          index: index\n        }, recording.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 431,\n    columnNumber: 5\n  }, this);\n};\n_s(SoundCollection, \"jBryn/EWzzAtzf0+WH00sw1xoUM=\", false, function () {\n  return [useAnnouncement, useErrorMessages];\n});\n_c = SoundCollection;\nconst RecordingEditor = ({\n  recording,\n  onSave,\n  onCancel\n}) => {\n  _s2();\n  const [name, setName] = useState(recording.name);\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState(recording.tags);\n  const [validationMessage, setValidationMessage] = useState('');\n  const addTag = () => {\n    if (tagInput.trim() && !tags.includes(tagInput.trim())) {\n      setTags([...tags, tagInput.trim()]);\n      setTagInput('');\n      setValidationMessage(`ã‚¿ã‚°ã€Œ${tagInput.trim()}ã€ã‚’è¿½åŠ ã—ã¾ã—ãŸ`);\n    } else if (tags.includes(tagInput.trim())) {\n      setValidationMessage('ã“ã®ã‚¿ã‚°ã¯æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™');\n    }\n  };\n  const removeTag = tagToRemove => {\n    setTags(tags.filter(tag => tag !== tagToRemove));\n    setValidationMessage(`ã‚¿ã‚°ã€Œ${tagToRemove}ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      addTag();\n    }\n  };\n  const handleSave = () => {\n    if (!name.trim()) {\n      setValidationMessage('éŸ³ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');\n      return;\n    }\n    onSave(name, tags);\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"recording-editor card\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"editor-title\",\n    \"aria-describedby\": \"editor-description\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      id: \"editor-title\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        role: \"img\",\n        \"aria-label\": \"\\u7DE8\\u96C6\",\n        children: \"\\u270F\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 9\n      }, this), \" \\u97F3\\u306B\\u540D\\u524D\\u3092\\u3064\\u3051\\u3088\\u3046\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 630,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"editor-description\",\n      className: \"sr-only\",\n      children: \"\\u9332\\u97F3\\u3057\\u305F\\u97F3\\u306B\\u540D\\u524D\\u3068\\u30BF\\u30B0\\u3092\\u3064\\u3051\\u3066\\u4FDD\\u5B58\\u3067\\u304D\\u307E\\u3059\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"audio-preview-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"audio-preview\",\n        className: \"audio-preview-label\",\n        children: \"\\u9332\\u97F3\\u3057\\u305F\\u97F3\\u306E\\u30D7\\u30EC\\u30D3\\u30E5\\u30FC:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        id: \"audio-preview\",\n        controls: true,\n        src: recording.url,\n        className: \"accessible-audio audio-preview\",\n        onError: e => {\n          console.error('éŸ³å£°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e);\n        },\n        \"aria-describedby\": \"audio-preview-desc\",\n        children: [/*#__PURE__*/_jsxDEV(\"track\", {\n          kind: \"captions\",\n          label: \"\\u97F3\\u58F0\\u8AAC\\u660E\",\n          srcLang: \"ja\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 649,\n          columnNumber: 11\n        }, this), \"\\u304A\\u4F7F\\u3044\\u306E\\u30D6\\u30E9\\u30A6\\u30B6\\u306F\\u97F3\\u58F0\\u518D\\u751F\\u306B\\u5BFE\\u5FDC\\u3057\\u3066\\u3044\\u307E\\u305B\\u3093\\u3002\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"audio-preview-desc\",\n        className: \"sr-only\",\n        children: \"\\u9332\\u97F3\\u3055\\u308C\\u305F\\u97F3\\u58F0\\u3092\\u518D\\u751F\\u3057\\u3066\\u78BA\\u8A8D\\u3067\\u304D\\u307E\\u3059\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"soundName\",\n        className: \"required-label\",\n        children: [\"\\u97F3\\u306E\\u540D\\u524D \", /*#__PURE__*/_jsxDEV(\"span\", {\n          \"aria-label\": \"\\u5FC5\\u9808\",\n          className: \"required\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 16\n        }, this), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 658,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"soundName\",\n        type: \"text\",\n        value: name,\n        onChange: e => {\n          setName(e.target.value);\n          if (validationMessage) setValidationMessage('');\n        },\n        placeholder: \"\\u4F8B: \\u30D4\\u30A2\\u30CE\\u306E\\u97F3\\u3001\\u96E8\\u306E\\u97F3\",\n        className: \"accessible-input sound-name-input\",\n        required: true,\n        \"aria-describedby\": \"name-help\",\n        \"aria-invalid\": !name.trim() && validationMessage ? 'true' : 'false'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"name-help\",\n        className: \"help-text\",\n        children: \"\\u3053\\u306E\\u97F3\\u3092\\u8868\\u3059\\u5206\\u304B\\u308A\\u3084\\u3059\\u3044\\u540D\\u524D\\u3092\\u3064\\u3051\\u3066\\u304F\\u3060\\u3055\\u3044\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"soundTags\",\n        className: \"optional-label\",\n        children: [\"\\u30BF\\u30B0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"optional\",\n          children: \"(\\u4EFB\\u610F)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 14\n        }, this), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tag-input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"soundTags\",\n          type: \"text\",\n          value: tagInput,\n          onChange: e => setTagInput(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"\\u4F8B: \\u697D\\u5668\\u3001\\u81EA\\u7136\",\n          className: \"accessible-input tag-input\",\n          \"aria-describedby\": \"tag-help\",\n          list: \"tag-suggestions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"datalist\", {\n          id: \"tag-suggestions\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\\u697D\\u5668\",\n            children: \"\\u697D\\u5668\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\\u81EA\\u7136\",\n            children: \"\\u81EA\\u7136\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\\u6A5F\\u68B0\",\n            children: \"\\u6A5F\\u68B0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 699,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\\u52D5\\u7269\",\n            children: \"\\u52D5\\u7269\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\\u58F0\",\n            children: \"\\u58F0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addTag,\n          className: \"accessible-button add-tag-btn\",\n          type: \"button\",\n          disabled: !tagInput.trim(),\n          \"aria-describedby\": \"add-tag-help\",\n          children: \"\\u8FFD\\u52A0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"tag-help\",\n        className: \"help-text\",\n        children: \"\\u97F3\\u306E\\u7A2E\\u985E\\u3084\\u30AB\\u30C6\\u30B4\\u30EA\\u3092\\u8868\\u3059\\u30BF\\u30B0\\u3092\\u8FFD\\u52A0\\u3067\\u304D\\u307E\\u3059\\u3002Enter\\u30AD\\u30FC\\u3067\\u3082\\u8FFD\\u52A0\\u3067\\u304D\\u307E\\u3059\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 713,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"add-tag-help\",\n        className: \"sr-only\",\n        children: \"\\u5165\\u529B\\u3057\\u305F\\u30BF\\u30B0\\u3092\\u97F3\\u306B\\u8FFD\\u52A0\\u3057\\u307E\\u3059\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 9\n      }, this), tags.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tags-display\",\n        role: \"group\",\n        \"aria-labelledby\": \"tags-label\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"tags-label\",\n          className: \"tags-title\",\n          children: \"\\u8FFD\\u52A0\\u3055\\u308C\\u305F\\u30BF\\u30B0:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 722,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"tags-list\",\n          \"aria-live\": \"polite\",\n          children: tags.map((tag, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"tag-item\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"tag\",\n              children: [tag, /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeTag(tag),\n                className: \"remove-tag\",\n                type: \"button\",\n                \"aria-label\": `ã‚¿ã‚°ã€Œ${tag}ã€ã‚’å‰Šé™¤`,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\",\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 734,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 19\n            }, this)\n          }, tag, false, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 721,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 7\n    }, this), validationMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"validation-message\",\n      role: \"status\",\n      \"aria-live\": \"polite\",\n      children: validationMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor-actions\",\n      role: \"group\",\n      \"aria-labelledby\": \"actions-label\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"actions-label\",\n        className: \"sr-only\",\n        children: \"\\u4FDD\\u5B58\\u30FB\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u64CD\\u4F5C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSave,\n        className: \"accessible-button button-primary\",\n        disabled: !name.trim(),\n        type: \"button\",\n        \"aria-describedby\": \"save-help\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"\\u4FDD\\u5B58\",\n          children: \"\\uD83D\\uDCBE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 11\n        }, this), \" \\u4FDD\\u5B58\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 756,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onCancel,\n        className: \"accessible-button button-secondary\",\n        type: \"button\",\n        \"aria-describedby\": \"cancel-help\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\",\n          children: \"\\u274C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 11\n        }, this), \" \\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 765,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"save-help\",\n        className: \"sr-only\",\n        children: \"\\u97F3\\u306E\\u540D\\u524D\\u3068\\u30BF\\u30B0\\u3092\\u4FDD\\u5B58\\u3057\\u307E\\u3059\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 773,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"cancel-help\",\n        className: \"sr-only\",\n        children: \"\\u7DE8\\u96C6\\u3092\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u3057\\u3066\\u9332\\u97F3\\u3092\\u7834\\u68C4\\u3057\\u307E\\u3059\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 776,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 754,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 624,\n    columnNumber: 5\n  }, this);\n};\n_s2(RecordingEditor, \"ng6OUJ1dnnXfH3WyzkUNSG2WufU=\");\n_c2 = RecordingEditor;\nconst SoundCard = ({\n  recording,\n  index\n}) => {\n  const formattedDate = new Date(recording.createdAt).toLocaleDateString('ja-JP', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"sound-card\",\n    \"aria-labelledby\": `sound-title-${recording.id}`,\n    \"aria-describedby\": `sound-desc-${recording.id}`,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"sound-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        id: `sound-title-${recording.id}`,\n        className: \"sound-name\",\n        children: recording.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 799,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"sound-date\",\n        \"aria-label\": `éŒ²éŸ³æ—¥: ${formattedDate}`,\n        children: formattedDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 802,\n        columnNumber: 9\n      }, this), recording.tags.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sound-tags\",\n        role: \"group\",\n        \"aria-label\": \"\\u30BF\\u30B0\",\n        children: recording.tags.map((tag, tagIndex) => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag small\",\n          role: \"mark\",\n          \"aria-label\": `ã‚¿ã‚°: ${tag}`,\n          children: tag\n        }, tag, false, {\n          fileName: _jsxFileName,\n          lineNumber: 808,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 798,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sound-player\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: `audio-${recording.id}`,\n        className: \"sr-only\",\n        children: [recording.name, \"\\u306E\\u97F3\\u58F0\\u30D7\\u30EC\\u30FC\\u30E4\\u30FC\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 822,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        id: `audio-${recording.id}`,\n        controls: true,\n        src: recording.url,\n        className: \"accessible-audio\",\n        onError: e => {\n          console.error('éŸ³å£°ã‚«ãƒ¼ãƒ‰ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e, 'recording:', recording.name);\n        },\n        \"aria-describedby\": `audio-desc-${recording.id}`,\n        children: [/*#__PURE__*/_jsxDEV(\"track\", {\n          kind: \"captions\",\n          label: \"\\u97F3\\u58F0\\u8AAC\\u660E\",\n          srcLang: \"ja\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 835,\n          columnNumber: 11\n        }, this), \"\\u304A\\u4F7F\\u3044\\u306E\\u30D6\\u30E9\\u30A6\\u30B6\\u306F\\u97F3\\u58F0\\u518D\\u751F\\u306B\\u5BFE\\u5FDC\\u3057\\u3066\\u3044\\u307E\\u305B\\u3093\\u3002\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 825,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: `audio-desc-${recording.id}`,\n        className: \"sr-only\",\n        children: [recording.name, \"\\u306E\\u97F3\\u58F0\\u30D5\\u30A1\\u30A4\\u30EB\\u3002\\u518D\\u751F\\u30DC\\u30BF\\u30F3\\u3067\\u97F3\\u3092\\u805E\\u304F\\u3053\\u3068\\u304C\\u3067\\u304D\\u307E\\u3059\\u3002\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 838,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 821,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 793,\n    columnNumber: 5\n  }, this);\n};\n_c3 = SoundCard;\nexport default SoundCollection;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"SoundCollection\");\n$RefreshReg$(_c2, \"RecordingEditor\");\n$RefreshReg$(_c3, \"SoundCard\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useAnnouncement","useErrorMessages","jsxDEV","_jsxDEV","SoundCollection","_s","recordings","setRecordings","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","currentRecording","setCurrentRecording","audioLevel","setAudioLevel","audioContext","setAudioContext","fileInputRef","animationFrameRef","recordButtonRef","announce","AnnouncementRegion","showError","clearError","ErrorRegion","stop","stream","getTracks","forEach","track","recording","url","startsWith","URL","revokeObjectURL","startRecording","hasAccess","testMicrophoneAccess","console","log","audioConstraints","echoCancellation","noiseSuppression","autoGainControl","sampleRate","channelCount","navigator","mediaDevices","getUserMedia","audio","id","active","tracks","map","kind","label","enabled","muted","readyState","settings","getSettings","audioCtx","window","AudioContext","webkitAudioContext","state","baseLatency","resume","Promise","resolve","checkState","setTimeout","source","createMediaStreamSource","analyserNode","createAnalyser","fftSize","smoothingTimeConstant","minDecibels","maxDecibels","connect","analyserFFTSize","frequencyBinCount","monitorAudioLevel","recorderOptions","MediaRecorder","isTypeSupported","mimeType","recorder","supportedTypes","chunks","ondataavailable","e","data","size","type","push","onstop","blob","Blob","createObjectURL","length","Date","now","audioBlob","name","tags","createdAt","current","cancelAnimationFrame","start","error","errorMessage","message","stopRecording","close","catch","warn","blobToBase64","reject","reader","FileReader","onload","result","onerror","readAsDataURL","saveRecording","trim","base64Data","savedRecording","filter","tag","audioData","undefined","existingRecordings","JSON","parse","localStorage","getItem","recordingToSave","setItem","stringify","alert","handleFileUpload","event","file","target","files","replace","checkHTTPS","Error","permissions","permission","query","permError","location","protocol","hostname","bufferLength","dataArray","Uint8Array","updateLevel","getByteFrequencyData","sum","i","average","level","Math","min","random","round","requestAnimationFrame","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","ref","onClick","style","width","_fileInputRef$current","click","accept","onChange","display","RecordingEditor","onSave","onCancel","index","SoundCard","_c","_s2","setName","tagInput","setTagInput","setTags","validationMessage","setValidationMessage","addTag","includes","removeTag","tagToRemove","handleKeyPress","key","preventDefault","handleSave","htmlFor","controls","src","onError","srcLang","value","placeholder","required","onKeyPress","list","disabled","_c2","formattedDate","toLocaleDateString","year","month","day","tagIndex","_c3","$RefreshReg$"],"sources":["/Users/nakataniyuutomo/Desktop/Programing/ã‚»ã‚™ãƒŸé–‹ç™º/sound-library2/src/pages/SoundCollection.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './SoundCollection.css';\nimport { useAnnouncement, useErrorMessages } from '../hooks/useAccessibility';\n\nconst SoundCollection = () => {\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [currentRecording, setCurrentRecording] = useState(null);\n  const [audioLevel, setAudioLevel] = useState(0);\n  const [audioContext, setAudioContext] = useState(null);\n  const fileInputRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  const recordButtonRef = useRef(null);\n\n  // ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ•ãƒƒã‚¯\n  const { announce, AnnouncementRegion } = useAnnouncement();\n  const { showError, clearError, ErrorRegion } = useErrorMessages();\n\n  // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n  useEffect(() => {\n    return () => {\n      // éŒ²éŸ³ä¸­ã®å ´åˆã¯åœæ­¢\n      if (mediaRecorder && isRecording) {\n        mediaRecorder.stop();\n        if (mediaRecorder.stream) {\n          mediaRecorder.stream.getTracks().forEach(track => track.stop());\n        }\n      }\n      \n      // ä½œæˆã•ã‚ŒãŸBlobURLã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n      recordings.forEach(recording => {\n        if (recording.url && recording.url.startsWith('blob:')) {\n          URL.revokeObjectURL(recording.url);\n        }\n      });\n    };\n  }, [mediaRecorder, isRecording, recordings]);\n\n  const startRecording = async () => {\n    try {\n      // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢\n      clearError();\n      announce('éŒ²éŸ³ã‚’é–‹å§‹ã—ã¦ã„ã¾ã™...', 'assertive');\n\n      // iOSã§ã®ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹æ”¹å–„ - ã¾ãšãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ\n      const hasAccess = await testMicrophoneAccess();\n      if (!hasAccess) {\n        showError('ãƒã‚¤ã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');\n        return;\n      }\n\n      console.log('éŒ²éŸ³é–‹å§‹å‡¦ç†ä¸­...');\n      \n      // iPadç”¨ã®éŸ³å£°è¨­å®šã‚’æœ€é©åŒ–\n      const audioConstraints = {\n        echoCancellation: false, // iPadã§ã¯ç„¡åŠ¹ã«ã™ã‚‹\n        noiseSuppression: false, // iPadã§ã¯ç„¡åŠ¹ã«ã™ã‚‹  \n        autoGainControl: false,  // iPadã§ã¯ç„¡åŠ¹ã«ã™ã‚‹\n        sampleRate: 44100,       // æ˜ç¤ºçš„ã«ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒ¼ãƒˆã‚’æŒ‡å®š\n        channelCount: 1          // ãƒ¢ãƒãƒ©ãƒ«éŒ²éŸ³ã‚’æ˜ç¤º\n      };\n      \n      console.log('éŸ³å£°åˆ¶ç´„:', audioConstraints);\n      \n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: audioConstraints\n      });\n      \n      console.log('éŒ²éŸ³ã‚¹ãƒˆãƒªãƒ¼ãƒ å–å¾—æˆåŠŸ');\n      console.log('ã‚¹ãƒˆãƒªãƒ¼ãƒ è©³ç´°:', {\n        id: stream.id,\n        active: stream.active,\n        tracks: stream.getTracks().map(track => ({\n          id: track.id,\n          kind: track.kind,\n          label: track.label,\n          enabled: track.enabled,\n          muted: track.muted,\n          readyState: track.readyState,\n          settings: track.getSettings ? track.getSettings() : 'getSettings not supported'\n        }))\n      });\n      \n      // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–ã®ãŸã‚ã®AudioContextã‚’è¨­å®š\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n      console.log('AudioContextä½œæˆ:', {\n        state: audioCtx.state,\n        sampleRate: audioCtx.sampleRate,\n        baseLatency: audioCtx.baseLatency\n      });\n      \n      // AudioContextãŒåœæ­¢ã—ã¦ã„ã‚‹å ´åˆã¯å†é–‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å¾Œï¼‰\n      if (audioCtx.state === 'suspended') {\n        console.log('AudioContextã‚’å†é–‹ä¸­...');\n        await audioCtx.resume();\n        console.log('AudioContextå†é–‹å®Œäº†:', audioCtx.state);\n      }\n      \n      // ç¢ºå®Ÿã«AudioContextãŒå®Ÿè¡Œä¸­ã«ãªã‚‹ã¾ã§å¾…æ©Ÿ\n      if (audioCtx.state !== 'running') {\n        console.log('AudioContextã®èµ·å‹•ã‚’å¾…æ©Ÿä¸­...');\n        await new Promise(resolve => {\n          const checkState = () => {\n            if (audioCtx.state === 'running') {\n              resolve();\n            } else {\n              setTimeout(checkState, 50);\n            }\n          };\n          checkState();\n        });\n        console.log('AudioContextèµ·å‹•å®Œäº†');\n      }\n      \n      const source = audioCtx.createMediaStreamSource(stream);\n      const analyserNode = audioCtx.createAnalyser();\n      analyserNode.fftSize = 512; // ã‚ˆã‚Šç´°ã‹ã„è§£æã®ãŸã‚å¢—åŠ \n      analyserNode.smoothingTimeConstant = 0.3; // ã‚ˆã‚Šæ•æ„Ÿãªåå¿œã®ãŸã‚æ¸›å°‘\n      analyserNode.minDecibels = -90;\n      analyserNode.maxDecibels = -10;\n      source.connect(analyserNode);\n      \n      console.log('AudioContextæ¥ç¶šå®Œäº†:', {\n        analyserFFTSize: analyserNode.fftSize,\n        frequencyBinCount: analyserNode.frequencyBinCount,\n        smoothingTimeConstant: analyserNode.smoothingTimeConstant,\n        minDecibels: analyserNode.minDecibels,\n        maxDecibels: analyserNode.maxDecibels\n      });\n      \n      setAudioContext(audioCtx);\n      \n      // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–é–‹å§‹ï¼ˆAudioContextã®å®‰å®šåŒ–ã‚’å¾…ã¤ï¼‰\n      setTimeout(() => {\n        if (isRecording) {\n          monitorAudioLevel(analyserNode);\n        }\n      }, 200);\n      \n      // MediaRecorderã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ±ºå®š\n      let recorderOptions = {};\n      \n      if (MediaRecorder.isTypeSupported('audio/webm;codecs=opus')) {\n        recorderOptions.mimeType = 'audio/webm;codecs=opus';\n        console.log('ä½¿ç”¨ã™ã‚‹MIMEã‚¿ã‚¤ãƒ—: audio/webm;codecs=opus');\n      } else if (MediaRecorder.isTypeSupported('audio/mp4')) {\n        recorderOptions.mimeType = 'audio/mp4';\n        console.log('ä½¿ç”¨ã™ã‚‹MIMEã‚¿ã‚¤ãƒ—: audio/mp4');\n      } else if (MediaRecorder.isTypeSupported('audio/wav')) {\n        recorderOptions.mimeType = 'audio/wav';\n        console.log('ä½¿ç”¨ã™ã‚‹MIMEã‚¿ã‚¤ãƒ—: audio/wav');\n      } else {\n        console.log('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆMIMEã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨');\n      }\n      \n      const recorder = new MediaRecorder(stream, recorderOptions);\n      console.log('MediaRecorderä½œæˆ:', {\n        mimeType: recorder.mimeType,\n        state: recorder.state,\n        supportedTypes: {\n          'audio/webm;codecs=opus': MediaRecorder.isTypeSupported('audio/webm;codecs=opus'),\n          'audio/mp4': MediaRecorder.isTypeSupported('audio/mp4'),\n          'audio/wav': MediaRecorder.isTypeSupported('audio/wav')\n        }\n      });\n      \n      const chunks = [];\n\n      recorder.ondataavailable = (e) => {\n        console.log('éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿å—ä¿¡:', e.data.size, 'bytes, type:', e.data.type);\n        chunks.push(e.data);\n      };\n\n      recorder.onstop = () => {\n        const blob = new Blob(chunks, { type: 'audio/wav' });\n        const url = URL.createObjectURL(blob);\n        console.log('éŒ²éŸ³å®Œäº† - Blobã‚µã‚¤ã‚º:', blob.size, 'bytes, type:', blob.type);\n        console.log('ãƒãƒ£ãƒ³ã‚¯æ•°:', chunks.length, 'chunks');\n        setCurrentRecording({\n          id: Date.now(),\n          url: url,\n          audioBlob: blob,\n          name: '',\n          tags: [],\n          createdAt: new Date()\n        });\n        \n        // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–åœæ­¢\n        setAudioLevel(0);\n        if (animationFrameRef.current) {\n          cancelAnimationFrame(animationFrameRef.current);\n        }\n        \n        announce('éŒ²éŸ³ãŒå®Œäº†ã—ã¾ã—ãŸã€‚éŸ³ã«åå‰ã‚’ã¤ã‘ã¦ä¿å­˜ã—ã¦ãã ã•ã„ã€‚', 'assertive');\n      };\n\n      recorder.start();\n      console.log('éŒ²éŸ³é–‹å§‹:', recorder.state);\n      setMediaRecorder(recorder);\n      setIsRecording(true);\n      announce('éŒ²éŸ³ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚', 'assertive');\n      console.log('éŒ²éŸ³é–‹å§‹å®Œäº†');\n      \n    } catch (error) {\n      console.error('éŒ²éŸ³ã®é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);\n      \n      let errorMessage = 'éŒ²éŸ³ã‚’é–‹å§‹ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚';\n      \n      if (error.name === 'NotAllowedError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ã®ä½¿ç”¨ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚';\n      } else if (error.name === 'NotFoundError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ãƒ‡ãƒã‚¤ã‚¹ã«ãƒã‚¤ã‚¯ãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚';\n      } else if (error.name === 'NotSupportedError') {\n        errorMessage = 'ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŒ²éŸ³æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚';\n      } else if (error.name === 'NotReadableError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ãŒä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ä¸­ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      showError(errorMessage);\n      announce(errorMessage, 'assertive');\n    }\n  };\n\n  const stopRecording = () => {\n    console.log('éŒ²éŸ³åœæ­¢é–‹å§‹');\n    setIsRecording(false); // ã¾ãšéŒ²éŸ³çŠ¶æ…‹ã‚’åœæ­¢ã«è¨­å®š\n    \n    if (mediaRecorder) {\n      mediaRecorder.stop();\n      mediaRecorder.stream.getTracks().forEach(track => track.stop());\n      setMediaRecorder(null);\n      announce('éŒ²éŸ³ã‚’åœæ­¢ã—ã¾ã—ãŸã€‚', 'assertive');\n    }\n    \n    // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–ã‚’åœæ­¢\n    setAudioLevel(0);\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n      animationFrameRef.current = null;\n    }\n    \n    // AudioContextã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n    if (audioContext && audioContext.state !== 'closed') {\n      audioContext.close().catch(error => {\n        console.warn('SoundCollection AudioContext ã®ã‚¯ãƒ­ãƒ¼ã‚ºã«å¤±æ•—:', error);\n      });\n      setAudioContext(null);\n    }\n    \n    console.log('éŒ²éŸ³åœæ­¢å®Œäº†');\n  };\n\n  // Blobã‚’ Base64 ã«å¤‰æ›ã™ã‚‹é–¢æ•°\n  const blobToBase64 = (blob) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  };\n\n  const saveRecording = async (name, tags) => {\n    if (currentRecording && name.trim()) {\n      try {\n        // Blobã‚’base64ã«å¤‰æ›\n        const base64Data = await blobToBase64(currentRecording.audioBlob);\n        \n        const savedRecording = {\n          ...currentRecording,\n          name: name.trim(),\n          tags: tags.filter(tag => tag.trim()).map(tag => tag.trim()),\n          audioData: base64Data, // base64ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜\n          // audioBlobã¯ä¸€æ™‚çš„ãªã‚‚ã®ãªã®ã§å‰Šé™¤\n          audioBlob: undefined\n        };\n        \n        setRecordings([...recordings, savedRecording]);\n        setCurrentRecording(null);\n        \n        // LocalStorageã«ä¿å­˜ï¼ˆaudioBlobã¯é™¤å¤–ï¼‰\n        const existingRecordings = JSON.parse(localStorage.getItem('soundRecordings') || '[]');\n        const recordingToSave = { ...savedRecording };\n        delete recordingToSave.audioBlob; // Blobã¯ä¿å­˜ã—ãªã„\n        localStorage.setItem('soundRecordings', JSON.stringify([...existingRecordings, recordingToSave]));\n      } catch (error) {\n        console.error('éŒ²éŸ³ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);\n        alert('éŒ²éŸ³ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');\n      }\n    }\n  };\n\n  const handleFileUpload = (event) => {\n    const file = event.target.files[0];\n    if (file && file.type.startsWith('audio/')) {\n      const url = URL.createObjectURL(file);\n      setCurrentRecording({\n        id: Date.now(),\n        url: url,\n        audioBlob: file,\n        name: file.name.replace(/\\.[^/.]+$/, ''),\n        tags: [],\n        createdAt: new Date()\n      });\n    }\n  };\n\n  // ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ï¼ˆiOSã§ã®å•é¡Œå¯¾ç­–ï¼‰\n  const testMicrophoneAccess = async () => {\n    try {\n      console.log('ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆé–‹å§‹');\n      \n      // HTTPSæ¥ç¶šãƒã‚§ãƒƒã‚¯\n      if (!checkHTTPS()) {\n        alert('ğŸ”’ éŒ²éŸ³æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯HTTPSæ¥ç¶šãŒå¿…è¦ã§ã™ã€‚\\n\\niPhoneã§ã¯ç‰¹ã«ã€ã‚»ã‚­ãƒ¥ã‚¢ãªæ¥ç¶šãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚');\n        return false;\n      }\n      \n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŒ²éŸ³æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚');\n      }\n\n      // ã¾ãšãƒã‚¤ã‚¯ã®æ¨©é™çŠ¶æ…‹ã‚’ç¢ºèª\n      if (navigator.permissions) {\n        try {\n          const permission = await navigator.permissions.query({ name: 'microphone' });\n          console.log('ãƒã‚¤ã‚¯æ¨©é™çŠ¶æ…‹:', permission.state);\n          \n          if (permission.state === 'denied') {\n            alert('ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‹ã‚‰ãƒã‚¤ã‚¯ã®ä½¿ç”¨ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚');\n            return false;\n          }\n        } catch (permError) {\n          console.log('æ¨©é™ç¢ºèªã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“:', permError);\n        }\n      }\n\n      // å®Ÿéš›ã«ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒ†ã‚¹ãƒˆ\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true\n        }\n      });\n      \n      // ã™ãã«ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’åœæ­¢\n      stream.getTracks().forEach(track => track.stop());\n      console.log('ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆæˆåŠŸ');\n      return true;\n      \n    } catch (error) {\n      console.error('ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆå¤±æ•—:', error);\n      \n      let errorMessage = 'ãƒã‚¤ã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚';\n      \n      if (error.name === 'NotAllowedError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ã®ä½¿ç”¨ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚\\n\\niPhoneã®å ´åˆï¼š\\n1. Safariè¨­å®š > ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ > ãƒã‚¤ã‚¯\\n2. ã“ã®ã‚µã‚¤ãƒˆã‚’è¨±å¯ã«è¨­å®š';\n      } else if (error.name === 'NotFoundError') {\n        errorMessage = 'ãƒã‚¤ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚';\n      } else if (error.name === 'NotSupportedError') {\n        errorMessage = 'ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŒ²éŸ³æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      alert(errorMessage);\n      return false;\n    }\n  };\n\n  // HTTPSæ¥ç¶šãƒã‚§ãƒƒã‚¯ï¼ˆiOSã§ã®éŒ²éŸ³ã«å¿…è¦ï¼‰\n  const checkHTTPS = () => {\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {\n      return false;\n    }\n    return true;\n  };\n\n  // éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–é–¢æ•°\n  const monitorAudioLevel = (analyserNode) => {\n    const bufferLength = analyserNode.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n    \n    console.log('éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–é–‹å§‹ - bufferLength:', bufferLength);\n    \n    const updateLevel = () => {\n      if (!isRecording) {\n        console.log('éŒ²éŸ³åœæ­¢ã®ãŸã‚éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–çµ‚äº†');\n        return;\n      }\n      \n      try {\n        // å‘¨æ³¢æ•°é ˜åŸŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆã‚ˆã‚Šå®‰å®šã—ãŸçµæœãŒå¾—ã‚‰ã‚Œã‚‹ï¼‰\n        analyserNode.getByteFrequencyData(dataArray);\n        \n        // å¹³å‡éŸ³é‡ã‚’è¨ˆç®—\n        let sum = 0;\n        for (let i = 0; i < bufferLength; i++) {\n          sum += dataArray[i];\n        }\n        const average = sum / bufferLength;\n        \n        // 0-255ã®å€¤ã‚’0-100%ã«å¤‰æ›ï¼ˆã‚ˆã‚Šç›´æ„Ÿçš„ï¼‰\n        const level = Math.min(100, (average / 255) * 200); // æ„Ÿåº¦ã‚’ä¸Šã’ã‚‹ãŸã‚2å€\n        \n        // ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šãƒ¬ãƒ™ãƒ«ã‚’ãƒ­ã‚°å‡ºåŠ›ï¼ˆæ™‚ã€…ï¼‰\n        if (Math.random() < 0.05) { // 5%ã®ç¢ºç‡ã§ãƒ­ã‚°å‡ºåŠ›\n          console.log('éŸ³å£°ãƒ¬ãƒ™ãƒ« - Average:', average, 'Level:', Math.round(level), '%');\n        }\n        \n        setAudioLevel(level);\n        \n        if (isRecording) {\n          animationFrameRef.current = requestAnimationFrame(updateLevel);\n        }\n      } catch (error) {\n        console.error('éŸ³å£°ãƒ¬ãƒ™ãƒ«ç›£è¦–ã‚¨ãƒ©ãƒ¼:', error);\n        setAudioLevel(0);\n      }\n    };\n    \n    // å°‘ã—é…å»¶ã‚’å…¥ã‚Œã¦é–‹å§‹ï¼ˆAudioContextã®å®‰å®šåŒ–ã®ãŸã‚ï¼‰\n    setTimeout(updateLevel, 100);\n  };\n\n  return (\n    <div className=\"sound-collection\">\n      <header>\n        <h2 id=\"page-title\">\n          <span role=\"img\" aria-label=\"ãƒã‚¤ã‚¯\">ğŸ¤</span> éŸ³ã‚ã¤ã‚ãƒšãƒ¼ã‚¸\n        </h2>\n        <p className=\"page-description\">\n          èº«ã®å›ã‚Šã«ã‚ã‚‹éŸ³ã‚’éŒ²éŸ³ã—ãŸã‚Šã€éŸ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦éŸ³ç´ æã‚’é›†ã‚ã¾ã—ã‚‡ã†ï¼\n        </p>\n      </header>\n      \n      {/* ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ç”¨ã®ãƒ©ã‚¤ãƒ–ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ */}\n      <AnnouncementRegion />\n      <ErrorRegion />\n      \n      <section className=\"collection-actions\" aria-labelledby=\"collection-title\">\n        <h3 id=\"collection-title\" className=\"sr-only\">éŸ³ã®åé›†æ–¹æ³•</h3>\n        \n        <section className=\"recording-section card\" aria-labelledby=\"recording-title\">\n          <h3 id=\"recording-title\">\n            <span role=\"img\" aria-label=\"ãƒã‚¤ã‚¯\">ğŸ™ï¸</span> éŸ³ã‚’éŒ²éŸ³ã™ã‚‹\n          </h3>\n          \n          {/* iOSç”¨ã®èª¬æ˜ */}\n          <div className=\"ios-notice\" role=\"region\" aria-labelledby=\"ios-instructions\">\n            <h4 id=\"ios-instructions\" className=\"sr-only\">iPhone/iPadä½¿ç”¨æ™‚ã®æ³¨æ„äº‹é …</h4>\n            <p>\n              <span role=\"img\" aria-label=\"ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³\">ğŸ“±</span> \n              <strong>iPhone/iPadã‚’ãŠä½¿ã„ã®æ–¹ã¸ï¼š</strong>\n            </p>\n            <p>éŒ²éŸ³ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒã‚¤ã‚¯ã®ä½¿ç”¨è¨±å¯ã‚’æ±‚ã‚ã‚‹ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã€Œè¨±å¯ã€ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>\n            <p>ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆã¯ã€Safariè¨­å®š â†’ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ â†’ ãƒã‚¤ã‚¯ ã§ã“ã®ã‚µã‚¤ãƒˆã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚</p>\n          </div>\n          \n          <div className=\"recording-controls\" role=\"group\" aria-labelledby=\"recording-controls-label\">\n            <h4 id=\"recording-controls-label\" className=\"sr-only\">éŒ²éŸ³æ“ä½œ</h4>\n            {!isRecording ? (\n              <button \n                ref={recordButtonRef}\n                className=\"accessible-button button-primary large-button record-btn\"\n                onClick={startRecording}\n                aria-describedby=\"record-instructions\"\n                type=\"button\"\n              >\n                <span role=\"img\" aria-label=\"éŒ²éŸ³é–‹å§‹\">ğŸ”´</span> éŒ²éŸ³é–‹å§‹\n              </button>\n            ) : (\n              <button \n                className=\"accessible-button button-secondary large-button stop-btn\"\n                onClick={stopRecording}\n                aria-describedby=\"stop-instructions\"\n                type=\"button\"\n              >\n                <span role=\"img\" aria-label=\"åœæ­¢\">â¹ï¸</span> éŒ²éŸ³åœæ­¢\n              </button>\n            )}\n            <div id=\"record-instructions\" className=\"sr-only\">\n              éŒ²éŸ³é–‹å§‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒã‚¤ã‚¯ãŒæœ‰åŠ¹ã«ãªã‚Šã€éŸ³å£°ã®éŒ²éŸ³ãŒå§‹ã¾ã‚Šã¾ã™\n            </div>\n            <div id=\"stop-instructions\" className=\"sr-only\">\n              éŒ²éŸ³åœæ­¢ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨éŒ²éŸ³ãŒçµ‚äº†ã—ã€éŸ³ã«åå‰ã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™\n            </div>\n          </div>\n\n          {isRecording && (\n            <div \n              className=\"recording-status\" \n              role=\"status\" \n              aria-live=\"polite\"\n              aria-label=\"éŒ²éŸ³çŠ¶æ³\"\n            >\n              <div className=\"recording-indicator\">\n                <div className=\"pulse-dot\" aria-hidden=\"true\"></div>\n                éŒ²éŸ³ä¸­...\n              </div>\n              <div className=\"audio-level-meter\" role=\"group\" aria-labelledby=\"audio-level-label\">\n                <div id=\"audio-level-label\" className=\"audio-level-label\">éŸ³å£°å…¥åŠ›ãƒ¬ãƒ™ãƒ«:</div>\n                <div \n                  className=\"audio-level-bar\" \n                  role=\"progressbar\"\n                  aria-valuenow={Math.round(audioLevel)}\n                  aria-valuemin=\"0\"\n                  aria-valuemax=\"100\"\n                  aria-label={`éŸ³å£°ãƒ¬ãƒ™ãƒ« ${Math.round(audioLevel)}%`}\n                >\n                  <div \n                    className=\"audio-level-fill\" \n                    style={{ width: `${audioLevel}%` }}\n                    aria-hidden=\"true\"\n                  ></div>\n                </div>\n                <div className=\"audio-level-value\" aria-hidden=\"true\">{Math.round(audioLevel)}%</div>\n              </div>\n            </div>\n          )}\n        </section>\n\n        <section className=\"upload-section card\" aria-labelledby=\"upload-title\">\n          <h3 id=\"upload-title\">\n            <span role=\"img\" aria-label=\"ãƒ•ã‚©ãƒ«ãƒ€\">ğŸ“</span> éŸ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰\n          </h3>\n          <button \n            className=\"accessible-button button-secondary large-button\"\n            onClick={() => fileInputRef.current?.click()}\n            aria-describedby=\"upload-instructions\"\n            type=\"button\"\n          >\n            <span role=\"img\" aria-label=\"ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ\">ğŸ“‚</span> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ\n          </button>\n          <div id=\"upload-instructions\" className=\"sr-only\">\n            éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚å¯¾å¿œå½¢å¼: MP3, WAV, M4A ãªã©\n          </div>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"audio/*\"\n            onChange={handleFileUpload}\n            style={{ display: 'none' }}\n            aria-label=\"éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ\"\n          />\n        </section>\n      </section>\n\n      {currentRecording && (\n        <RecordingEditor \n          recording={currentRecording}\n          onSave={saveRecording}\n          onCancel={() => setCurrentRecording(null)}\n        />\n      )}\n\n      <section className=\"recent-recordings\" aria-labelledby=\"recent-title\">\n        <h3 id=\"recent-title\">\n          <span role=\"img\" aria-label=\"ãƒ¡ãƒ¢\">ğŸ“</span> æœ€è¿‘éŒ²éŸ³ã—ãŸéŸ³\n        </h3>\n        {recordings.length === 0 ? (\n          <p className=\"no-recordings\">ã¾ã éŒ²éŸ³ã—ãŸéŸ³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ä¸Šã®éŒ²éŸ³ãƒœã‚¿ãƒ³ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ï¼</p>\n        ) : (\n          <div \n            className=\"recordings-grid\" \n            role=\"grid\" \n            aria-label=\"éŒ²éŸ³ã•ã‚ŒãŸéŸ³ã®ãƒªã‚¹ãƒˆ\"\n          >\n            {recordings.map((recording, index) => (\n              <SoundCard \n                key={recording.id} \n                recording={recording} \n                index={index}\n              />\n            ))}\n          </div>\n        )}\n      </section>\n    </div>\n  );\n};\n\nconst RecordingEditor = ({ recording, onSave, onCancel }) => {\n  const [name, setName] = useState(recording.name);\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState(recording.tags);\n  const [validationMessage, setValidationMessage] = useState('');\n\n  const addTag = () => {\n    if (tagInput.trim() && !tags.includes(tagInput.trim())) {\n      setTags([...tags, tagInput.trim()]);\n      setTagInput('');\n      setValidationMessage(`ã‚¿ã‚°ã€Œ${tagInput.trim()}ã€ã‚’è¿½åŠ ã—ã¾ã—ãŸ`);\n    } else if (tags.includes(tagInput.trim())) {\n      setValidationMessage('ã“ã®ã‚¿ã‚°ã¯æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™');\n    }\n  };\n\n  const removeTag = (tagToRemove) => {\n    setTags(tags.filter(tag => tag !== tagToRemove));\n    setValidationMessage(`ã‚¿ã‚°ã€Œ${tagToRemove}ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      addTag();\n    }\n  };\n\n  const handleSave = () => {\n    if (!name.trim()) {\n      setValidationMessage('éŸ³ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');\n      return;\n    }\n    onSave(name, tags);\n  };\n\n  return (\n    <section \n      className=\"recording-editor card\" \n      role=\"dialog\" \n      aria-labelledby=\"editor-title\"\n      aria-describedby=\"editor-description\"\n    >\n      <h3 id=\"editor-title\">\n        <span role=\"img\" aria-label=\"ç·¨é›†\">âœï¸</span> éŸ³ã«åå‰ã‚’ã¤ã‘ã‚ˆã†\n      </h3>\n      <p id=\"editor-description\" className=\"sr-only\">\n        éŒ²éŸ³ã—ãŸéŸ³ã«åå‰ã¨ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä¿å­˜ã§ãã¾ã™\n      </p>\n      \n      <div className=\"audio-preview-container\">\n        <label htmlFor=\"audio-preview\" className=\"audio-preview-label\">éŒ²éŸ³ã—ãŸéŸ³ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:</label>\n        <audio \n          id=\"audio-preview\"\n          controls \n          src={recording.url} \n          className=\"accessible-audio audio-preview\"\n          onError={(e) => {\n            console.error('éŸ³å£°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e);\n          }}\n          aria-describedby=\"audio-preview-desc\"\n        >\n          <track kind=\"captions\" label=\"éŸ³å£°èª¬æ˜\" srcLang=\"ja\" />\n          ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚\n        </audio>\n        <p id=\"audio-preview-desc\" className=\"sr-only\">\n          éŒ²éŸ³ã•ã‚ŒãŸéŸ³å£°ã‚’å†ç”Ÿã—ã¦ç¢ºèªã§ãã¾ã™\n        </p>\n      </div>\n      \n      <div className=\"form-group\">\n        <label htmlFor=\"soundName\" className=\"required-label\">\n          éŸ³ã®åå‰ <span aria-label=\"å¿…é ˆ\" className=\"required\">*</span>:\n        </label>\n        <input\n          id=\"soundName\"\n          type=\"text\"\n          value={name}\n          onChange={(e) => {\n            setName(e.target.value);\n            if (validationMessage) setValidationMessage('');\n          }}\n          placeholder=\"ä¾‹: ãƒ”ã‚¢ãƒã®éŸ³ã€é›¨ã®éŸ³\"\n          className=\"accessible-input sound-name-input\"\n          required\n          aria-describedby=\"name-help\"\n          aria-invalid={!name.trim() && validationMessage ? 'true' : 'false'}\n        />\n        <p id=\"name-help\" className=\"help-text\">\n          ã“ã®éŸ³ã‚’è¡¨ã™åˆ†ã‹ã‚Šã‚„ã™ã„åå‰ã‚’ã¤ã‘ã¦ãã ã•ã„\n        </p>\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"soundTags\" className=\"optional-label\">\n          ã‚¿ã‚° <span className=\"optional\">(ä»»æ„)</span>:\n        </label>\n        <div className=\"tag-input-container\">\n          <input\n            id=\"soundTags\"\n            type=\"text\"\n            value={tagInput}\n            onChange={(e) => setTagInput(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"ä¾‹: æ¥½å™¨ã€è‡ªç„¶\"\n            className=\"accessible-input tag-input\"\n            aria-describedby=\"tag-help\"\n            list=\"tag-suggestions\"\n          />\n          <datalist id=\"tag-suggestions\">\n            <option value=\"æ¥½å™¨\">æ¥½å™¨</option>\n            <option value=\"è‡ªç„¶\">è‡ªç„¶</option>\n            <option value=\"æ©Ÿæ¢°\">æ©Ÿæ¢°</option>\n            <option value=\"å‹•ç‰©\">å‹•ç‰©</option>\n            <option value=\"å£°\">å£°</option>\n          </datalist>\n          <button \n            onClick={addTag} \n            className=\"accessible-button add-tag-btn\"\n            type=\"button\"\n            disabled={!tagInput.trim()}\n            aria-describedby=\"add-tag-help\"\n          >\n            è¿½åŠ \n          </button>\n        </div>\n        <p id=\"tag-help\" className=\"help-text\">\n          éŸ³ã®ç¨®é¡ã‚„ã‚«ãƒ†ã‚´ãƒªã‚’è¡¨ã™ã‚¿ã‚°ã‚’è¿½åŠ ã§ãã¾ã™ã€‚Enterã‚­ãƒ¼ã§ã‚‚è¿½åŠ ã§ãã¾ã™ã€‚\n        </p>\n        <p id=\"add-tag-help\" className=\"sr-only\">\n          å…¥åŠ›ã—ãŸã‚¿ã‚°ã‚’éŸ³ã«è¿½åŠ ã—ã¾ã™\n        </p>\n        \n        {tags.length > 0 && (\n          <div className=\"tags-display\" role=\"group\" aria-labelledby=\"tags-label\">\n            <p id=\"tags-label\" className=\"tags-title\">è¿½åŠ ã•ã‚ŒãŸã‚¿ã‚°:</p>\n            <ul className=\"tags-list\" aria-live=\"polite\">\n              {tags.map((tag, index) => (\n                <li key={tag} className=\"tag-item\">\n                  <span className=\"tag\">\n                    {tag}\n                    <button \n                      onClick={() => removeTag(tag)} \n                      className=\"remove-tag\"\n                      type=\"button\"\n                      aria-label={`ã‚¿ã‚°ã€Œ${tag}ã€ã‚’å‰Šé™¤`}\n                    >\n                      <span aria-hidden=\"true\">Ã—</span>\n                    </button>\n                  </span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n\n      {validationMessage && (\n        <div \n          className=\"validation-message\" \n          role=\"status\" \n          aria-live=\"polite\"\n        >\n          {validationMessage}\n        </div>\n      )}\n\n      <div className=\"editor-actions\" role=\"group\" aria-labelledby=\"actions-label\">\n        <p id=\"actions-label\" className=\"sr-only\">ä¿å­˜ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ“ä½œ</p>\n        <button \n          onClick={handleSave}\n          className=\"accessible-button button-primary\"\n          disabled={!name.trim()}\n          type=\"button\"\n          aria-describedby=\"save-help\"\n        >\n          <span role=\"img\" aria-label=\"ä¿å­˜\">ğŸ’¾</span> ä¿å­˜\n        </button>\n        <button \n          onClick={onCancel} \n          className=\"accessible-button button-secondary\"\n          type=\"button\"\n          aria-describedby=\"cancel-help\"\n        >\n          <span role=\"img\" aria-label=\"ã‚­ãƒ£ãƒ³ã‚»ãƒ«\">âŒ</span> ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n        </button>\n        <p id=\"save-help\" className=\"sr-only\">\n          éŸ³ã®åå‰ã¨ã‚¿ã‚°ã‚’ä¿å­˜ã—ã¾ã™\n        </p>\n        <p id=\"cancel-help\" className=\"sr-only\">\n          ç·¨é›†ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¦éŒ²éŸ³ã‚’ç ´æ£„ã—ã¾ã™\n        </p>\n      </div>\n    </section>\n  );\n};\n\n\nconst SoundCard = ({ recording, index }) => {\n  const formattedDate = new Date(recording.createdAt).toLocaleDateString('ja-JP', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n\n  return (\n    <article \n      className=\"sound-card\" \n      aria-labelledby={`sound-title-${recording.id}`}\n      aria-describedby={`sound-desc-${recording.id}`}\n    >\n      <header className=\"sound-info\">\n        <h4 id={`sound-title-${recording.id}`} className=\"sound-name\">\n          {recording.name}\n        </h4>\n        <p className=\"sound-date\" aria-label={`éŒ²éŸ³æ—¥: ${formattedDate}`}>\n          {formattedDate}\n        </p>\n        {recording.tags.length > 0 && (\n          <div className=\"sound-tags\" role=\"group\" aria-label=\"ã‚¿ã‚°\">\n            {recording.tags.map((tag, tagIndex) => (\n              <span \n                key={tag} \n                className=\"tag small\"\n                role=\"mark\"\n                aria-label={`ã‚¿ã‚°: ${tag}`}\n              >\n                {tag}\n              </span>\n            ))}\n          </div>\n        )}\n      </header>\n      \n      <div className=\"sound-player\">\n        <label htmlFor={`audio-${recording.id}`} className=\"sr-only\">\n          {recording.name}ã®éŸ³å£°ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼\n        </label>\n        <audio \n          id={`audio-${recording.id}`}\n          controls \n          src={recording.url}\n          className=\"accessible-audio\"\n          onError={(e) => {\n            console.error('éŸ³å£°ã‚«ãƒ¼ãƒ‰ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e, 'recording:', recording.name);\n          }}\n          aria-describedby={`audio-desc-${recording.id}`}\n        >\n          <track kind=\"captions\" label=\"éŸ³å£°èª¬æ˜\" srcLang=\"ja\" />\n          ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚\n        </audio>\n        <p id={`audio-desc-${recording.id}`} className=\"sr-only\">\n          {recording.name}ã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã€‚å†ç”Ÿãƒœã‚¿ãƒ³ã§éŸ³ã‚’èãã“ã¨ãŒã§ãã¾ã™ã€‚\n        </p>\n      </div>\n    </article>\n  );\n};\n\nexport default SoundCollection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}