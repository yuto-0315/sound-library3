{"ast":null,"code":"import _objectSpread from\"/Users/nakataniyuutomo/Desktop/Programing/\\u30BB\\u3099\\u30DF\\u958B\\u767A/sound-library2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import'./SoundCollection.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SoundCollection=()=>{const[recordings,setRecordings]=useState([]);const[isRecording,setIsRecording]=useState(false);const[mediaRecorder,setMediaRecorder]=useState(null);const[currentRecording,setCurrentRecording]=useState(null);const[audioLevel,setAudioLevel]=useState(0);const[audioContext,setAudioContext]=useState(null);const fileInputRef=useRef(null);const animationFrameRef=useRef(null);// „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Ç¢„É≥„Éû„Ç¶„É≥„ÉàÊôÇ„ÅÆ„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó\nuseEffect(()=>{return()=>{// Èå≤Èü≥‰∏≠„ÅÆÂ†¥Âêà„ÅØÂÅúÊ≠¢\nif(mediaRecorder&&isRecording){mediaRecorder.stop();if(mediaRecorder.stream){mediaRecorder.stream.getTracks().forEach(track=>track.stop());}}// ‰ΩúÊàê„Åï„Çå„ÅüBlobURL„Çí„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó\nrecordings.forEach(recording=>{if(recording.url&&recording.url.startsWith('blob:')){URL.revokeObjectURL(recording.url);}});};},[mediaRecorder,isRecording,recordings]);const startRecording=async()=>{try{// iOS„Åß„ÅÆ„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„ÇπÊîπÂñÑ - „Åæ„Åö„ÉÜ„Çπ„Éà„ÇíÂÆüË°å\nconst hasAccess=await testMicrophoneAccess();if(!hasAccess){return;}console.log('Èå≤Èü≥ÈñãÂßãÂá¶ÁêÜ‰∏≠...');// iPadÁî®„ÅÆÈü≥Â£∞Ë®≠ÂÆö„ÇíÊúÄÈÅ©Âåñ\nconst audioConstraints={echoCancellation:false,// iPad„Åß„ÅØÁÑ°Âäπ„Å´„Åô„Çã\nnoiseSuppression:false,// iPad„Åß„ÅØÁÑ°Âäπ„Å´„Åô„Çã  \nautoGainControl:false,// iPad„Åß„ÅØÁÑ°Âäπ„Å´„Åô„Çã\nsampleRate:44100,// ÊòéÁ§∫ÁöÑ„Å´„Çµ„É≥„Éó„É´„É¨„Éº„Éà„ÇíÊåáÂÆö\nchannelCount:1// „É¢„Éé„É©„É´Èå≤Èü≥„ÇíÊòéÁ§∫\n};console.log('Èü≥Â£∞Âà∂Á¥Ñ:',audioConstraints);const stream=await navigator.mediaDevices.getUserMedia({audio:audioConstraints});console.log('Èå≤Èü≥„Çπ„Éà„É™„Éº„É†ÂèñÂæóÊàêÂäü');console.log('„Çπ„Éà„É™„Éº„É†Ë©≥Á¥∞:',{id:stream.id,active:stream.active,tracks:stream.getTracks().map(track=>({id:track.id,kind:track.kind,label:track.label,enabled:track.enabled,muted:track.muted,readyState:track.readyState,settings:track.getSettings?track.getSettings():'getSettings not supported'}))});// Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñ„ÅÆ„Åü„ÇÅ„ÅÆAudioContext„ÇíË®≠ÂÆö\nconst audioCtx=new(window.AudioContext||window.webkitAudioContext)();console.log('AudioContext‰ΩúÊàê:',{state:audioCtx.state,sampleRate:audioCtx.sampleRate,baseLatency:audioCtx.baseLatency});// AudioContext„ÅåÂÅúÊ≠¢„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØÂÜçÈñã\nif(audioCtx.state==='suspended'){console.log('AudioContext„ÇíÂÜçÈñã‰∏≠...');await audioCtx.resume();console.log('AudioContextÂÜçÈñãÂÆå‰∫Ü:',audioCtx.state);}const source=audioCtx.createMediaStreamSource(stream);const analyserNode=audioCtx.createAnalyser();analyserNode.fftSize=256;analyserNode.smoothingTimeConstant=0.8;// „Çπ„É†„Éº„Ç∏„É≥„Ç∞„ÇíËøΩÂä†\nsource.connect(analyserNode);console.log('AudioContextÊé•Á∂öÂÆå‰∫Ü:',{analyserFFTSize:analyserNode.fftSize,frequencyBinCount:analyserNode.frequencyBinCount,smoothingTimeConstant:analyserNode.smoothingTimeConstant});setAudioContext(audioCtx);// Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÈñãÂßã\nmonitorAudioLevel(analyserNode);// MediaRecorder„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„ÇíÊ±∫ÂÆö\nlet recorderOptions={};if(MediaRecorder.isTypeSupported('audio/webm;codecs=opus')){recorderOptions.mimeType='audio/webm;codecs=opus';console.log('‰ΩøÁî®„Åô„ÇãMIME„Çø„Ç§„Éó: audio/webm;codecs=opus');}else if(MediaRecorder.isTypeSupported('audio/mp4')){recorderOptions.mimeType='audio/mp4';console.log('‰ΩøÁî®„Åô„ÇãMIME„Çø„Ç§„Éó: audio/mp4');}else if(MediaRecorder.isTypeSupported('audio/wav')){recorderOptions.mimeType='audio/wav';console.log('‰ΩøÁî®„Åô„ÇãMIME„Çø„Ç§„Éó: audio/wav');}else{console.log('„Éá„Éï„Ç©„É´„ÉàMIME„Çø„Ç§„Éó„Çí‰ΩøÁî®');}const recorder=new MediaRecorder(stream,recorderOptions);console.log('MediaRecorder‰ΩúÊàê:',{mimeType:recorder.mimeType,state:recorder.state,supportedTypes:{'audio/webm;codecs=opus':MediaRecorder.isTypeSupported('audio/webm;codecs=opus'),'audio/mp4':MediaRecorder.isTypeSupported('audio/mp4'),'audio/wav':MediaRecorder.isTypeSupported('audio/wav')}});const chunks=[];recorder.ondataavailable=e=>{console.log('Èå≤Èü≥„Éá„Éº„ÇøÂèó‰ø°:',e.data.size,'bytes, type:',e.data.type);chunks.push(e.data);};recorder.onstop=()=>{const blob=new Blob(chunks,{type:'audio/wav'});const url=URL.createObjectURL(blob);console.log('Èå≤Èü≥ÂÆå‰∫Ü - Blob„Çµ„Ç§„Ç∫:',blob.size,'bytes, type:',blob.type);console.log('„ÉÅ„É£„É≥„ÇØÊï∞:',chunks.length,'chunks');setCurrentRecording({id:Date.now(),url:url,audioBlob:blob,name:'',tags:[],createdAt:new Date()});// Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÂÅúÊ≠¢\nsetAudioLevel(0);if(animationFrameRef.current){cancelAnimationFrame(animationFrameRef.current);}};recorder.start();console.log('Èå≤Èü≥ÈñãÂßã:',recorder.state);setMediaRecorder(recorder);setIsRecording(true);console.log('Èå≤Èü≥ÈñãÂßãÂÆå‰∫Ü');}catch(error){console.error('Èå≤Èü≥„ÅÆÈñãÂßã„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:',error);let errorMessage='Èå≤Èü≥„ÇíÈñãÂßã„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ';if(error.name==='NotAllowedError'){errorMessage='„Éû„Ç§„ÇØ„ÅÆ‰ΩøÁî®„ÅåÊãíÂê¶„Åï„Çå„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åß„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';}else if(error.name==='NotFoundError'){errorMessage='„Éû„Ç§„ÇØ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ„Éá„Éê„Ç§„Çπ„Å´„Éû„Ç§„ÇØ„ÅåÊé•Á∂ö„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';}else if(error.name==='NotSupportedError'){errorMessage='„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈå≤Èü≥Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ';}else if(error.name==='NotReadableError'){errorMessage='„Éû„Ç§„ÇØ„Åå‰ªñ„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Åß‰ΩøÁî®‰∏≠„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ';}else if(error.message){errorMessage=error.message;}alert(errorMessage);}};const stopRecording=()=>{if(mediaRecorder){mediaRecorder.stop();mediaRecorder.stream.getTracks().forEach(track=>track.stop());setIsRecording(false);setMediaRecorder(null);}// Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñ„ÇíÂÅúÊ≠¢\nsetAudioLevel(0);if(animationFrameRef.current){cancelAnimationFrame(animationFrameRef.current);}// AudioContext„Çí„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó\nif(audioContext){audioContext.close();setAudioContext(null);}};// Blob„Çí Base64 „Å´Â§âÊèõ„Åô„ÇãÈñ¢Êï∞\nconst blobToBase64=blob=>{return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onload=()=>resolve(reader.result);reader.onerror=reject;reader.readAsDataURL(blob);});};const saveRecording=async(name,tags)=>{if(currentRecording&&name.trim()){try{// Blob„Çíbase64„Å´Â§âÊèõ\nconst base64Data=await blobToBase64(currentRecording.audioBlob);const savedRecording=_objectSpread(_objectSpread({},currentRecording),{},{name:name.trim(),tags:tags.filter(tag=>tag.trim()).map(tag=>tag.trim()),audioData:base64Data,// base64„Éá„Éº„Çø„Çí‰øùÂ≠ò\n// audioBlob„ÅØ‰∏ÄÊôÇÁöÑ„Å™„ÇÇ„ÅÆ„Å™„ÅÆ„ÅßÂâäÈô§\naudioBlob:undefined});setRecordings([...recordings,savedRecording]);setCurrentRecording(null);// LocalStorage„Å´‰øùÂ≠òÔºàaudioBlob„ÅØÈô§Â§ñÔºâ\nconst existingRecordings=JSON.parse(localStorage.getItem('soundRecordings')||'[]');const recordingToSave=_objectSpread({},savedRecording);delete recordingToSave.audioBlob;// Blob„ÅØ‰øùÂ≠ò„Åó„Å™„ÅÑ\nlocalStorage.setItem('soundRecordings',JSON.stringify([...existingRecordings,recordingToSave]));}catch(error){console.error('Èå≤Èü≥„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:',error);alert('Èå≤Èü≥„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');}}};const handleFileUpload=event=>{const file=event.target.files[0];if(file&&file.type.startsWith('audio/')){const url=URL.createObjectURL(file);setCurrentRecording({id:Date.now(),url:url,audioBlob:file,name:file.name.replace(/\\.[^/.]+$/,''),tags:[],createdAt:new Date()});}};// „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÉÜ„Çπ„ÉàÊ©üËÉΩÔºàiOS„Åß„ÅÆÂïèÈ°åÂØæÁ≠ñÔºâ\nconst testMicrophoneAccess=async()=>{try{console.log('„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÉÜ„Çπ„ÉàÈñãÂßã');// HTTPSÊé•Á∂ö„ÉÅ„Çß„ÉÉ„ÇØ\nif(!checkHTTPS()){alert('üîí Èå≤Èü≥Ê©üËÉΩ„Çí‰ΩøÁî®„Åô„Çã„Å´„ÅØHTTPSÊé•Á∂ö„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ\\n\\niPhone„Åß„ÅØÁâπ„Å´„ÄÅ„Çª„Ç≠„É•„Ç¢„Å™Êé•Á∂ö„ÅåÂøÖË¶Å„Å®„Å™„Çä„Åæ„Åô„ÄÇ');return false;}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){throw new Error('„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈå≤Èü≥Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ');}// „Åæ„Åö„Éû„Ç§„ÇØ„ÅÆÊ®©ÈôêÁä∂ÊÖã„ÇíÁ¢∫Ë™ç\nif(navigator.permissions){try{const permission=await navigator.permissions.query({name:'microphone'});console.log('„Éû„Ç§„ÇØÊ®©ÈôêÁä∂ÊÖã:',permission.state);if(permission.state==='denied'){alert('„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÅåÊãíÂê¶„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åã„Çâ„Éû„Ç§„ÇØ„ÅÆ‰ΩøÁî®„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');return false;}}catch(permError){console.log('Ê®©ÈôêÁ¢∫Ë™ç„ÅØ„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì:',permError);}}// ÂÆüÈöõ„Å´„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„Çí„ÉÜ„Çπ„Éà\nconst stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:true,noiseSuppression:true,autoGainControl:true}});// „Åô„Åê„Å´„Çπ„Éà„É™„Éº„É†„ÇíÂÅúÊ≠¢\nstream.getTracks().forEach(track=>track.stop());console.log('„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÉÜ„Çπ„ÉàÊàêÂäü');return true;}catch(error){console.error('„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÉÜ„Çπ„ÉàÂ§±Êïó:',error);let errorMessage='„Éû„Ç§„ÇØ„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åõ„Çì„ÄÇ';if(error.name==='NotAllowedError'){errorMessage='„Éû„Ç§„ÇØ„ÅÆ‰ΩøÁî®„ÅåÊãíÂê¶„Åï„Çå„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åß„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\\n\\niPhone„ÅÆÂ†¥ÂêàÔºö\\n1. SafariË®≠ÂÆö > „Éó„É©„Ç§„Éê„Ç∑„Éº„Å®„Çª„Ç≠„É•„É™„ÉÜ„Ç£ > „Éû„Ç§„ÇØ\\n2. „Åì„ÅÆ„Çµ„Ç§„Éà„ÇíË®±ÂèØ„Å´Ë®≠ÂÆö';}else if(error.name==='NotFoundError'){errorMessage='„Éû„Ç§„ÇØ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ';}else if(error.name==='NotSupportedError'){errorMessage='„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈå≤Èü≥Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ';}else if(error.message){errorMessage=error.message;}alert(errorMessage);return false;}};// HTTPSÊé•Á∂ö„ÉÅ„Çß„ÉÉ„ÇØÔºàiOS„Åß„ÅÆÈå≤Èü≥„Å´ÂøÖË¶ÅÔºâ\nconst checkHTTPS=()=>{if(window.location.protocol!=='https:'&&window.location.hostname!=='localhost'&&window.location.hostname!=='127.0.0.1'){return false;}return true;};// Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÈñ¢Êï∞\nconst monitorAudioLevel=analyserNode=>{const bufferLength=analyserNode.frequencyBinCount;const dataArray=new Uint8Array(bufferLength);console.log('Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÈñãÂßã - bufferLength:',bufferLength);const updateLevel=()=>{if(!isRecording){console.log('Èå≤Èü≥ÂÅúÊ≠¢„ÅÆ„Åü„ÇÅÈü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÁµÇ‰∫Ü');return;}// ÊôÇÈñìÈ†òÂüü„Éá„Éº„Çø„ÇíÂèñÂæóÔºàÂë®Ê≥¢Êï∞È†òÂüü„Åß„ÅØ„Å™„ÅèÔºâ\nanalyserNode.getByteTimeDomainData(dataArray);// „Éá„Éê„ÉÉ„Ç∞Áî®ÔºöÊúÄÂàù„ÅÆ10„Çµ„É≥„Éó„É´„Çí„É≠„Ç∞Âá∫ÂäõÔºàÊúÄÂàù„ÅÆÊï∞Áßí„ÅÆ„ÅøÔºâ\nif(Math.random()<0.01){// 1%„ÅÆÁ¢∫Áéá„Åß„É≠„Ç∞Âá∫Âäõ\nconsole.log('Èü≥Â£∞„Éá„Éº„Çø„Çµ„É≥„Éó„É´:',Array.from(dataArray.slice(0,10)));}// RMSÔºà‰∫å‰πóÂπ≥ÂùáÂπ≥ÊñπÊ†πÔºâ„ÇíË®àÁÆó\nlet sum=0;for(let i=0;i<bufferLength;i++){const sample=(dataArray[i]-128)/128;// -1 to 1„ÅÆÁØÑÂõ≤„Å´Ê≠£Ë¶èÂåñ\nsum+=sample*sample;}const rms=Math.sqrt(sum/bufferLength);// „Éá„Ç∑„Éô„É´„Å´Â§âÊèõ„Åó„Å¶0-100„ÅÆÁØÑÂõ≤„Å´„Éû„ÉÉ„Éî„É≥„Ç∞\nconst db=20*Math.log10(rms+0.0001);// 0.0001„ÅØ-‚àû„ÇíÈò≤„Åê„Åü„ÇÅ\nconst level=Math.max(0,Math.min(100,(db+60)/60*100));// -60dB„Çí0%„ÄÅ0dB„Çí100%„Å´\n// „Éá„Éê„ÉÉ„Ç∞Áî®Ôºö„É¨„Éô„É´„Çí„É≠„Ç∞Âá∫ÂäõÔºàÊôÇ„ÄÖÔºâ\nif(Math.random()<0.01){// 1%„ÅÆÁ¢∫Áéá„Åß„É≠„Ç∞Âá∫Âäõ\nconsole.log('Èü≥Â£∞„É¨„Éô„É´ - RMS:',rms,'dB:',db,'Level:',level);}setAudioLevel(level);if(isRecording){animationFrameRef.current=requestAnimationFrame(updateLevel);}};updateLevel();};return/*#__PURE__*/_jsxs(\"div\",{className:\"sound-collection\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDFA4 \\u97F3\\u3042\\u3064\\u3081\\u30DA\\u30FC\\u30B8\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u8EAB\\u306E\\u56DE\\u308A\\u306B\\u3042\\u308B\\u97F3\\u3092\\u9332\\u97F3\\u3057\\u305F\\u308A\\u3001\\u97F3\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\\u3057\\u3066\\u97F3\\u7D20\\u6750\\u3092\\u96C6\\u3081\\u307E\\u3057\\u3087\\u3046\\uFF01\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"collection-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"recording-section card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDF99\\uFE0F \\u97F3\\u3092\\u9332\\u97F3\\u3059\\u308B\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ios-notice\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCF1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"iPhone/iPad\\u3092\\u304A\\u4F7F\\u3044\\u306E\\u65B9\\u3078\\uFF1A\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u9332\\u97F3\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3059\\u3068\\u30DE\\u30A4\\u30AF\\u306E\\u4F7F\\u7528\\u8A31\\u53EF\\u3092\\u6C42\\u3081\\u308B\\u30C0\\u30A4\\u30A2\\u30ED\\u30B0\\u304C\\u8868\\u793A\\u3055\\u308C\\u307E\\u3059\\u3002\\u300C\\u8A31\\u53EF\\u300D\\u3092\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u30C0\\u30A4\\u30A2\\u30ED\\u30B0\\u304C\\u8868\\u793A\\u3055\\u308C\\u306A\\u3044\\u5834\\u5408\\u306F\\u3001Safari\\u8A2D\\u5B9A \\u2192 \\u30D7\\u30E9\\u30A4\\u30D0\\u30B7\\u30FC\\u3068\\u30BB\\u30AD\\u30E5\\u30EA\\u30C6\\u30A3 \\u2192 \\u30DE\\u30A4\\u30AF \\u3067\\u3053\\u306E\\u30B5\\u30A4\\u30C8\\u3092\\u8A31\\u53EF\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"recording-controls\",children:!isRecording?/*#__PURE__*/_jsx(\"button\",{className:\"button-primary large-button record-btn\",onClick:startRecording,children:\"\\uD83D\\uDD34 \\u9332\\u97F3\\u958B\\u59CB\"}):/*#__PURE__*/_jsx(\"button\",{className:\"button-secondary large-button stop-btn\",onClick:stopRecording,children:\"\\u23F9\\uFE0F \\u9332\\u97F3\\u505C\\u6B62\"})}),isRecording&&/*#__PURE__*/_jsxs(\"div\",{className:\"recording-status\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"recording-indicator\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pulse-dot\"}),\"\\u9332\\u97F3\\u4E2D...\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"audio-level-meter\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"audio-level-label\",children:\"\\u97F3\\u58F0\\u5165\\u529B\\u30EC\\u30D9\\u30EB:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"audio-level-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"audio-level-fill\",style:{width:\"\".concat(audioLevel,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"audio-level-value\",children:[Math.round(audioLevel),\"%\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-section card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCC1 \\u97F3\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button-secondary large-button\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},children:\"\\uD83D\\uDCC2 \\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"audio/*\",onChange:handleFileUpload,style:{display:'none'}})]})]}),currentRecording&&/*#__PURE__*/_jsx(RecordingEditor,{recording:currentRecording,onSave:saveRecording,onCancel:()=>setCurrentRecording(null)}),/*#__PURE__*/_jsxs(\"div\",{className:\"recent-recordings\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCDD \\u6700\\u8FD1\\u9332\\u97F3\\u3057\\u305F\\u97F3\"}),recordings.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-recordings\",children:\"\\u307E\\u3060\\u9332\\u97F3\\u3057\\u305F\\u97F3\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\\u3002\\u4E0A\\u306E\\u9332\\u97F3\\u30DC\\u30BF\\u30F3\\u304B\\u3089\\u59CB\\u3081\\u307E\\u3057\\u3087\\u3046\\uFF01\"}):/*#__PURE__*/_jsx(\"div\",{className:\"recordings-grid\",children:recordings.map(recording=>/*#__PURE__*/_jsx(SoundCard,{recording:recording},recording.id))})]})]});};const RecordingEditor=_ref=>{let{recording,onSave,onCancel}=_ref;const[name,setName]=useState(recording.name);const[tagInput,setTagInput]=useState('');const[tags,setTags]=useState(recording.tags);const addTag=()=>{if(tagInput.trim()&&!tags.includes(tagInput.trim())){setTags([...tags,tagInput.trim()]);setTagInput('');}};const removeTag=tagToRemove=>{setTags(tags.filter(tag=>tag!==tagToRemove));};const handleKeyPress=e=>{if(e.key==='Enter'){addTag();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"recording-editor card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u270F\\uFE0F \\u97F3\\u306B\\u540D\\u524D\\u3092\\u3064\\u3051\\u3088\\u3046\"}),/*#__PURE__*/_jsx(\"audio\",{controls:true,src:recording.url,className:\"audio-preview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"soundName\",children:\"\\u97F3\\u306E\\u540D\\u524D:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"soundName\",type:\"text\",value:name,onChange:e=>setName(e.target.value),placeholder:\"\\u4F8B: \\u30D4\\u30A2\\u30CE\\u306E\\u97F3\\u3001\\u96E8\\u306E\\u97F3\",className:\"sound-name-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"soundTags\",children:\"\\u30BF\\u30B0:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tag-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"soundTags\",type:\"text\",value:tagInput,onChange:e=>setTagInput(e.target.value),onKeyPress:handleKeyPress,placeholder:\"\\u4F8B: \\u697D\\u5668\\u3001\\u81EA\\u7136\",className:\"tag-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addTag,className:\"add-tag-btn\",children:\"\\u8FFD\\u52A0\"})]}),tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"tags-display\",children:tags.map(tag=>/*#__PURE__*/_jsxs(\"span\",{className:\"tag\",children:[tag,/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeTag(tag),className:\"remove-tag\",children:\"\\xD7\"})]},tag))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editor-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onSave(name,tags),className:\"button-primary\",disabled:!name.trim(),children:\"\\uD83D\\uDCBE \\u4FDD\\u5B58\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"button-secondary\",children:\"\\u274C \\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"})]})]});};const SoundCard=_ref2=>{let{recording}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"sound-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sound-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:recording.name}),/*#__PURE__*/_jsx(\"p\",{className:\"sound-date\",children:new Date(recording.createdAt).toLocaleDateString('ja-JP')}),recording.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"sound-tags\",children:recording.tags.map(tag=>/*#__PURE__*/_jsx(\"span\",{className:\"tag small\",children:tag},tag))})]}),/*#__PURE__*/_jsx(\"audio\",{controls:true,src:recording.url})]});};export default SoundCollection;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","SoundCollection","recordings","setRecordings","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","currentRecording","setCurrentRecording","audioLevel","setAudioLevel","audioContext","setAudioContext","fileInputRef","animationFrameRef","stop","stream","getTracks","forEach","track","recording","url","startsWith","URL","revokeObjectURL","startRecording","hasAccess","testMicrophoneAccess","console","log","audioConstraints","echoCancellation","noiseSuppression","autoGainControl","sampleRate","channelCount","navigator","mediaDevices","getUserMedia","audio","id","active","tracks","map","kind","label","enabled","muted","readyState","settings","getSettings","audioCtx","window","AudioContext","webkitAudioContext","state","baseLatency","resume","source","createMediaStreamSource","analyserNode","createAnalyser","fftSize","smoothingTimeConstant","connect","analyserFFTSize","frequencyBinCount","monitorAudioLevel","recorderOptions","MediaRecorder","isTypeSupported","mimeType","recorder","supportedTypes","chunks","ondataavailable","e","data","size","type","push","onstop","blob","Blob","createObjectURL","length","Date","now","audioBlob","name","tags","createdAt","current","cancelAnimationFrame","start","error","errorMessage","message","alert","stopRecording","close","blobToBase64","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsDataURL","saveRecording","trim","base64Data","savedRecording","_objectSpread","filter","tag","audioData","undefined","existingRecordings","JSON","parse","localStorage","getItem","recordingToSave","setItem","stringify","handleFileUpload","event","file","target","files","replace","checkHTTPS","Error","permissions","permission","query","permError","location","protocol","hostname","bufferLength","dataArray","Uint8Array","updateLevel","getByteTimeDomainData","Math","random","Array","from","slice","sum","i","sample","rms","sqrt","db","log10","level","max","min","requestAnimationFrame","className","children","onClick","style","width","concat","round","_fileInputRef$current","click","ref","accept","onChange","display","RecordingEditor","onSave","onCancel","SoundCard","_ref","setName","tagInput","setTagInput","setTags","addTag","includes","removeTag","tagToRemove","handleKeyPress","key","controls","src","htmlFor","value","placeholder","onKeyPress","disabled","_ref2","toLocaleDateString"],"sources":["/Users/nakataniyuutomo/Desktop/Programing/„Çª„Çô„ÉüÈñãÁô∫/sound-library2/src/pages/SoundCollection.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './SoundCollection.css';\n\nconst SoundCollection = () => {\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [currentRecording, setCurrentRecording] = useState(null);\n  const [audioLevel, setAudioLevel] = useState(0);\n  const [audioContext, setAudioContext] = useState(null);\n  const fileInputRef = useRef(null);\n  const animationFrameRef = useRef(null);\n\n  // „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Ç¢„É≥„Éû„Ç¶„É≥„ÉàÊôÇ„ÅÆ„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó\n  useEffect(() => {\n    return () => {\n      // Èå≤Èü≥‰∏≠„ÅÆÂ†¥Âêà„ÅØÂÅúÊ≠¢\n      if (mediaRecorder && isRecording) {\n        mediaRecorder.stop();\n        if (mediaRecorder.stream) {\n          mediaRecorder.stream.getTracks().forEach(track => track.stop());\n        }\n      }\n      \n      // ‰ΩúÊàê„Åï„Çå„ÅüBlobURL„Çí„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó\n      recordings.forEach(recording => {\n        if (recording.url && recording.url.startsWith('blob:')) {\n          URL.revokeObjectURL(recording.url);\n        }\n      });\n    };\n  }, [mediaRecorder, isRecording, recordings]);\n\n  const startRecording = async () => {\n    try {\n      // iOS„Åß„ÅÆ„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„ÇπÊîπÂñÑ - „Åæ„Åö„ÉÜ„Çπ„Éà„ÇíÂÆüË°å\n      const hasAccess = await testMicrophoneAccess();\n      if (!hasAccess) {\n        return;\n      }\n\n      console.log('Èå≤Èü≥ÈñãÂßãÂá¶ÁêÜ‰∏≠...');\n      \n      // iPadÁî®„ÅÆÈü≥Â£∞Ë®≠ÂÆö„ÇíÊúÄÈÅ©Âåñ\n      const audioConstraints = {\n        echoCancellation: false, // iPad„Åß„ÅØÁÑ°Âäπ„Å´„Åô„Çã\n        noiseSuppression: false, // iPad„Åß„ÅØÁÑ°Âäπ„Å´„Åô„Çã  \n        autoGainControl: false,  // iPad„Åß„ÅØÁÑ°Âäπ„Å´„Åô„Çã\n        sampleRate: 44100,       // ÊòéÁ§∫ÁöÑ„Å´„Çµ„É≥„Éó„É´„É¨„Éº„Éà„ÇíÊåáÂÆö\n        channelCount: 1          // „É¢„Éé„É©„É´Èå≤Èü≥„ÇíÊòéÁ§∫\n      };\n      \n      console.log('Èü≥Â£∞Âà∂Á¥Ñ:', audioConstraints);\n      \n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: audioConstraints\n      });\n      \n      console.log('Èå≤Èü≥„Çπ„Éà„É™„Éº„É†ÂèñÂæóÊàêÂäü');\n      console.log('„Çπ„Éà„É™„Éº„É†Ë©≥Á¥∞:', {\n        id: stream.id,\n        active: stream.active,\n        tracks: stream.getTracks().map(track => ({\n          id: track.id,\n          kind: track.kind,\n          label: track.label,\n          enabled: track.enabled,\n          muted: track.muted,\n          readyState: track.readyState,\n          settings: track.getSettings ? track.getSettings() : 'getSettings not supported'\n        }))\n      });\n      \n      // Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñ„ÅÆ„Åü„ÇÅ„ÅÆAudioContext„ÇíË®≠ÂÆö\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n      console.log('AudioContext‰ΩúÊàê:', {\n        state: audioCtx.state,\n        sampleRate: audioCtx.sampleRate,\n        baseLatency: audioCtx.baseLatency\n      });\n      \n      // AudioContext„ÅåÂÅúÊ≠¢„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØÂÜçÈñã\n      if (audioCtx.state === 'suspended') {\n        console.log('AudioContext„ÇíÂÜçÈñã‰∏≠...');\n        await audioCtx.resume();\n        console.log('AudioContextÂÜçÈñãÂÆå‰∫Ü:', audioCtx.state);\n      }\n      \n      const source = audioCtx.createMediaStreamSource(stream);\n      const analyserNode = audioCtx.createAnalyser();\n      analyserNode.fftSize = 256;\n      analyserNode.smoothingTimeConstant = 0.8; // „Çπ„É†„Éº„Ç∏„É≥„Ç∞„ÇíËøΩÂä†\n      source.connect(analyserNode);\n      \n      console.log('AudioContextÊé•Á∂öÂÆå‰∫Ü:', {\n        analyserFFTSize: analyserNode.fftSize,\n        frequencyBinCount: analyserNode.frequencyBinCount,\n        smoothingTimeConstant: analyserNode.smoothingTimeConstant\n      });\n      \n      setAudioContext(audioCtx);\n      \n      // Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÈñãÂßã\n      monitorAudioLevel(analyserNode);\n      \n      // MediaRecorder„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„ÇíÊ±∫ÂÆö\n      let recorderOptions = {};\n      \n      if (MediaRecorder.isTypeSupported('audio/webm;codecs=opus')) {\n        recorderOptions.mimeType = 'audio/webm;codecs=opus';\n        console.log('‰ΩøÁî®„Åô„ÇãMIME„Çø„Ç§„Éó: audio/webm;codecs=opus');\n      } else if (MediaRecorder.isTypeSupported('audio/mp4')) {\n        recorderOptions.mimeType = 'audio/mp4';\n        console.log('‰ΩøÁî®„Åô„ÇãMIME„Çø„Ç§„Éó: audio/mp4');\n      } else if (MediaRecorder.isTypeSupported('audio/wav')) {\n        recorderOptions.mimeType = 'audio/wav';\n        console.log('‰ΩøÁî®„Åô„ÇãMIME„Çø„Ç§„Éó: audio/wav');\n      } else {\n        console.log('„Éá„Éï„Ç©„É´„ÉàMIME„Çø„Ç§„Éó„Çí‰ΩøÁî®');\n      }\n      \n      const recorder = new MediaRecorder(stream, recorderOptions);\n      console.log('MediaRecorder‰ΩúÊàê:', {\n        mimeType: recorder.mimeType,\n        state: recorder.state,\n        supportedTypes: {\n          'audio/webm;codecs=opus': MediaRecorder.isTypeSupported('audio/webm;codecs=opus'),\n          'audio/mp4': MediaRecorder.isTypeSupported('audio/mp4'),\n          'audio/wav': MediaRecorder.isTypeSupported('audio/wav')\n        }\n      });\n      \n      const chunks = [];\n\n      recorder.ondataavailable = (e) => {\n        console.log('Èå≤Èü≥„Éá„Éº„ÇøÂèó‰ø°:', e.data.size, 'bytes, type:', e.data.type);\n        chunks.push(e.data);\n      };\n\n      recorder.onstop = () => {\n        const blob = new Blob(chunks, { type: 'audio/wav' });\n        const url = URL.createObjectURL(blob);\n        console.log('Èå≤Èü≥ÂÆå‰∫Ü - Blob„Çµ„Ç§„Ç∫:', blob.size, 'bytes, type:', blob.type);\n        console.log('„ÉÅ„É£„É≥„ÇØÊï∞:', chunks.length, 'chunks');\n        setCurrentRecording({\n          id: Date.now(),\n          url: url,\n          audioBlob: blob,\n          name: '',\n          tags: [],\n          createdAt: new Date()\n        });\n        \n        // Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÂÅúÊ≠¢\n        setAudioLevel(0);\n        if (animationFrameRef.current) {\n          cancelAnimationFrame(animationFrameRef.current);\n        }\n      };\n\n      recorder.start();\n      console.log('Èå≤Èü≥ÈñãÂßã:', recorder.state);\n      setMediaRecorder(recorder);\n      setIsRecording(true);\n      console.log('Èå≤Èü≥ÈñãÂßãÂÆå‰∫Ü');\n      \n    } catch (error) {\n      console.error('Èå≤Èü≥„ÅÆÈñãÂßã„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:', error);\n      \n      let errorMessage = 'Èå≤Èü≥„ÇíÈñãÂßã„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ';\n      \n      if (error.name === 'NotAllowedError') {\n        errorMessage = '„Éû„Ç§„ÇØ„ÅÆ‰ΩøÁî®„ÅåÊãíÂê¶„Åï„Çå„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åß„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';\n      } else if (error.name === 'NotFoundError') {\n        errorMessage = '„Éû„Ç§„ÇØ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ„Éá„Éê„Ç§„Çπ„Å´„Éû„Ç§„ÇØ„ÅåÊé•Á∂ö„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';\n      } else if (error.name === 'NotSupportedError') {\n        errorMessage = '„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈå≤Èü≥Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ';\n      } else if (error.name === 'NotReadableError') {\n        errorMessage = '„Éû„Ç§„ÇØ„Åå‰ªñ„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Åß‰ΩøÁî®‰∏≠„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      alert(errorMessage);\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n      mediaRecorder.stream.getTracks().forEach(track => track.stop());\n      setIsRecording(false);\n      setMediaRecorder(null);\n    }\n    \n    // Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñ„ÇíÂÅúÊ≠¢\n    setAudioLevel(0);\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n    \n    // AudioContext„Çí„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó\n    if (audioContext) {\n      audioContext.close();\n      setAudioContext(null);\n    }\n  };\n\n  // Blob„Çí Base64 „Å´Â§âÊèõ„Åô„ÇãÈñ¢Êï∞\n  const blobToBase64 = (blob) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  };\n\n  const saveRecording = async (name, tags) => {\n    if (currentRecording && name.trim()) {\n      try {\n        // Blob„Çíbase64„Å´Â§âÊèõ\n        const base64Data = await blobToBase64(currentRecording.audioBlob);\n        \n        const savedRecording = {\n          ...currentRecording,\n          name: name.trim(),\n          tags: tags.filter(tag => tag.trim()).map(tag => tag.trim()),\n          audioData: base64Data, // base64„Éá„Éº„Çø„Çí‰øùÂ≠ò\n          // audioBlob„ÅØ‰∏ÄÊôÇÁöÑ„Å™„ÇÇ„ÅÆ„Å™„ÅÆ„ÅßÂâäÈô§\n          audioBlob: undefined\n        };\n        \n        setRecordings([...recordings, savedRecording]);\n        setCurrentRecording(null);\n        \n        // LocalStorage„Å´‰øùÂ≠òÔºàaudioBlob„ÅØÈô§Â§ñÔºâ\n        const existingRecordings = JSON.parse(localStorage.getItem('soundRecordings') || '[]');\n        const recordingToSave = { ...savedRecording };\n        delete recordingToSave.audioBlob; // Blob„ÅØ‰øùÂ≠ò„Åó„Å™„ÅÑ\n        localStorage.setItem('soundRecordings', JSON.stringify([...existingRecordings, recordingToSave]));\n      } catch (error) {\n        console.error('Èå≤Èü≥„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:', error);\n        alert('Èå≤Èü≥„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');\n      }\n    }\n  };\n\n  const handleFileUpload = (event) => {\n    const file = event.target.files[0];\n    if (file && file.type.startsWith('audio/')) {\n      const url = URL.createObjectURL(file);\n      setCurrentRecording({\n        id: Date.now(),\n        url: url,\n        audioBlob: file,\n        name: file.name.replace(/\\.[^/.]+$/, ''),\n        tags: [],\n        createdAt: new Date()\n      });\n    }\n  };\n\n  // „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÉÜ„Çπ„ÉàÊ©üËÉΩÔºàiOS„Åß„ÅÆÂïèÈ°åÂØæÁ≠ñÔºâ\n  const testMicrophoneAccess = async () => {\n    try {\n      console.log('„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÉÜ„Çπ„ÉàÈñãÂßã');\n      \n      // HTTPSÊé•Á∂ö„ÉÅ„Çß„ÉÉ„ÇØ\n      if (!checkHTTPS()) {\n        alert('üîí Èå≤Èü≥Ê©üËÉΩ„Çí‰ΩøÁî®„Åô„Çã„Å´„ÅØHTTPSÊé•Á∂ö„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ\\n\\niPhone„Åß„ÅØÁâπ„Å´„ÄÅ„Çª„Ç≠„É•„Ç¢„Å™Êé•Á∂ö„ÅåÂøÖË¶Å„Å®„Å™„Çä„Åæ„Åô„ÄÇ');\n        return false;\n      }\n      \n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈå≤Èü≥Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ');\n      }\n\n      // „Åæ„Åö„Éû„Ç§„ÇØ„ÅÆÊ®©ÈôêÁä∂ÊÖã„ÇíÁ¢∫Ë™ç\n      if (navigator.permissions) {\n        try {\n          const permission = await navigator.permissions.query({ name: 'microphone' });\n          console.log('„Éû„Ç§„ÇØÊ®©ÈôêÁä∂ÊÖã:', permission.state);\n          \n          if (permission.state === 'denied') {\n            alert('„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÅåÊãíÂê¶„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åã„Çâ„Éû„Ç§„ÇØ„ÅÆ‰ΩøÁî®„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');\n            return false;\n          }\n        } catch (permError) {\n          console.log('Ê®©ÈôêÁ¢∫Ë™ç„ÅØ„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì:', permError);\n        }\n      }\n\n      // ÂÆüÈöõ„Å´„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„Çí„ÉÜ„Çπ„Éà\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true\n        }\n      });\n      \n      // „Åô„Åê„Å´„Çπ„Éà„É™„Éº„É†„ÇíÂÅúÊ≠¢\n      stream.getTracks().forEach(track => track.stop());\n      console.log('„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÉÜ„Çπ„ÉàÊàêÂäü');\n      return true;\n      \n    } catch (error) {\n      console.error('„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÉÜ„Çπ„ÉàÂ§±Êïó:', error);\n      \n      let errorMessage = '„Éû„Ç§„ÇØ„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åõ„Çì„ÄÇ';\n      \n      if (error.name === 'NotAllowedError') {\n        errorMessage = '„Éû„Ç§„ÇØ„ÅÆ‰ΩøÁî®„ÅåÊãíÂê¶„Åï„Çå„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åß„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\\n\\niPhone„ÅÆÂ†¥ÂêàÔºö\\n1. SafariË®≠ÂÆö > „Éó„É©„Ç§„Éê„Ç∑„Éº„Å®„Çª„Ç≠„É•„É™„ÉÜ„Ç£ > „Éû„Ç§„ÇØ\\n2. „Åì„ÅÆ„Çµ„Ç§„Éà„ÇíË®±ÂèØ„Å´Ë®≠ÂÆö';\n      } else if (error.name === 'NotFoundError') {\n        errorMessage = '„Éû„Ç§„ÇØ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ';\n      } else if (error.name === 'NotSupportedError') {\n        errorMessage = '„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈå≤Èü≥Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      alert(errorMessage);\n      return false;\n    }\n  };\n\n  // HTTPSÊé•Á∂ö„ÉÅ„Çß„ÉÉ„ÇØÔºàiOS„Åß„ÅÆÈå≤Èü≥„Å´ÂøÖË¶ÅÔºâ\n  const checkHTTPS = () => {\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {\n      return false;\n    }\n    return true;\n  };\n\n  // Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÈñ¢Êï∞\n  const monitorAudioLevel = (analyserNode) => {\n    const bufferLength = analyserNode.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n    \n    console.log('Èü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÈñãÂßã - bufferLength:', bufferLength);\n    \n    const updateLevel = () => {\n      if (!isRecording) {\n        console.log('Èå≤Èü≥ÂÅúÊ≠¢„ÅÆ„Åü„ÇÅÈü≥Â£∞„É¨„Éô„É´Áõ£Ë¶ñÁµÇ‰∫Ü');\n        return;\n      }\n      \n      // ÊôÇÈñìÈ†òÂüü„Éá„Éº„Çø„ÇíÂèñÂæóÔºàÂë®Ê≥¢Êï∞È†òÂüü„Åß„ÅØ„Å™„ÅèÔºâ\n      analyserNode.getByteTimeDomainData(dataArray);\n      \n      // „Éá„Éê„ÉÉ„Ç∞Áî®ÔºöÊúÄÂàù„ÅÆ10„Çµ„É≥„Éó„É´„Çí„É≠„Ç∞Âá∫ÂäõÔºàÊúÄÂàù„ÅÆÊï∞Áßí„ÅÆ„ÅøÔºâ\n      if (Math.random() < 0.01) { // 1%„ÅÆÁ¢∫Áéá„Åß„É≠„Ç∞Âá∫Âäõ\n        console.log('Èü≥Â£∞„Éá„Éº„Çø„Çµ„É≥„Éó„É´:', Array.from(dataArray.slice(0, 10)));\n      }\n      \n      // RMSÔºà‰∫å‰πóÂπ≥ÂùáÂπ≥ÊñπÊ†πÔºâ„ÇíË®àÁÆó\n      let sum = 0;\n      for (let i = 0; i < bufferLength; i++) {\n        const sample = (dataArray[i] - 128) / 128; // -1 to 1„ÅÆÁØÑÂõ≤„Å´Ê≠£Ë¶èÂåñ\n        sum += sample * sample;\n      }\n      const rms = Math.sqrt(sum / bufferLength);\n      \n      // „Éá„Ç∑„Éô„É´„Å´Â§âÊèõ„Åó„Å¶0-100„ÅÆÁØÑÂõ≤„Å´„Éû„ÉÉ„Éî„É≥„Ç∞\n      const db = 20 * Math.log10(rms + 0.0001); // 0.0001„ÅØ-‚àû„ÇíÈò≤„Åê„Åü„ÇÅ\n      const level = Math.max(0, Math.min(100, ((db + 60) / 60) * 100)); // -60dB„Çí0%„ÄÅ0dB„Çí100%„Å´\n      \n      // „Éá„Éê„ÉÉ„Ç∞Áî®Ôºö„É¨„Éô„É´„Çí„É≠„Ç∞Âá∫ÂäõÔºàÊôÇ„ÄÖÔºâ\n      if (Math.random() < 0.01) { // 1%„ÅÆÁ¢∫Áéá„Åß„É≠„Ç∞Âá∫Âäõ\n        console.log('Èü≥Â£∞„É¨„Éô„É´ - RMS:', rms, 'dB:', db, 'Level:', level);\n      }\n      \n      setAudioLevel(level);\n      \n      if (isRecording) {\n        animationFrameRef.current = requestAnimationFrame(updateLevel);\n      }\n    };\n    \n    updateLevel();\n  };\n\n  return (\n    <div className=\"sound-collection\">\n      <h2>üé§ Èü≥„ÅÇ„Å§„ÇÅ„Éö„Éº„Ç∏</h2>\n      <p>Ë∫´„ÅÆÂõû„Çä„Å´„ÅÇ„ÇãÈü≥„ÇíÈå≤Èü≥„Åó„Åü„Çä„ÄÅÈü≥„Éï„Ç°„Ç§„É´„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åó„Å¶Èü≥Á¥†Êùê„ÇíÈõÜ„ÇÅ„Åæ„Åó„Çá„ÅÜÔºÅ</p>\n      \n      <div className=\"collection-actions\">\n        <div className=\"recording-section card\">\n          <h3>üéôÔ∏è Èü≥„ÇíÈå≤Èü≥„Åô„Çã</h3>\n          \n          {/* iOSÁî®„ÅÆË™¨Êòé */}\n          <div className=\"ios-notice\">\n            <p>üì± <strong>iPhone/iPad„Çí„Åä‰Ωø„ÅÑ„ÅÆÊñπ„Å∏Ôºö</strong></p>\n            <p>Èå≤Èü≥„Éú„Çø„É≥„ÇíÊäº„Åô„Å®„Éû„Ç§„ÇØ„ÅÆ‰ΩøÁî®Ë®±ÂèØ„ÇíÊ±Ç„ÇÅ„Çã„ÉÄ„Ç§„Ç¢„É≠„Ç∞„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ„ÄåË®±ÂèØ„Äç„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>\n            <p>„ÉÄ„Ç§„Ç¢„É≠„Ç∞„ÅåË°®Á§∫„Åï„Çå„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅSafariË®≠ÂÆö ‚Üí „Éó„É©„Ç§„Éê„Ç∑„Éº„Å®„Çª„Ç≠„É•„É™„ÉÜ„Ç£ ‚Üí „Éû„Ç§„ÇØ „Åß„Åì„ÅÆ„Çµ„Ç§„Éà„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>\n          </div>\n          \n          <div className=\"recording-controls\">\n            {!isRecording ? (\n              <button \n                className=\"button-primary large-button record-btn\"\n                onClick={startRecording}\n              >\n                üî¥ Èå≤Èü≥ÈñãÂßã\n              </button>\n            ) : (\n              <button \n                className=\"button-secondary large-button stop-btn\"\n                onClick={stopRecording}\n              >\n                ‚èπÔ∏è Èå≤Èü≥ÂÅúÊ≠¢\n              </button>\n            )}\n          </div>\n          {isRecording && (\n            <div className=\"recording-status\">\n              <div className=\"recording-indicator\">\n                <div className=\"pulse-dot\"></div>\n                Èå≤Èü≥‰∏≠...\n              </div>\n              <div className=\"audio-level-meter\">\n                <div className=\"audio-level-label\">Èü≥Â£∞ÂÖ•Âäõ„É¨„Éô„É´:</div>\n                <div className=\"audio-level-bar\">\n                  <div \n                    className=\"audio-level-fill\" \n                    style={{ width: `${audioLevel}%` }}\n                  ></div>\n                </div>\n                <div className=\"audio-level-value\">{Math.round(audioLevel)}%</div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"upload-section card\">\n          <h3>üìÅ Èü≥„Éï„Ç°„Ç§„É´„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</h3>\n          <button \n            className=\"button-secondary large-button\"\n            onClick={() => fileInputRef.current?.click()}\n          >\n            üìÇ „Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû\n          </button>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"audio/*\"\n            onChange={handleFileUpload}\n            style={{ display: 'none' }}\n          />\n        </div>\n      </div>\n\n      {currentRecording && (\n        <RecordingEditor \n          recording={currentRecording}\n          onSave={saveRecording}\n          onCancel={() => setCurrentRecording(null)}\n        />\n      )}\n\n      <div className=\"recent-recordings\">\n        <h3>üìù ÊúÄËøëÈå≤Èü≥„Åó„ÅüÈü≥</h3>\n        {recordings.length === 0 ? (\n          <p className=\"no-recordings\">„Åæ„Å†Èå≤Èü≥„Åó„ÅüÈü≥„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ‰∏ä„ÅÆÈå≤Èü≥„Éú„Çø„É≥„Åã„ÇâÂßã„ÇÅ„Åæ„Åó„Çá„ÅÜÔºÅ</p>\n        ) : (\n          <div className=\"recordings-grid\">\n            {recordings.map(recording => (\n              <SoundCard key={recording.id} recording={recording} />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst RecordingEditor = ({ recording, onSave, onCancel }) => {\n  const [name, setName] = useState(recording.name);\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState(recording.tags);\n\n  const addTag = () => {\n    if (tagInput.trim() && !tags.includes(tagInput.trim())) {\n      setTags([...tags, tagInput.trim()]);\n      setTagInput('');\n    }\n  };\n\n  const removeTag = (tagToRemove) => {\n    setTags(tags.filter(tag => tag !== tagToRemove));\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      addTag();\n    }\n  };\n\n  return (\n    <div className=\"recording-editor card\">\n      <h3>‚úèÔ∏è Èü≥„Å´ÂêçÂâç„Çí„Å§„Åë„Çà„ÅÜ</h3>\n      \n      <audio controls src={recording.url} className=\"audio-preview\" />\n      \n      <div className=\"form-group\">\n        <label htmlFor=\"soundName\">Èü≥„ÅÆÂêçÂâç:</label>\n        <input\n          id=\"soundName\"\n          type=\"text\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          placeholder=\"‰æã: „Éî„Ç¢„Éé„ÅÆÈü≥„ÄÅÈõ®„ÅÆÈü≥\"\n          className=\"sound-name-input\"\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"soundTags\">„Çø„Ç∞:</label>\n        <div className=\"tag-input-container\">\n          <input\n            id=\"soundTags\"\n            type=\"text\"\n            value={tagInput}\n            onChange={(e) => setTagInput(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"‰æã: Ê•ΩÂô®„ÄÅËá™ÁÑ∂\"\n            className=\"tag-input\"\n          />\n          <button onClick={addTag} className=\"add-tag-btn\">ËøΩÂä†</button>\n        </div>\n        \n        {tags.length > 0 && (\n          <div className=\"tags-display\">\n            {tags.map(tag => (\n              <span key={tag} className=\"tag\">\n                {tag}\n                <button onClick={() => removeTag(tag)} className=\"remove-tag\">√ó</button>\n              </span>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"editor-actions\">\n        <button \n          onClick={() => onSave(name, tags)}\n          className=\"button-primary\"\n          disabled={!name.trim()}\n        >\n          üíæ ‰øùÂ≠ò\n        </button>\n        <button onClick={onCancel} className=\"button-secondary\">\n          ‚ùå „Ç≠„É£„É≥„Çª„É´\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst SoundCard = ({ recording }) => {\n  return (\n    <div className=\"sound-card\">\n      <div className=\"sound-info\">\n        <h4>{recording.name}</h4>\n        <p className=\"sound-date\">\n          {new Date(recording.createdAt).toLocaleDateString('ja-JP')}\n        </p>\n        {recording.tags.length > 0 && (\n          <div className=\"sound-tags\">\n            {recording.tags.map(tag => (\n              <span key={tag} className=\"tag small\">{tag}</span>\n            ))}\n          </div>\n        )}\n      </div>\n      <audio controls src={recording.url} />\n    </div>\n  );\n};\n\nexport default SoundCollection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}