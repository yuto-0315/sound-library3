{"ast":null,"code":"var _jsxFileName = \"/Users/nakataniyuutomo/Desktop/Programing/\\u30BB\\u3099\\u30DF\\u958B\\u767A/sound-library2/src/pages/DAWPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './DAWPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DAWPage = () => {\n  _s();\n  const [tracks, setTracks] = useState([{\n    id: 1,\n    name: '„Éà„É©„ÉÉ„ÇØ 1',\n    clips: []\n  }]);\n  const [bpm, setBpm] = useState(120);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [audioContext, setAudioContext] = useState(null);\n  const [trackHeight] = useState(80);\n  const [playingAudios, setPlayingAudios] = useState(new Map());\n  const [startPlayTime, setStartPlayTime] = useState(null);\n  const [error, setError] = useState(null);\n  const [sounds, setSounds] = useState([]);\n  const [showSoundPanel, setShowSoundPanel] = useState(true);\n  const [draggedClip, setDraggedClip] = useState(null);\n  const [dragPreview, setDragPreview] = useState(null);\n  const timelineRef = useRef(null);\n  const playheadRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  useEffect(() => {\n    // Web Audio API „ÅÆÂàùÊúüÂåñ\n    const ctx = new (window.AudioContext || window.webkitAudioContext)();\n    setAudioContext(ctx);\n\n    // LocalStorage„Åã„ÇâÈü≥Á¥†Êùê„ÇíË™≠„ÅøËæº„Åø\n    loadSounds();\n    return () => {\n      if (ctx) {\n        ctx.close();\n      }\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, []);\n\n  // Èü≥Á¥†Êùê„ÇíLocalStorage„Åã„ÇâË™≠„ÅøËæº„Åø\n  const loadSounds = () => {\n    const savedSounds = JSON.parse(localStorage.getItem('soundRecordings') || '[]');\n\n    // audioData„Åã„ÇâBlob„ÇíÂæ©ÂÖÉ\n    const soundsWithBlob = savedSounds.map(sound => {\n      if (sound.audioData) {\n        try {\n          const blob = base64ToBlob(sound.audioData, 'audio/wav');\n          return {\n            ...sound,\n            audioBlob: blob\n          };\n        } catch (error) {\n          console.error('Èü≥Â£∞„Éá„Éº„Çø„ÅÆÂæ©ÂÖÉ„Å´Â§±Êïó:', error);\n          return sound;\n        }\n      }\n      return sound;\n    });\n    setSounds(soundsWithBlob);\n  };\n\n  // Base64 „Çí Blob „Å´Â§âÊèõ„Åô„ÇãÈñ¢Êï∞\n  const base64ToBlob = (base64, mimeType) => {\n    const byteCharacters = atob(base64.split(',')[1]);\n    const byteNumbers = new Array(byteCharacters.length);\n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n    const byteArray = new Uint8Array(byteNumbers);\n    return new Blob([byteArray], {\n      type: mimeType\n    });\n  };\n\n  // Èü≥Â£∞„Éï„Ç°„Ç§„É´„ÅÆÁ∂ôÁ∂öÊôÇÈñì„ÇíÂèñÂæó\n  const getAudioDuration = audioBlob => {\n    return new Promise(resolve => {\n      const audio = new Audio();\n      audio.addEventListener('loadedmetadata', () => {\n        resolve(audio.duration * 100); // Áßí„Åã„Çâ„Éî„ÇØ„Çª„É´„Å´Â§âÊèõÔºà1Áßí=100pxÔºâ\n      });\n      audio.addEventListener('error', () => {\n        resolve(200); // „Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØ„Éá„Éï„Ç©„É´„ÉàÂÄ§\n      });\n      audio.src = URL.createObjectURL(audioBlob);\n    });\n  };\n\n  // „Éó„É¨„Ç§„Éò„ÉÉ„Éâ„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Êõ¥Êñ∞\n  const updatePlayhead = () => {\n    if (isPlaying && startPlayTime) {\n      const elapsed = (Date.now() - startPlayTime) / 1000; // ÁµåÈÅéÊôÇÈñìÔºàÁßíÔºâ\n      const pixelsPerSecond = bpm / 60 * 100; // BPM„Å´Âü∫„Å•„ÅÑ„Åü„Éî„ÇØ„Çª„É´/Áßí\n      setCurrentTime(elapsed * pixelsPerSecond);\n      animationFrameRef.current = requestAnimationFrame(updatePlayhead);\n    }\n  };\n  useEffect(() => {\n    if (isPlaying) {\n      setStartPlayTime(Date.now() - currentTime / (bpm / 60 * 100) * 1000);\n      updatePlayhead();\n    } else {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    }\n  }, [isPlaying, bpm]);\n  const addTrack = () => {\n    const newTrack = {\n      id: tracks.length + 1,\n      name: `„Éà„É©„ÉÉ„ÇØ ${tracks.length + 1}`,\n      clips: []\n    };\n    setTracks([...tracks, newTrack]);\n  };\n  const removeTrack = trackId => {\n    if (tracks.length > 1) {\n      setTracks(tracks.filter(track => track.id !== trackId));\n    }\n  };\n  const handleDrop = async (e, trackId, timePosition) => {\n    e.preventDefault();\n    setDragPreview(null);\n    console.log('„Éâ„É≠„ÉÉ„ÉóÂá¶ÁêÜÈñãÂßã:', {\n      trackId,\n      timePosition,\n      draggedClip\n    });\n    try {\n      // Êãç„Å´Âêà„Çè„Åõ„Å¶‰ΩçÁΩÆ„ÇíË™øÊï¥\n      const beatWidth = 100; // 1Êãç„ÅÆÂπÖÔºàpxÔºâ\n      const snappedPosition = Math.round(timePosition / beatWidth) * beatWidth;\n\n      // Êó¢Â≠ò„ÅÆ„ÇØ„É™„ÉÉ„Éó„ÅÆÁßªÂãï„Åã„Å©„ÅÜ„Åã„ÉÅ„Çß„ÉÉ„ÇØ\n      if (draggedClip) {\n        console.log('Êó¢Â≠ò„ÇØ„É™„ÉÉ„Éó„ÅÆÁßªÂãï:', draggedClip.id, 'ÂÖÉ„Éà„É©„ÉÉ„ÇØ:', draggedClip.originalTrackId, 'Êñ∞„Éà„É©„ÉÉ„ÇØ:', trackId);\n\n        // Êó¢Â≠ò„ÇØ„É™„ÉÉ„Éó„ÅÆÁßªÂãï\n        const updatedClip = {\n          ...draggedClip,\n          startTime: snappedPosition,\n          trackId: trackId\n        };\n        setTracks(tracks.map(track => {\n          if (track.id === draggedClip.originalTrackId && track.id === trackId) {\n            // Âêå„Åò„Éà„É©„ÉÉ„ÇØÂÜÖ„Åß„ÅÆÁßªÂãï\n            console.log('Âêå„Åò„Éà„É©„ÉÉ„ÇØÂÜÖ„Åß„ÅÆÁßªÂãï');\n            return {\n              ...track,\n              clips: track.clips.map(clip => clip.id === draggedClip.id ? updatedClip : clip)\n            };\n          } else if (track.id === draggedClip.originalTrackId) {\n            // ÂÖÉ„ÅÆ„Éà„É©„ÉÉ„ÇØ„Åã„Çâ„ÇØ„É™„ÉÉ„Éó„ÇíÂâäÈô§\n            console.log('ÂÖÉ„ÅÆ„Éà„É©„ÉÉ„ÇØ„Åã„Çâ„ÇØ„É™„ÉÉ„Éó„ÇíÂâäÈô§');\n            return {\n              ...track,\n              clips: track.clips.filter(clip => clip.id !== draggedClip.id)\n            };\n          } else if (track.id === trackId) {\n            // Êñ∞„Åó„ÅÑ„Éà„É©„ÉÉ„ÇØ„Å´„ÇØ„É™„ÉÉ„Éó„ÇíËøΩÂä†\n            console.log('Êñ∞„Åó„ÅÑ„Éà„É©„ÉÉ„ÇØ„Å´„ÇØ„É™„ÉÉ„Éó„ÇíËøΩÂä†');\n            return {\n              ...track,\n              clips: [...track.clips, updatedClip]\n            };\n          }\n          return track;\n        }));\n        setDraggedClip(null);\n        return;\n      }\n\n      // Êñ∞„Åó„ÅÑÈü≥Á¥†Êùê„ÅÆÈÖçÁΩÆ\n      const soundData = JSON.parse(e.dataTransfer.getData('application/json'));\n\n      // Èü≥Â£∞„ÅÆÂÆüÈöõ„ÅÆÁ∂ôÁ∂öÊôÇÈñì„ÇíÂèñÂæó\n      let duration = 200; // „Éá„Éï„Ç©„É´„ÉàÂÄ§\n      if (soundData.audioBlob) {\n        try {\n          duration = await getAudioDuration(soundData.audioBlob);\n        } catch (error) {\n          console.warn('Èü≥Â£∞Á∂ôÁ∂öÊôÇÈñì„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:', error);\n        }\n      }\n      const newClip = {\n        id: Date.now(),\n        soundData: soundData,\n        startTime: snappedPosition,\n        duration: duration,\n        trackId: trackId\n      };\n      setTracks(tracks.map(track => track.id === trackId ? {\n        ...track,\n        clips: [...track.clips, newClip]\n      } : track));\n    } catch (error) {\n      console.error('„Éâ„É≠„ÉÉ„Éó„Ç®„É©„Éº:', error);\n      setError('Èü≥Á¥†Êùê„ÅÆÈÖçÁΩÆ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');\n    }\n  };\n  const handleDragOver = e => {\n    var _timelineRef$current;\n    e.preventDefault();\n\n    // „Éâ„É©„ÉÉ„Ç∞„Åï„Çå„Å¶„ÅÑ„Çã„ÅÆ„ÅåÊó¢Â≠ò„ÇØ„É™„ÉÉ„Éó„ÅãÊñ∞„Åó„ÅÑÈü≥Á¥†Êùê„Åã„ÅßÂá¶ÁêÜ„ÇíÂàÜ„Åë„Çã\n    if (draggedClip) {\n      e.dataTransfer.dropEffect = 'move';\n    } else {\n      e.dataTransfer.dropEffect = 'copy';\n    }\n\n    // „Éâ„É©„ÉÉ„Ç∞„Éó„É¨„Éì„É•„Éº„ÅÆÊõ¥Êñ∞\n    const rect = e.currentTarget.getBoundingClientRect();\n    const timePosition = e.clientX - rect.left;\n    const beatWidth = 100;\n    const snappedPosition = Math.round(timePosition / beatWidth) * beatWidth;\n    const trackElement = e.currentTarget;\n    const trackRect = trackElement.getBoundingClientRect();\n    const tracksAreaRect = (_timelineRef$current = timelineRef.current) === null || _timelineRef$current === void 0 ? void 0 : _timelineRef$current.getBoundingClientRect();\n    if (tracksAreaRect) {\n      const relativeTop = trackRect.top - tracksAreaRect.top;\n      const trackId = parseInt(trackElement.dataset.trackId);\n      setDragPreview({\n        left: snappedPosition,\n        top: relativeTop + 10,\n        width: draggedClip ? draggedClip.duration : 200,\n        trackId: trackId\n      });\n    }\n  };\n  const removeClip = (trackId, clipId) => {\n    setTracks(tracks.map(track => track.id === trackId ? {\n      ...track,\n      clips: track.clips.filter(clip => clip.id !== clipId)\n    } : track));\n  };\n\n  // „ÇØ„É™„ÉÉ„Éó„ÅÆ„Éâ„É©„ÉÉ„Ç∞ÈñãÂßã\n  const handleClipDragStart = (clip, originalTrackId) => {\n    console.log('„ÇØ„É™„ÉÉ„Éó„Éâ„É©„ÉÉ„Ç∞ÈñãÂßã:', clip.id, '„Éà„É©„ÉÉ„ÇØ:', originalTrackId);\n    setDraggedClip({\n      ...clip,\n      originalTrackId\n    });\n  };\n\n  // „Éâ„É©„ÉÉ„Ç∞ÁµÇ‰∫ÜÊôÇ„ÅÆ„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó\n  const handleDragEnd = e => {\n    // „Éâ„É≠„ÉÉ„Éó„ÅåÊ≠£Â∏∏„Å´Âá¶ÁêÜ„Åï„Çå„Å™„Åã„Å£„ÅüÂ†¥Âêà„ÄÅÂÖÉ„ÅÆÁä∂ÊÖã„Çí‰øùÊåÅ\n    if (draggedClip && e.dataTransfer.dropEffect === 'none') {\n      console.log('„Éâ„É©„ÉÉ„Ç∞„Åå„Ç≠„É£„É≥„Çª„É´„Åï„Çå„Åæ„Åó„Åü„ÄÇÂÖÉ„ÅÆ‰ΩçÁΩÆ„Çí‰øùÊåÅ„Åó„Åæ„Åô„ÄÇ');\n    }\n    setDraggedClip(null);\n    setDragPreview(null);\n  };\n  const play = async () => {\n    try {\n      // AudioContext„Åå‰∏≠Êñ≠„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØÂÜçÈñã\n      if (audioContext && audioContext.state === 'suspended') {\n        await audioContext.resume();\n      }\n      setIsPlaying(true);\n\n      // ÁèæÂú®„ÅÆÊôÇÈñì‰ΩçÁΩÆ„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅÂÜçÁîü„Åô„Åπ„Åç„ÇØ„É™„ÉÉ„Éó„ÇíË¶ã„Å§„Åë„Çã\n      const pixelsPerSecond = bpm / 60 * 100;\n      const currentTimeInSeconds = currentTime / pixelsPerSecond;\n\n      // ÂêÑ„Éà„É©„ÉÉ„ÇØ„ÅÆ„ÇØ„É™„ÉÉ„Éó„ÇíÂÜçÁîü\n      const newPlayingAudios = new Map();\n      tracks.forEach(track => {\n        track.clips.forEach(clip => {\n          const clipStartTimeInSeconds = clip.startTime / pixelsPerSecond;\n          const clipEndTimeInSeconds = clipStartTimeInSeconds + clip.duration / pixelsPerSecond;\n\n          // ÁèæÂú®„ÅÆÊôÇÈñì‰ΩçÁΩÆ„Åå„ÇØ„É™„ÉÉ„Éó„ÅÆÁØÑÂõ≤ÂÜÖ„Åæ„Åü„ÅØ‰ªäÂæåÂÜçÁîü„Åï„Çå„ÇãÂ†¥Âêà\n          if (clipEndTimeInSeconds > currentTimeInSeconds) {\n            const delay = Math.max(0, clipStartTimeInSeconds - currentTimeInSeconds);\n            scheduleClipPlayback(clip, delay * 1000, newPlayingAudios);\n          }\n        });\n      });\n      setPlayingAudios(newPlayingAudios);\n    } catch (error) {\n      console.error('ÂÜçÁîü„Ç®„É©„Éº:', error);\n      setError('Èü≥Â£∞„ÅÆÂÜçÁîü„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅßÈü≥Â£∞„ÅåÊúâÂäπ„Å´„Å™„Å£„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');\n    }\n  };\n  const scheduleClipPlayback = (clip, delayMs, playingAudiosMap) => {\n    var _clip$soundData;\n    console.log('scheduleClipPlayback:', {\n      clip,\n      hasAudioBlob: !!((_clip$soundData = clip.soundData) !== null && _clip$soundData !== void 0 && _clip$soundData.audioBlob)\n    });\n    if (clip.soundData && clip.soundData.audioBlob && clip.soundData.audioBlob instanceof Blob) {\n      try {\n        const audio = new Audio();\n        const audioUrl = URL.createObjectURL(clip.soundData.audioBlob);\n        audio.src = audioUrl;\n        const timeoutId = setTimeout(() => {\n          audio.play().catch(error => {\n            console.error('Èü≥Â£∞ÂÜçÁîü„Ç®„É©„Éº:', error);\n            URL.revokeObjectURL(audioUrl); // „É°„É¢„É™„É™„Éº„ÇØ„ÇíÈò≤„Åê\n          });\n        }, delayMs);\n\n        // Èü≥Â£∞ÁµÇ‰∫ÜÊôÇ„Å´URL„ÇíËß£Êîæ\n        audio.addEventListener('ended', () => {\n          URL.revokeObjectURL(audioUrl);\n        });\n        playingAudiosMap.set(clip.id, {\n          audio,\n          timeoutId,\n          audioUrl\n        });\n      } catch (error) {\n        console.error('createObjectURL „Ç®„É©„Éº:', error, 'audioBlob:', clip.soundData.audioBlob);\n      }\n    } else {\n      console.warn('audioBlob„ÅåÁÑ°Âäπ„Åß„Åô:', clip.soundData);\n    }\n  };\n  const pause = () => {\n    setIsPlaying(false);\n\n    // ÂÜçÁîü‰∏≠„ÅÆÈü≥Â£∞„Çí‰∏ÄÊôÇÂÅúÊ≠¢\n    playingAudios.forEach(({\n      audio,\n      timeoutId,\n      audioUrl\n    }) => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      if (!audio.paused) {\n        audio.pause();\n      }\n      // URL„ÇíËß£Êîæ\n      if (audioUrl) {\n        URL.revokeObjectURL(audioUrl);\n      }\n    });\n  };\n  const stop = () => {\n    setIsPlaying(false);\n    setCurrentTime(0);\n\n    // ÂÜçÁîü‰∏≠„ÅÆÈü≥Â£∞„ÇíÂÅúÊ≠¢\n    playingAudios.forEach(({\n      audio,\n      timeoutId,\n      audioUrl\n    }) => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      audio.pause();\n      audio.currentTime = 0;\n      // URL„ÇíËß£Êîæ\n      if (audioUrl) {\n        URL.revokeObjectURL(audioUrl);\n      }\n    });\n    setPlayingAudios(new Map());\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"daw-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83C\\uDFB9 \\u97F3\\u697D\\u3065\\u304F\\u308A\\u30DA\\u30FC\\u30B8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u97F3\\u7D20\\u6750\\u3092\\u30C9\\u30E9\\u30C3\\u30B0&\\u30C9\\u30ED\\u30C3\\u30D7\\u3057\\u3066\\u97F3\\u697D\\u3092\\u4F5C\\u308A\\u307E\\u3057\\u3087\\u3046\\uFF01\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u26A0\\uFE0F \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(null),\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"daw-controls card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"transport-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `transport-btn play-btn ${isPlaying ? 'playing' : ''}`,\n          onClick: isPlaying ? pause : play,\n          children: isPlaying ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"transport-btn stop-btn\",\n          onClick: stop,\n          children: \"\\u23F9\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bpm-control\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"bpm\",\n          children: \"\\uD83C\\uDFB5 BPM:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"bpm\",\n          type: \"number\",\n          value: bpm,\n          onChange: e => setBpm(parseInt(e.target.value)),\n          min: \"60\",\n          max: \"200\",\n          className: \"bpm-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-primary\",\n          onClick: addTrack,\n          children: \"\\u2795 \\u30C8\\u30E9\\u30C3\\u30AF\\u8FFD\\u52A0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-secondary\",\n          onClick: () => setShowSoundPanel(!showSoundPanel),\n          children: showSoundPanel ? 'üéµ Èü≥Á¥†Êùê„ÇíÈö†„Åô' : 'üéµ Èü≥Á¥†Êùê„ÇíË°®Á§∫'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"daw-main-area\",\n      children: [showSoundPanel && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sound-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83C\\uDFB5 \\u97F3\\u7D20\\u6750\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sound-list\",\n          children: sounds.length > 0 ? sounds.map(sound => /*#__PURE__*/_jsxDEV(SoundItem, {\n            sound: sound\n          }, sound.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 19\n          }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-sounds\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u97F3\\u7D20\\u6750\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u300C\\u97F3\\u3092\\u96C6\\u3081\\u308B\\u300D\\u30DA\\u30FC\\u30B8\\u3067\\u97F3\\u3092\\u9332\\u97F3\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"daw-workspace\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-headers\",\n          children: tracks.map(track => /*#__PURE__*/_jsxDEV(TrackHeader, {\n            track: track,\n            onRemove: removeTrack,\n            trackHeight: trackHeight\n          }, track.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-container\",\n          children: [/*#__PURE__*/_jsxDEV(Timeline, {\n            bpm: bpm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tracks-area\",\n            ref: timelineRef,\n            children: [/*#__PURE__*/_jsxDEV(Playhead, {\n              currentTime: currentTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 15\n            }, this), dragPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"drag-preview\",\n              style: {\n                left: dragPreview.left,\n                top: dragPreview.top,\n                width: dragPreview.width\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 17\n            }, this), tracks.map(track => /*#__PURE__*/_jsxDEV(Track, {\n              track: track,\n              onDrop: handleDrop,\n              onDragOver: handleDragOver,\n              onRemoveClip: removeClip,\n              onClipDragStart: handleClipDragStart,\n              onDragEnd: handleDragEnd,\n              trackHeight: trackHeight,\n              bpm: bpm\n            }, track.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instructions card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDCD6 \\u4F7F\\u3044\\u65B9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u5DE6\\u5074\\u306E\\u97F3\\u7D20\\u6750\\u30D1\\u30CD\\u30EB\\u304B\\u3089\\u97F3\\u7D20\\u6750\\u3092\\u30C8\\u30E9\\u30C3\\u30AF\\u306B\\u30C9\\u30E9\\u30C3\\u30B0&\\u30C9\\u30ED\\u30C3\\u30D7\\u3057\\u3066\\u914D\\u7F6E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u914D\\u7F6E\\u6E08\\u307F\\u306E\\u97F3\\u7D20\\u6750\\u3082\\u30C9\\u30E9\\u30C3\\u30B0\\u3057\\u3066\\u5225\\u306E\\u5834\\u6240\\u306B\\u79FB\\u52D5\\u3067\\u304D\\u307E\\u3059\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u30C9\\u30E9\\u30C3\\u30B0\\u4E2D\\u306F\\u914D\\u7F6E\\u4E88\\u5B9A\\u4F4D\\u7F6E\\u306B\\u9752\\u3044\\u5F71\\u304C\\u8868\\u793A\\u3055\\u308C\\u307E\\u3059\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u97F3\\u7D20\\u6750\\u306F\\u62CD\\u306B\\u5408\\u308F\\u305B\\u3066\\u81EA\\u52D5\\u7684\\u306B\\u914D\\u7F6E\\u3055\\u308C\\u307E\\u3059\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u97F3\\u7D20\\u6750\\u30D1\\u30CD\\u30EB\\u306E\\u25B6\\uFE0F\\u30DC\\u30BF\\u30F3\\u3067\\u500B\\u5225\\u306B\\u97F3\\u3092\\u78BA\\u8A8D\\u3067\\u304D\\u307E\\u3059\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u25B6\\uFE0F\\u30DC\\u30BF\\u30F3\\u3067\\u518D\\u751F\\u3001\\u23F8\\uFE0F\\u30DC\\u30BF\\u30F3\\u3067\\u4E00\\u6642\\u505C\\u6B62\\u3001\\u23F9\\uFE0F\\u30DC\\u30BF\\u30F3\\u3067\\u505C\\u6B62\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"BPM\\u3092\\u5909\\u66F4\\u3057\\u3066\\u97F3\\u697D\\u306E\\u901F\\u3055\\u3092\\u8ABF\\u6574\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u30C8\\u30E9\\u30C3\\u30AF\\u3092\\u8FFD\\u52A0\\u3057\\u3066\\u8907\\u6570\\u306E\\u97F3\\u3092\\u91CD\\u306D\\u308B\\u3053\\u3068\\u304C\\u3067\\u304D\\u307E\\u3059\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 369,\n    columnNumber: 5\n  }, this);\n};\n_s(DAWPage, \"DTYRhfG2xdy4kj4/6rc+b8KALS0=\");\n_c = DAWPage;\nconst SoundItem = ({\n  sound\n}) => {\n  _s2();\n  const [isPlaying, setIsPlaying] = useState(false);\n  const handleDragStart = e => {\n    e.dataTransfer.setData('application/json', JSON.stringify(sound));\n    e.dataTransfer.effectAllowed = 'copy';\n  };\n  const playSound = () => {\n    if (sound.audioBlob && !isPlaying) {\n      const audio = new Audio();\n      audio.src = URL.createObjectURL(sound.audioBlob);\n      audio.play().then(() => {\n        setIsPlaying(true);\n        audio.addEventListener('ended', () => {\n          setIsPlaying(false);\n        });\n      }).catch(error => {\n        console.error('Èü≥Â£∞ÂÜçÁîü„Ç®„É©„Éº:', error);\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sound-item\",\n    draggable: \"true\",\n    onDragStart: handleDragStart,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sound-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: sound.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sound-tags\",\n        children: sound.tags.map((tag, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"sound-tag\",\n          children: tag\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 530,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sound-actions\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"play-sound-btn\",\n        onClick: playSound,\n        disabled: isPlaying,\n        children: isPlaying ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 525,\n    columnNumber: 5\n  }, this);\n};\n_s2(SoundItem, \"dxr5RgzQJlMZkbQdHY9iHZ+FF0w=\");\n_c2 = SoundItem;\nconst TrackHeader = ({\n  track,\n  onRemove,\n  trackHeight\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"track-header\",\n    style: {\n      height: trackHeight\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"track-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: track.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"remove-track-btn\",\n          onClick: () => onRemove(track.id),\n          title: \"\\u30C8\\u30E9\\u30C3\\u30AF\\u3092\\u524A\\u9664\",\n          children: \"\\uD83D\\uDDD1\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 553,\n    columnNumber: 5\n  }, this);\n};\n_c3 = TrackHeader;\nconst Timeline = ({\n  bpm\n}) => {\n  const measures = 16; // 16Â∞èÁØÄË°®Á§∫\n  const beatsPerMeasure = 4; // 4/4ÊãçÂ≠ê\n  const beatWidth = 100; // 1Êãç„ÅÆÂπÖ\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"timeline\",\n    children: Array.from({\n      length: measures\n    }, (_, measureIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"measure\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"measure-number\",\n        children: measureIndex + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"beats\",\n        children: Array.from({\n          length: beatsPerMeasure\n        }, (_, beatIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"beat\",\n          style: {\n            width: beatWidth\n          },\n          children: beatIndex + 1\n        }, beatIndex, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 11\n      }, this)]\n    }, measureIndex, true, {\n      fileName: _jsxFileName,\n      lineNumber: 578,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 576,\n    columnNumber: 5\n  }, this);\n};\n_c4 = Timeline;\nconst Track = ({\n  track,\n  onDrop,\n  onDragOver,\n  onRemoveClip,\n  onClipDragStart,\n  onDragEnd,\n  trackHeight,\n  bpm\n}) => {\n  const handleDrop = e => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    const timePosition = e.clientX - rect.left;\n    onDrop(e, track.id, timePosition);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"track\",\n    style: {\n      height: trackHeight\n    },\n    \"data-track-id\": track.id,\n    onDrop: handleDrop,\n    onDragOver: onDragOver,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"track-grid\",\n      children: Array.from({\n        length: 64\n      }, (_, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"beat-line\",\n        style: {\n          left: index * 100\n        }\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 612,\n      columnNumber: 7\n    }, this), track.clips.map(clip => /*#__PURE__*/_jsxDEV(AudioClip, {\n      clip: clip,\n      trackId: track.id,\n      onRemove: () => onRemoveClip(track.id, clip.id),\n      onDragStart: onClipDragStart,\n      onDragEnd: onDragEnd\n    }, clip.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 605,\n    columnNumber: 5\n  }, this);\n};\n_c5 = Track;\nconst AudioClip = ({\n  clip,\n  trackId,\n  onRemove,\n  onDragStart,\n  onDragEnd\n}) => {\n  _s3();\n  const [waveformData, setWaveformData] = React.useState([]);\n  React.useEffect(() => {\n    // Á∞°Âçò„Å™Ê≥¢ÂΩ¢„Éá„Éº„ÇøÁîüÊàêÔºàÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØÈü≥Â£∞Ëß£Êûê„ÅåÂøÖË¶ÅÔºâ\n    const generateWaveform = () => {\n      const points = 20; // Ê≥¢ÂΩ¢„ÅÆ„Éù„Ç§„É≥„ÉàÊï∞\n      const data = [];\n      for (let i = 0; i < points; i++) {\n        data.push(Math.random() * 0.8 + 0.2); // 0.2-1.0„ÅÆÈñì„ÅÆ„É©„É≥„ÉÄ„É†ÂÄ§\n      }\n      setWaveformData(data);\n    };\n    generateWaveform();\n  }, [clip.soundData]);\n  const handleDragStart = e => {\n    e.stopPropagation(); // „Ç§„Éô„É≥„Éà„Éê„Éñ„É™„É≥„Ç∞„ÇíÈò≤„Åê\n\n    // „Éâ„É©„ÉÉ„Ç∞„Éá„Éº„Çø„Å´Êó¢Â≠ò„ÇØ„É™„ÉÉ„Éó„ÅÆÊÉÖÂ†±„ÇíË®≠ÂÆö\n    e.dataTransfer.setData('text/plain', `existing-clip-${clip.id}`);\n    e.dataTransfer.effectAllowed = 'move';\n\n    // onDragStart„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ„ÇíÂëº„Å≥Âá∫„Åó\n    onDragStart(clip, trackId);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"audio-clip\",\n    draggable: \"true\",\n    onDragStart: handleDragStart,\n    onDragEnd: onDragEnd,\n    style: {\n      left: clip.startTime,\n      width: clip.duration\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"clip-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"clip-name\",\n        children: clip.soundData.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"remove-clip-btn\",\n        onClick: onRemove,\n        title: \"\\u30AF\\u30EA\\u30C3\\u30D7\\u3092\\u524A\\u9664\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 674,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 672,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"clip-waveform\",\n      children: waveformData.length > 0 ? /*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"waveform-svg\",\n        width: \"100%\",\n        height: \"30\",\n        children: waveformData.map((height, index) => /*#__PURE__*/_jsxDEV(\"rect\", {\n          x: `${index / waveformData.length * 100}%`,\n          y: `${(1 - height) * 15}`,\n          width: `${80 / waveformData.length}%`,\n          height: `${height * 30}`,\n          fill: \"rgba(255, 255, 255, 0.8)\"\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 686,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"waveform-placeholder\",\n        children: \"\\uD83D\\uDD0A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 697,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 662,\n    columnNumber: 5\n  }, this);\n};\n_s3(AudioClip, \"VRSTty1v2EawVvG4In91JJSTL8A=\");\n_c6 = AudioClip;\nconst Playhead = ({\n  currentTime\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"playhead\",\n    style: {\n      left: currentTime\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 706,\n    columnNumber: 5\n  }, this);\n};\n_c7 = Playhead;\nexport default DAWPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"DAWPage\");\n$RefreshReg$(_c2, \"SoundItem\");\n$RefreshReg$(_c3, \"TrackHeader\");\n$RefreshReg$(_c4, \"Timeline\");\n$RefreshReg$(_c5, \"Track\");\n$RefreshReg$(_c6, \"AudioClip\");\n$RefreshReg$(_c7, \"Playhead\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","DAWPage","_s","tracks","setTracks","id","name","clips","bpm","setBpm","isPlaying","setIsPlaying","currentTime","setCurrentTime","audioContext","setAudioContext","trackHeight","playingAudios","setPlayingAudios","Map","startPlayTime","setStartPlayTime","error","setError","sounds","setSounds","showSoundPanel","setShowSoundPanel","draggedClip","setDraggedClip","dragPreview","setDragPreview","timelineRef","playheadRef","animationFrameRef","ctx","window","AudioContext","webkitAudioContext","loadSounds","close","current","cancelAnimationFrame","savedSounds","JSON","parse","localStorage","getItem","soundsWithBlob","map","sound","audioData","blob","base64ToBlob","audioBlob","console","base64","mimeType","byteCharacters","atob","split","byteNumbers","Array","length","i","charCodeAt","byteArray","Uint8Array","Blob","type","getAudioDuration","Promise","resolve","audio","Audio","addEventListener","duration","src","URL","createObjectURL","updatePlayhead","elapsed","Date","now","pixelsPerSecond","requestAnimationFrame","addTrack","newTrack","removeTrack","trackId","filter","track","handleDrop","e","timePosition","preventDefault","log","beatWidth","snappedPosition","Math","round","originalTrackId","updatedClip","startTime","clip","soundData","dataTransfer","getData","warn","newClip","handleDragOver","_timelineRef$current","dropEffect","rect","currentTarget","getBoundingClientRect","clientX","left","trackElement","trackRect","tracksAreaRect","relativeTop","top","parseInt","dataset","width","removeClip","clipId","handleClipDragStart","handleDragEnd","play","state","resume","currentTimeInSeconds","newPlayingAudios","forEach","clipStartTimeInSeconds","clipEndTimeInSeconds","delay","max","scheduleClipPlayback","delayMs","playingAudiosMap","_clip$soundData","hasAudioBlob","audioUrl","timeoutId","setTimeout","catch","revokeObjectURL","set","pause","clearTimeout","paused","stop","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","htmlFor","value","onChange","target","min","SoundItem","TrackHeader","onRemove","Timeline","ref","Playhead","style","Track","onDrop","onDragOver","onRemoveClip","onClipDragStart","onDragEnd","_c","_s2","handleDragStart","setData","stringify","effectAllowed","playSound","then","draggable","onDragStart","tags","tag","index","disabled","_c2","height","title","_c3","measures","beatsPerMeasure","from","_","measureIndex","beatIndex","_c4","AudioClip","_c5","_s3","waveformData","setWaveformData","generateWaveform","points","data","push","random","stopPropagation","x","y","fill","_c6","_c7","$RefreshReg$"],"sources":["/Users/nakataniyuutomo/Desktop/Programing/„Çª„Çô„ÉüÈñãÁô∫/sound-library2/src/pages/DAWPage.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './DAWPage.css';\n\nconst DAWPage = () => {\n  const [tracks, setTracks] = useState([{ id: 1, name: '„Éà„É©„ÉÉ„ÇØ 1', clips: [] }]);\n  const [bpm, setBpm] = useState(120);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [audioContext, setAudioContext] = useState(null);\n  const [trackHeight] = useState(80);\n  const [playingAudios, setPlayingAudios] = useState(new Map());\n  const [startPlayTime, setStartPlayTime] = useState(null);\n  const [error, setError] = useState(null);\n  const [sounds, setSounds] = useState([]);\n  const [showSoundPanel, setShowSoundPanel] = useState(true);\n  const [draggedClip, setDraggedClip] = useState(null);\n  const [dragPreview, setDragPreview] = useState(null);\n  const timelineRef = useRef(null);\n  const playheadRef = useRef(null);\n  const animationFrameRef = useRef(null);\n\n  useEffect(() => {\n    // Web Audio API „ÅÆÂàùÊúüÂåñ\n    const ctx = new (window.AudioContext || window.webkitAudioContext)();\n    setAudioContext(ctx);\n    \n    // LocalStorage„Åã„ÇâÈü≥Á¥†Êùê„ÇíË™≠„ÅøËæº„Åø\n    loadSounds();\n    \n    return () => {\n      if (ctx) {\n        ctx.close();\n      }\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, []);\n\n  // Èü≥Á¥†Êùê„ÇíLocalStorage„Åã„ÇâË™≠„ÅøËæº„Åø\n  const loadSounds = () => {\n    const savedSounds = JSON.parse(localStorage.getItem('soundRecordings') || '[]');\n    \n    // audioData„Åã„ÇâBlob„ÇíÂæ©ÂÖÉ\n    const soundsWithBlob = savedSounds.map(sound => {\n      if (sound.audioData) {\n        try {\n          const blob = base64ToBlob(sound.audioData, 'audio/wav');\n          return { ...sound, audioBlob: blob };\n        } catch (error) {\n          console.error('Èü≥Â£∞„Éá„Éº„Çø„ÅÆÂæ©ÂÖÉ„Å´Â§±Êïó:', error);\n          return sound;\n        }\n      }\n      return sound;\n    });\n    \n    setSounds(soundsWithBlob);\n  };\n\n  // Base64 „Çí Blob „Å´Â§âÊèõ„Åô„ÇãÈñ¢Êï∞\n  const base64ToBlob = (base64, mimeType) => {\n    const byteCharacters = atob(base64.split(',')[1]);\n    const byteNumbers = new Array(byteCharacters.length);\n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n    const byteArray = new Uint8Array(byteNumbers);\n    return new Blob([byteArray], { type: mimeType });\n  };\n\n  // Èü≥Â£∞„Éï„Ç°„Ç§„É´„ÅÆÁ∂ôÁ∂öÊôÇÈñì„ÇíÂèñÂæó\n  const getAudioDuration = (audioBlob) => {\n    return new Promise((resolve) => {\n      const audio = new Audio();\n      audio.addEventListener('loadedmetadata', () => {\n        resolve(audio.duration * 100); // Áßí„Åã„Çâ„Éî„ÇØ„Çª„É´„Å´Â§âÊèõÔºà1Áßí=100pxÔºâ\n      });\n      audio.addEventListener('error', () => {\n        resolve(200); // „Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØ„Éá„Éï„Ç©„É´„ÉàÂÄ§\n      });\n      audio.src = URL.createObjectURL(audioBlob);\n    });\n  };\n\n  // „Éó„É¨„Ç§„Éò„ÉÉ„Éâ„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Êõ¥Êñ∞\n  const updatePlayhead = () => {\n    if (isPlaying && startPlayTime) {\n      const elapsed = (Date.now() - startPlayTime) / 1000; // ÁµåÈÅéÊôÇÈñìÔºàÁßíÔºâ\n      const pixelsPerSecond = (bpm / 60) * 100; // BPM„Å´Âü∫„Å•„ÅÑ„Åü„Éî„ÇØ„Çª„É´/Áßí\n      setCurrentTime(elapsed * pixelsPerSecond);\n      animationFrameRef.current = requestAnimationFrame(updatePlayhead);\n    }\n  };\n\n  useEffect(() => {\n    if (isPlaying) {\n      setStartPlayTime(Date.now() - (currentTime / ((bpm / 60) * 100)) * 1000);\n      updatePlayhead();\n    } else {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    }\n  }, [isPlaying, bpm]);\n\n  const addTrack = () => {\n    const newTrack = {\n      id: tracks.length + 1,\n      name: `„Éà„É©„ÉÉ„ÇØ ${tracks.length + 1}`,\n      clips: []\n    };\n    setTracks([...tracks, newTrack]);\n  };\n\n  const removeTrack = (trackId) => {\n    if (tracks.length > 1) {\n      setTracks(tracks.filter(track => track.id !== trackId));\n    }\n  };\n\n  const handleDrop = async (e, trackId, timePosition) => {\n    e.preventDefault();\n    setDragPreview(null);\n    \n    console.log('„Éâ„É≠„ÉÉ„ÉóÂá¶ÁêÜÈñãÂßã:', { trackId, timePosition, draggedClip });\n    \n    try {\n      // Êãç„Å´Âêà„Çè„Åõ„Å¶‰ΩçÁΩÆ„ÇíË™øÊï¥\n      const beatWidth = 100; // 1Êãç„ÅÆÂπÖÔºàpxÔºâ\n      const snappedPosition = Math.round(timePosition / beatWidth) * beatWidth;\n      \n      // Êó¢Â≠ò„ÅÆ„ÇØ„É™„ÉÉ„Éó„ÅÆÁßªÂãï„Åã„Å©„ÅÜ„Åã„ÉÅ„Çß„ÉÉ„ÇØ\n      if (draggedClip) {\n        console.log('Êó¢Â≠ò„ÇØ„É™„ÉÉ„Éó„ÅÆÁßªÂãï:', draggedClip.id, 'ÂÖÉ„Éà„É©„ÉÉ„ÇØ:', draggedClip.originalTrackId, 'Êñ∞„Éà„É©„ÉÉ„ÇØ:', trackId);\n        \n        // Êó¢Â≠ò„ÇØ„É™„ÉÉ„Éó„ÅÆÁßªÂãï\n        const updatedClip = {\n          ...draggedClip,\n          startTime: snappedPosition,\n          trackId: trackId\n        };\n\n        setTracks(tracks.map(track => {\n          if (track.id === draggedClip.originalTrackId && track.id === trackId) {\n            // Âêå„Åò„Éà„É©„ÉÉ„ÇØÂÜÖ„Åß„ÅÆÁßªÂãï\n            console.log('Âêå„Åò„Éà„É©„ÉÉ„ÇØÂÜÖ„Åß„ÅÆÁßªÂãï');\n            return {\n              ...track,\n              clips: track.clips.map(clip => \n                clip.id === draggedClip.id ? updatedClip : clip\n              )\n            };\n          } else if (track.id === draggedClip.originalTrackId) {\n            // ÂÖÉ„ÅÆ„Éà„É©„ÉÉ„ÇØ„Åã„Çâ„ÇØ„É™„ÉÉ„Éó„ÇíÂâäÈô§\n            console.log('ÂÖÉ„ÅÆ„Éà„É©„ÉÉ„ÇØ„Åã„Çâ„ÇØ„É™„ÉÉ„Éó„ÇíÂâäÈô§');\n            return {\n              ...track,\n              clips: track.clips.filter(clip => clip.id !== draggedClip.id)\n            };\n          } else if (track.id === trackId) {\n            // Êñ∞„Åó„ÅÑ„Éà„É©„ÉÉ„ÇØ„Å´„ÇØ„É™„ÉÉ„Éó„ÇíËøΩÂä†\n            console.log('Êñ∞„Åó„ÅÑ„Éà„É©„ÉÉ„ÇØ„Å´„ÇØ„É™„ÉÉ„Éó„ÇíËøΩÂä†');\n            return {\n              ...track,\n              clips: [...track.clips, updatedClip]\n            };\n          }\n          return track;\n        }));\n        setDraggedClip(null);\n        return;\n      }\n      \n      // Êñ∞„Åó„ÅÑÈü≥Á¥†Êùê„ÅÆÈÖçÁΩÆ\n      const soundData = JSON.parse(e.dataTransfer.getData('application/json'));\n      \n      // Èü≥Â£∞„ÅÆÂÆüÈöõ„ÅÆÁ∂ôÁ∂öÊôÇÈñì„ÇíÂèñÂæó\n      let duration = 200; // „Éá„Éï„Ç©„É´„ÉàÂÄ§\n      if (soundData.audioBlob) {\n        try {\n          duration = await getAudioDuration(soundData.audioBlob);\n        } catch (error) {\n          console.warn('Èü≥Â£∞Á∂ôÁ∂öÊôÇÈñì„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:', error);\n        }\n      }\n\n      const newClip = {\n        id: Date.now(),\n        soundData: soundData,\n        startTime: snappedPosition,\n        duration: duration,\n        trackId: trackId\n      };\n\n      setTracks(tracks.map(track => \n        track.id === trackId \n          ? { ...track, clips: [...track.clips, newClip] }\n          : track\n      ));\n    } catch (error) {\n      console.error('„Éâ„É≠„ÉÉ„Éó„Ç®„É©„Éº:', error);\n      setError('Èü≥Á¥†Êùê„ÅÆÈÖçÁΩÆ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');\n    }\n  };\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    \n    // „Éâ„É©„ÉÉ„Ç∞„Åï„Çå„Å¶„ÅÑ„Çã„ÅÆ„ÅåÊó¢Â≠ò„ÇØ„É™„ÉÉ„Éó„ÅãÊñ∞„Åó„ÅÑÈü≥Á¥†Êùê„Åã„ÅßÂá¶ÁêÜ„ÇíÂàÜ„Åë„Çã\n    if (draggedClip) {\n      e.dataTransfer.dropEffect = 'move';\n    } else {\n      e.dataTransfer.dropEffect = 'copy';\n    }\n    \n    // „Éâ„É©„ÉÉ„Ç∞„Éó„É¨„Éì„É•„Éº„ÅÆÊõ¥Êñ∞\n    const rect = e.currentTarget.getBoundingClientRect();\n    const timePosition = e.clientX - rect.left;\n    const beatWidth = 100;\n    const snappedPosition = Math.round(timePosition / beatWidth) * beatWidth;\n    \n    const trackElement = e.currentTarget;\n    const trackRect = trackElement.getBoundingClientRect();\n    const tracksAreaRect = timelineRef.current?.getBoundingClientRect();\n    \n    if (tracksAreaRect) {\n      const relativeTop = trackRect.top - tracksAreaRect.top;\n      const trackId = parseInt(trackElement.dataset.trackId);\n      \n      setDragPreview({\n        left: snappedPosition,\n        top: relativeTop + 10,\n        width: draggedClip ? draggedClip.duration : 200,\n        trackId: trackId\n      });\n    }\n  };\n\n  const removeClip = (trackId, clipId) => {\n    setTracks(tracks.map(track => \n      track.id === trackId \n        ? { ...track, clips: track.clips.filter(clip => clip.id !== clipId) }\n        : track\n    ));\n  };\n\n  // „ÇØ„É™„ÉÉ„Éó„ÅÆ„Éâ„É©„ÉÉ„Ç∞ÈñãÂßã\n  const handleClipDragStart = (clip, originalTrackId) => {\n    console.log('„ÇØ„É™„ÉÉ„Éó„Éâ„É©„ÉÉ„Ç∞ÈñãÂßã:', clip.id, '„Éà„É©„ÉÉ„ÇØ:', originalTrackId);\n    setDraggedClip({ ...clip, originalTrackId });\n  };\n\n  // „Éâ„É©„ÉÉ„Ç∞ÁµÇ‰∫ÜÊôÇ„ÅÆ„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó\n  const handleDragEnd = (e) => {\n    // „Éâ„É≠„ÉÉ„Éó„ÅåÊ≠£Â∏∏„Å´Âá¶ÁêÜ„Åï„Çå„Å™„Åã„Å£„ÅüÂ†¥Âêà„ÄÅÂÖÉ„ÅÆÁä∂ÊÖã„Çí‰øùÊåÅ\n    if (draggedClip && e.dataTransfer.dropEffect === 'none') {\n      console.log('„Éâ„É©„ÉÉ„Ç∞„Åå„Ç≠„É£„É≥„Çª„É´„Åï„Çå„Åæ„Åó„Åü„ÄÇÂÖÉ„ÅÆ‰ΩçÁΩÆ„Çí‰øùÊåÅ„Åó„Åæ„Åô„ÄÇ');\n    }\n    setDraggedClip(null);\n    setDragPreview(null);\n  };\n\n  const play = async () => {\n    try {\n      // AudioContext„Åå‰∏≠Êñ≠„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØÂÜçÈñã\n      if (audioContext && audioContext.state === 'suspended') {\n        await audioContext.resume();\n      }\n      \n      setIsPlaying(true);\n      \n      // ÁèæÂú®„ÅÆÊôÇÈñì‰ΩçÁΩÆ„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅÂÜçÁîü„Åô„Åπ„Åç„ÇØ„É™„ÉÉ„Éó„ÇíË¶ã„Å§„Åë„Çã\n      const pixelsPerSecond = (bpm / 60) * 100;\n      const currentTimeInSeconds = currentTime / pixelsPerSecond;\n      \n      // ÂêÑ„Éà„É©„ÉÉ„ÇØ„ÅÆ„ÇØ„É™„ÉÉ„Éó„ÇíÂÜçÁîü\n      const newPlayingAudios = new Map();\n      \n      tracks.forEach(track => {\n        track.clips.forEach(clip => {\n          const clipStartTimeInSeconds = clip.startTime / pixelsPerSecond;\n          const clipEndTimeInSeconds = clipStartTimeInSeconds + (clip.duration / pixelsPerSecond);\n          \n          // ÁèæÂú®„ÅÆÊôÇÈñì‰ΩçÁΩÆ„Åå„ÇØ„É™„ÉÉ„Éó„ÅÆÁØÑÂõ≤ÂÜÖ„Åæ„Åü„ÅØ‰ªäÂæåÂÜçÁîü„Åï„Çå„ÇãÂ†¥Âêà\n          if (clipEndTimeInSeconds > currentTimeInSeconds) {\n            const delay = Math.max(0, clipStartTimeInSeconds - currentTimeInSeconds);\n            scheduleClipPlayback(clip, delay * 1000, newPlayingAudios);\n          }\n        });\n      });\n      \n      setPlayingAudios(newPlayingAudios);\n    } catch (error) {\n      console.error('ÂÜçÁîü„Ç®„É©„Éº:', error);\n      setError('Èü≥Â£∞„ÅÆÂÜçÁîü„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅßÈü≥Â£∞„ÅåÊúâÂäπ„Å´„Å™„Å£„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');\n    }\n  };\n\n  const scheduleClipPlayback = (clip, delayMs, playingAudiosMap) => {\n    console.log('scheduleClipPlayback:', { clip, hasAudioBlob: !!clip.soundData?.audioBlob });\n    \n    if (clip.soundData && clip.soundData.audioBlob && clip.soundData.audioBlob instanceof Blob) {\n      try {\n        const audio = new Audio();\n        const audioUrl = URL.createObjectURL(clip.soundData.audioBlob);\n        audio.src = audioUrl;\n        \n        const timeoutId = setTimeout(() => {\n          audio.play().catch(error => {\n            console.error('Èü≥Â£∞ÂÜçÁîü„Ç®„É©„Éº:', error);\n            URL.revokeObjectURL(audioUrl); // „É°„É¢„É™„É™„Éº„ÇØ„ÇíÈò≤„Åê\n          });\n        }, delayMs);\n        \n        // Èü≥Â£∞ÁµÇ‰∫ÜÊôÇ„Å´URL„ÇíËß£Êîæ\n        audio.addEventListener('ended', () => {\n          URL.revokeObjectURL(audioUrl);\n        });\n        \n        playingAudiosMap.set(clip.id, { audio, timeoutId, audioUrl });\n      } catch (error) {\n        console.error('createObjectURL „Ç®„É©„Éº:', error, 'audioBlob:', clip.soundData.audioBlob);\n      }\n    } else {\n      console.warn('audioBlob„ÅåÁÑ°Âäπ„Åß„Åô:', clip.soundData);\n    }\n  };\n\n  const pause = () => {\n    setIsPlaying(false);\n    \n    // ÂÜçÁîü‰∏≠„ÅÆÈü≥Â£∞„Çí‰∏ÄÊôÇÂÅúÊ≠¢\n    playingAudios.forEach(({ audio, timeoutId, audioUrl }) => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      if (!audio.paused) {\n        audio.pause();\n      }\n      // URL„ÇíËß£Êîæ\n      if (audioUrl) {\n        URL.revokeObjectURL(audioUrl);\n      }\n    });\n  };\n\n  const stop = () => {\n    setIsPlaying(false);\n    setCurrentTime(0);\n    \n    // ÂÜçÁîü‰∏≠„ÅÆÈü≥Â£∞„ÇíÂÅúÊ≠¢\n    playingAudios.forEach(({ audio, timeoutId, audioUrl }) => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      audio.pause();\n      audio.currentTime = 0;\n      // URL„ÇíËß£Êîæ\n      if (audioUrl) {\n        URL.revokeObjectURL(audioUrl);\n      }\n    });\n    \n    setPlayingAudios(new Map());\n  };\n\n  return (\n    <div className=\"daw-page\">\n      <h2>üéπ Èü≥Ê•Ω„Å•„Åè„Çä„Éö„Éº„Ç∏</h2>\n      <p>Èü≥Á¥†Êùê„Çí„Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„Éó„Åó„Å¶Èü≥Ê•Ω„Çí‰Ωú„Çä„Åæ„Åó„Çá„ÅÜÔºÅ</p>\n\n      {error && (\n        <div className=\"error-message\">\n          <span>‚ö†Ô∏è {error}</span>\n          <button onClick={() => setError(null)}>√ó</button>\n        </div>\n      )}\n\n      <div className=\"daw-controls card\">\n        <div className=\"transport-controls\">\n          <button \n            className={`transport-btn play-btn ${isPlaying ? 'playing' : ''}`}\n            onClick={isPlaying ? pause : play}\n          >\n            {isPlaying ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'}\n          </button>\n          <button className=\"transport-btn stop-btn\" onClick={stop}>\n            ‚èπÔ∏è\n          </button>\n        </div>\n\n        <div className=\"bpm-control\">\n          <label htmlFor=\"bpm\">üéµ BPM:</label>\n          <input\n            id=\"bpm\"\n            type=\"number\"\n            value={bpm}\n            onChange={(e) => setBpm(parseInt(e.target.value))}\n            min=\"60\"\n            max=\"200\"\n            className=\"bpm-input\"\n          />\n        </div>\n\n        <div className=\"track-controls\">\n          <button className=\"button-primary\" onClick={addTrack}>\n            ‚ûï „Éà„É©„ÉÉ„ÇØËøΩÂä†\n          </button>\n          <button \n            className=\"button-secondary\" \n            onClick={() => setShowSoundPanel(!showSoundPanel)}\n          >\n            {showSoundPanel ? 'üéµ Èü≥Á¥†Êùê„ÇíÈö†„Åô' : 'üéµ Èü≥Á¥†Êùê„ÇíË°®Á§∫'}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"daw-main-area\">\n        {showSoundPanel && (\n          <div className=\"sound-panel\">\n            <h3>üéµ Èü≥Á¥†Êùê</h3>\n            <div className=\"sound-list\">\n              {sounds.length > 0 ? (\n                sounds.map(sound => (\n                  <SoundItem key={sound.id} sound={sound} />\n                ))\n              ) : (\n                <div className=\"no-sounds\">\n                  <p>Èü≥Á¥†Êùê„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>\n                  <p>„ÄåÈü≥„ÇíÈõÜ„ÇÅ„Çã„Äç„Éö„Éº„Ç∏„ÅßÈü≥„ÇíÈå≤Èü≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        <div className=\"daw-workspace\">\n          <div className=\"track-headers\">\n            {tracks.map(track => (\n              <TrackHeader \n                key={track.id} \n                track={track} \n                onRemove={removeTrack}\n                trackHeight={trackHeight}\n              />\n            ))}\n          </div>\n\n          <div className=\"timeline-container\">\n            <Timeline bpm={bpm} />\n            <div className=\"tracks-area\" ref={timelineRef}>\n              <Playhead currentTime={currentTime} />\n              {dragPreview && (\n                <div \n                  className=\"drag-preview\"\n                  style={{\n                    left: dragPreview.left,\n                    top: dragPreview.top,\n                    width: dragPreview.width\n                  }}\n                />\n              )}\n              {tracks.map(track => (\n                <Track\n                  key={track.id}\n                  track={track}\n                  onDrop={handleDrop}\n                  onDragOver={handleDragOver}\n                  onRemoveClip={removeClip}\n                  onClipDragStart={handleClipDragStart}\n                  onDragEnd={handleDragEnd}\n                  trackHeight={trackHeight}\n                  bpm={bpm}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"instructions card\">\n        <h3>üìñ ‰Ωø„ÅÑÊñπ</h3>\n        <ul>\n          <li>Â∑¶ÂÅ¥„ÅÆÈü≥Á¥†Êùê„Éë„Éç„É´„Åã„ÇâÈü≥Á¥†Êùê„Çí„Éà„É©„ÉÉ„ÇØ„Å´„Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„Éó„Åó„Å¶ÈÖçÁΩÆ</li>\n          <li>ÈÖçÁΩÆÊ∏à„Åø„ÅÆÈü≥Á¥†Êùê„ÇÇ„Éâ„É©„ÉÉ„Ç∞„Åó„Å¶Âà•„ÅÆÂ†¥ÊâÄ„Å´ÁßªÂãï„Åß„Åç„Åæ„Åô</li>\n          <li>„Éâ„É©„ÉÉ„Ç∞‰∏≠„ÅØÈÖçÁΩÆ‰∫àÂÆö‰ΩçÁΩÆ„Å´Èùí„ÅÑÂΩ±„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô</li>\n          <li>Èü≥Á¥†Êùê„ÅØÊãç„Å´Âêà„Çè„Åõ„Å¶Ëá™ÂãïÁöÑ„Å´ÈÖçÁΩÆ„Åï„Çå„Åæ„Åô</li>\n          <li>Èü≥Á¥†Êùê„Éë„Éç„É´„ÅÆ‚ñ∂Ô∏è„Éú„Çø„É≥„ÅßÂÄãÂà•„Å´Èü≥„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô</li>\n          <li>‚ñ∂Ô∏è„Éú„Çø„É≥„ÅßÂÜçÁîü„ÄÅ‚è∏Ô∏è„Éú„Çø„É≥„Åß‰∏ÄÊôÇÂÅúÊ≠¢„ÄÅ‚èπÔ∏è„Éú„Çø„É≥„ÅßÂÅúÊ≠¢</li>\n          <li>BPM„ÇíÂ§âÊõ¥„Åó„Å¶Èü≥Ê•Ω„ÅÆÈÄü„Åï„ÇíË™øÊï¥</li>\n          <li>„Éà„É©„ÉÉ„ÇØ„ÇíËøΩÂä†„Åó„Å¶Ë§áÊï∞„ÅÆÈü≥„ÇíÈáç„Å≠„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô</li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst SoundItem = ({ sound }) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  const handleDragStart = (e) => {\n    e.dataTransfer.setData('application/json', JSON.stringify(sound));\n    e.dataTransfer.effectAllowed = 'copy';\n  };\n\n  const playSound = () => {\n    if (sound.audioBlob && !isPlaying) {\n      const audio = new Audio();\n      audio.src = URL.createObjectURL(sound.audioBlob);\n      audio.play()\n        .then(() => {\n          setIsPlaying(true);\n          audio.addEventListener('ended', () => {\n            setIsPlaying(false);\n          });\n        })\n        .catch(error => {\n          console.error('Èü≥Â£∞ÂÜçÁîü„Ç®„É©„Éº:', error);\n        });\n    }\n  };\n\n  return (\n    <div\n      className=\"sound-item\"\n      draggable=\"true\"\n      onDragStart={handleDragStart}\n    >\n      <div className=\"sound-info\">\n        <h4>{sound.name}</h4>\n        <div className=\"sound-tags\">\n          {sound.tags.map((tag, index) => (\n            <span key={index} className=\"sound-tag\">{tag}</span>\n          ))}\n        </div>\n      </div>\n      <div className=\"sound-actions\">\n        <button \n          className=\"play-sound-btn\"\n          onClick={playSound}\n          disabled={isPlaying}\n        >\n          {isPlaying ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst TrackHeader = ({ track, onRemove, trackHeight }) => {\n  return (\n    <div className=\"track-header\" style={{ height: trackHeight }}>\n      <div className=\"track-info\">\n        <h4>{track.name}</h4>\n        <div className=\"track-actions\">\n          <button \n            className=\"remove-track-btn\"\n            onClick={() => onRemove(track.id)}\n            title=\"„Éà„É©„ÉÉ„ÇØ„ÇíÂâäÈô§\"\n          >\n            üóëÔ∏è\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Timeline = ({ bpm }) => {\n  const measures = 16; // 16Â∞èÁØÄË°®Á§∫\n  const beatsPerMeasure = 4; // 4/4ÊãçÂ≠ê\n  const beatWidth = 100; // 1Êãç„ÅÆÂπÖ\n\n  return (\n    <div className=\"timeline\">\n      {Array.from({ length: measures }, (_, measureIndex) => (\n        <div key={measureIndex} className=\"measure\">\n          <div className=\"measure-number\">{measureIndex + 1}</div>\n          <div className=\"beats\">\n            {Array.from({ length: beatsPerMeasure }, (_, beatIndex) => (\n              <div \n                key={beatIndex} \n                className=\"beat\"\n                style={{ width: beatWidth }}\n              >\n                {beatIndex + 1}\n              </div>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst Track = ({ track, onDrop, onDragOver, onRemoveClip, onClipDragStart, onDragEnd, trackHeight, bpm }) => {\n  const handleDrop = (e) => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    const timePosition = e.clientX - rect.left;\n    onDrop(e, track.id, timePosition);\n  };\n\n  return (\n    <div \n      className=\"track\"\n      style={{ height: trackHeight }}\n      data-track-id={track.id}\n      onDrop={handleDrop}\n      onDragOver={onDragOver}\n    >\n      <div className=\"track-grid\">\n        {/* Êãç„ÅÆÂ¢ÉÁïåÁ∑ö„ÇíË°®Á§∫ */}\n        {Array.from({ length: 64 }, (_, index) => (\n          <div key={index} className=\"beat-line\" style={{ left: index * 100 }} />\n        ))}\n      </div>\n      \n      {track.clips.map(clip => (\n        <AudioClip\n          key={clip.id}\n          clip={clip}\n          trackId={track.id}\n          onRemove={() => onRemoveClip(track.id, clip.id)}\n          onDragStart={onClipDragStart}\n          onDragEnd={onDragEnd}\n        />\n      ))}\n    </div>\n  );\n};\n\nconst AudioClip = ({ clip, trackId, onRemove, onDragStart, onDragEnd }) => {\n  const [waveformData, setWaveformData] = React.useState([]);\n\n  React.useEffect(() => {\n    // Á∞°Âçò„Å™Ê≥¢ÂΩ¢„Éá„Éº„ÇøÁîüÊàêÔºàÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØÈü≥Â£∞Ëß£Êûê„ÅåÂøÖË¶ÅÔºâ\n    const generateWaveform = () => {\n      const points = 20; // Ê≥¢ÂΩ¢„ÅÆ„Éù„Ç§„É≥„ÉàÊï∞\n      const data = [];\n      for (let i = 0; i < points; i++) {\n        data.push(Math.random() * 0.8 + 0.2); // 0.2-1.0„ÅÆÈñì„ÅÆ„É©„É≥„ÉÄ„É†ÂÄ§\n      }\n      setWaveformData(data);\n    };\n\n    generateWaveform();\n  }, [clip.soundData]);\n\n  const handleDragStart = (e) => {\n    e.stopPropagation(); // „Ç§„Éô„É≥„Éà„Éê„Éñ„É™„É≥„Ç∞„ÇíÈò≤„Åê\n    \n    // „Éâ„É©„ÉÉ„Ç∞„Éá„Éº„Çø„Å´Êó¢Â≠ò„ÇØ„É™„ÉÉ„Éó„ÅÆÊÉÖÂ†±„ÇíË®≠ÂÆö\n    e.dataTransfer.setData('text/plain', `existing-clip-${clip.id}`);\n    e.dataTransfer.effectAllowed = 'move';\n    \n    // onDragStart„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ„ÇíÂëº„Å≥Âá∫„Åó\n    onDragStart(clip, trackId);\n  };\n\n  return (\n    <div \n      className=\"audio-clip\"\n      draggable=\"true\"\n      onDragStart={handleDragStart}\n      onDragEnd={onDragEnd}\n      style={{\n        left: clip.startTime,\n        width: clip.duration\n      }}\n    >\n      <div className=\"clip-header\">\n        <span className=\"clip-name\">{clip.soundData.name}</span>\n        <button \n          className=\"remove-clip-btn\"\n          onClick={onRemove}\n          title=\"„ÇØ„É™„ÉÉ„Éó„ÇíÂâäÈô§\"\n        >\n          √ó\n        </button>\n      </div>\n      <div className=\"clip-waveform\">\n        {waveformData.length > 0 ? (\n          <svg className=\"waveform-svg\" width=\"100%\" height=\"30\">\n            {waveformData.map((height, index) => (\n              <rect\n                key={index}\n                x={`${(index / waveformData.length) * 100}%`}\n                y={`${(1 - height) * 15}`}\n                width={`${80 / waveformData.length}%`}\n                height={`${height * 30}`}\n                fill=\"rgba(255, 255, 255, 0.8)\"\n              />\n            ))}\n          </svg>\n        ) : (\n          <div className=\"waveform-placeholder\">üîä</div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst Playhead = ({ currentTime }) => {\n  return (\n    <div \n      className=\"playhead\"\n      style={{ left: currentTime }}\n    />\n  );\n};\n\nexport default DAWPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}