{"ast":null,"code":"import _objectSpread from\"/Users/nakataniyuutomo/Desktop/Programing/\\u30BB\\u3099\\u30DF\\u958B\\u767A/sound-library2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import'./SoundCollection.css';import{useAnnouncement,useErrorMessages}from'../hooks/useAccessibility';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SoundCollection=()=>{const[recordings,setRecordings]=useState([]);const[isRecording,setIsRecording]=useState(false);const[mediaRecorder,setMediaRecorder]=useState(null);const[currentRecording,setCurrentRecording]=useState(null);const fileInputRef=useRef(null);const recordButtonRef=useRef(null);// アクセシビリティフック\nconst{announce,AnnouncementRegion}=useAnnouncement();const{showError,clearError,ErrorRegion}=useErrorMessages();// コンポーネントアンマウント時のクリーンアップ\nuseEffect(()=>{return()=>{// 録音中の場合は停止\nif(mediaRecorder&&isRecording){mediaRecorder.stop();if(mediaRecorder.stream){mediaRecorder.stream.getTracks().forEach(track=>track.stop());}}// 作成されたBlobURLをクリーンアップ\nrecordings.forEach(recording=>{if(recording.url&&recording.url.startsWith('blob:')){URL.revokeObjectURL(recording.url);}});};},[mediaRecorder,isRecording,recordings]);const startRecording=async()=>{try{// エラーメッセージをクリア\nclearError();announce('録音を開始しています...','assertive');// iOSでのマイクアクセス改善 - まずテストを実行\nconst hasAccess=await testMicrophoneAccess();if(!hasAccess){showError('マイクにアクセスできませんでした。ブラウザの設定を確認してください。');return;}console.log('録音開始処理中...');// iPad用の音声設定を最適化\nconst audioConstraints={echoCancellation:false,// iPadでは無効にする\nnoiseSuppression:false,// iPadでは無効にする  \nautoGainControl:false,// iPadでは無効にする\nsampleRate:44100,// 明示的にサンプルレートを指定\nchannelCount:1// モノラル録音を明示\n};console.log('音声制約:',audioConstraints);const stream=await navigator.mediaDevices.getUserMedia({audio:audioConstraints});console.log('録音ストリーム取得成功');console.log('ストリーム詳細:',{id:stream.id,active:stream.active,tracks:stream.getTracks().map(track=>({id:track.id,kind:track.kind,label:track.label,enabled:track.enabled,muted:track.muted,readyState:track.readyState,settings:track.getSettings?track.getSettings():'getSettings not supported'}))});// MediaRecorderのオプションを決定\nlet recorderOptions={};if(MediaRecorder.isTypeSupported('audio/webm;codecs=opus')){recorderOptions.mimeType='audio/webm;codecs=opus';console.log('使用するMIMEタイプ: audio/webm;codecs=opus');}else if(MediaRecorder.isTypeSupported('audio/mp4')){recorderOptions.mimeType='audio/mp4';console.log('使用するMIMEタイプ: audio/mp4');}else if(MediaRecorder.isTypeSupported('audio/wav')){recorderOptions.mimeType='audio/wav';console.log('使用するMIMEタイプ: audio/wav');}else{console.log('デフォルトMIMEタイプを使用');}const recorder=new MediaRecorder(stream,recorderOptions);console.log('MediaRecorder作成:',{mimeType:recorder.mimeType,state:recorder.state,supportedTypes:{'audio/webm;codecs=opus':MediaRecorder.isTypeSupported('audio/webm;codecs=opus'),'audio/mp4':MediaRecorder.isTypeSupported('audio/mp4'),'audio/wav':MediaRecorder.isTypeSupported('audio/wav')}});const chunks=[];recorder.ondataavailable=e=>{console.log('録音データ受信:',e.data.size,'bytes, type:',e.data.type);chunks.push(e.data);};recorder.onstop=()=>{const blob=new Blob(chunks,{type:'audio/wav'});const url=URL.createObjectURL(blob);console.log('録音完了 - Blobサイズ:',blob.size,'bytes, type:',blob.type);console.log('チャンク数:',chunks.length,'chunks');setCurrentRecording({id:Date.now(),url:url,audioBlob:blob,name:'',tags:[],createdAt:new Date()});announce('録音が完了しました。音に名前をつけて保存してください。','assertive');};recorder.start();console.log('録音開始:',recorder.state);setMediaRecorder(recorder);setIsRecording(true);announce('録音を開始しました。','assertive');console.log('録音開始完了');}catch(error){console.error('録音の開始に失敗しました:',error);let errorMessage='録音を開始できませんでした。';if(error.name==='NotAllowedError'){errorMessage='マイクの使用が拒否されました。ブラウザの設定でマイクアクセスを許可してください。';}else if(error.name==='NotFoundError'){errorMessage='マイクが見つかりません。デバイスにマイクが接続されているか確認してください。';}else if(error.name==='NotSupportedError'){errorMessage='お使いのブラウザは録音機能をサポートしていません。';}else if(error.name==='NotReadableError'){errorMessage='マイクが他のアプリケーションで使用中の可能性があります。';}else if(error.message){errorMessage=error.message;}showError(errorMessage);announce(errorMessage,'assertive');}};const stopRecording=()=>{console.log('録音停止開始');setIsRecording(false);// まず録音状態を停止に設定\nif(mediaRecorder){mediaRecorder.stop();mediaRecorder.stream.getTracks().forEach(track=>track.stop());setMediaRecorder(null);announce('録音を停止しました。','assertive');}console.log('録音停止完了');};// Blobを Base64 に変換する関数\nconst blobToBase64=blob=>{return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onload=()=>resolve(reader.result);reader.onerror=reject;reader.readAsDataURL(blob);});};const saveRecording=async(name,tags)=>{if(currentRecording&&name.trim()){try{// Blobをbase64に変換\nconst base64Data=await blobToBase64(currentRecording.audioBlob);const savedRecording=_objectSpread(_objectSpread({},currentRecording),{},{name:name.trim(),tags:tags.filter(tag=>tag.trim()).map(tag=>tag.trim()),audioData:base64Data,// base64データを保存\n// audioBlobは一時的なものなので削除\naudioBlob:undefined});setRecordings([...recordings,savedRecording]);setCurrentRecording(null);// LocalStorageに保存（audioBlobは除外）\nconst existingRecordings=JSON.parse(localStorage.getItem('soundRecordings')||'[]');const recordingToSave=_objectSpread({},savedRecording);delete recordingToSave.audioBlob;// Blobは保存しない\nlocalStorage.setItem('soundRecordings',JSON.stringify([...existingRecordings,recordingToSave]));}catch(error){console.error('録音の保存に失敗しました:',error);alert('録音の保存に失敗しました。再度お試しください。');}}};const handleFileUpload=event=>{const file=event.target.files[0];if(file&&file.type.startsWith('audio/')){const url=URL.createObjectURL(file);setCurrentRecording({id:Date.now(),url:url,audioBlob:file,name:file.name.replace(/\\.[^/.]+$/,''),tags:[],createdAt:new Date()});}};// マイクアクセステスト機能（iOSでの問題対策）\nconst testMicrophoneAccess=async()=>{try{console.log('マイクアクセステスト開始');// HTTPS接続チェック\nif(!checkHTTPS()){alert('🔒 録音機能を使用するにはHTTPS接続が必要です。\\n\\niPhoneでは特に、セキュアな接続が必要となります。');return false;}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){throw new Error('お使いのブラウザは録音機能をサポートしていません。');}// まずマイクの権限状態を確認\nif(navigator.permissions){try{const permission=await navigator.permissions.query({name:'microphone'});console.log('マイク権限状態:',permission.state);if(permission.state==='denied'){alert('マイクアクセスが拒否されています。ブラウザの設定からマイクの使用を許可してください。');return false;}}catch(permError){console.log('権限確認はサポートされていません:',permError);}}// 実際にマイクアクセスをテスト\nconst stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:true,noiseSuppression:true,autoGainControl:true}});// すぐにストリームを停止\nstream.getTracks().forEach(track=>track.stop());console.log('マイクアクセステスト成功');return true;}catch(error){console.error('マイクアクセステスト失敗:',error);let errorMessage='マイクにアクセスできません。';if(error.name==='NotAllowedError'){errorMessage='マイクの使用が拒否されました。ブラウザの設定でマイクアクセスを許可してください。\\n\\niPhoneの場合：\\n1. Safari設定 > プライバシーとセキュリティ > マイク\\n2. このサイトを許可に設定';}else if(error.name==='NotFoundError'){errorMessage='マイクが見つかりません。';}else if(error.name==='NotSupportedError'){errorMessage='お使いのブラウザは録音機能をサポートしていません。';}else if(error.message){errorMessage=error.message;}alert(errorMessage);return false;}};// HTTPS接続チェック（iOSでの録音に必要）\nconst checkHTTPS=()=>{if(window.location.protocol!=='https:'&&window.location.hostname!=='localhost'&&window.location.hostname!=='127.0.0.1'){return false;}return true;};// 音声レベル監視関数\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"sound-collection\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsxs(\"h2\",{id:\"page-title\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u30DE\\u30A4\\u30AF\",children:\"\\uD83C\\uDFA4\"}),\" \\u97F3\\u3042\\u3064\\u3081\\u30DA\\u30FC\\u30B8\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"page-description\",children:\"\\u8EAB\\u306E\\u56DE\\u308A\\u306B\\u3042\\u308B\\u97F3\\u3092\\u9332\\u97F3\\u3057\\u305F\\u308A\\u3001\\u97F3\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\\u3057\\u3066\\u97F3\\u7D20\\u6750\\u3092\\u96C6\\u3081\\u307E\\u3057\\u3087\\u3046\\uFF01\"})]}),/*#__PURE__*/_jsx(AnnouncementRegion,{}),/*#__PURE__*/_jsx(ErrorRegion,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"collection-actions\",\"aria-labelledby\":\"collection-title\",children:[/*#__PURE__*/_jsx(\"h3\",{id:\"collection-title\",className:\"sr-only\",children:\"\\u97F3\\u306E\\u53CE\\u96C6\\u65B9\\u6CD5\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"recording-section card\",\"aria-labelledby\":\"recording-title\",children:[/*#__PURE__*/_jsxs(\"h3\",{id:\"recording-title\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u30DE\\u30A4\\u30AF\",children:\"\\uD83C\\uDF99\\uFE0F\"}),\" \\u97F3\\u3092\\u9332\\u97F3\\u3059\\u308B\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ios-notice\",role:\"region\",\"aria-labelledby\":\"ios-instructions\",children:[/*#__PURE__*/_jsx(\"h4\",{id:\"ios-instructions\",className:\"sr-only\",children:\"iPhone/iPad\\u4F7F\\u7528\\u6642\\u306E\\u6CE8\\u610F\\u4E8B\\u9805\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u30B9\\u30DE\\u30FC\\u30C8\\u30D5\\u30A9\\u30F3\",children:\"\\uD83D\\uDCF1\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"iPhone/iPad\\u3092\\u304A\\u4F7F\\u3044\\u306E\\u65B9\\u3078\\uFF1A\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u9332\\u97F3\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3059\\u3068\\u30DE\\u30A4\\u30AF\\u306E\\u4F7F\\u7528\\u8A31\\u53EF\\u3092\\u6C42\\u3081\\u308B\\u30C0\\u30A4\\u30A2\\u30ED\\u30B0\\u304C\\u8868\\u793A\\u3055\\u308C\\u307E\\u3059\\u3002\\u300C\\u8A31\\u53EF\\u300D\\u3092\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u30C0\\u30A4\\u30A2\\u30ED\\u30B0\\u304C\\u8868\\u793A\\u3055\\u308C\\u306A\\u3044\\u5834\\u5408\\u306F\\u3001Safari\\u8A2D\\u5B9A \\u2192 \\u30D7\\u30E9\\u30A4\\u30D0\\u30B7\\u30FC\\u3068\\u30BB\\u30AD\\u30E5\\u30EA\\u30C6\\u30A3 \\u2192 \\u30DE\\u30A4\\u30AF \\u3067\\u3053\\u306E\\u30B5\\u30A4\\u30C8\\u3092\\u8A31\\u53EF\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recording-controls\",role:\"group\",\"aria-labelledby\":\"recording-controls-label\",children:[/*#__PURE__*/_jsx(\"h4\",{id:\"recording-controls-label\",className:\"sr-only\",children:\"\\u9332\\u97F3\\u64CD\\u4F5C\"}),!isRecording?/*#__PURE__*/_jsxs(\"button\",{ref:recordButtonRef,className:\"accessible-button button-primary large-button record-btn\",onClick:startRecording,\"aria-describedby\":\"record-instructions\",type:\"button\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u9332\\u97F3\\u958B\\u59CB\",children:\"\\uD83D\\uDD34\"}),\" \\u9332\\u97F3\\u958B\\u59CB\"]}):/*#__PURE__*/_jsxs(\"button\",{className:\"accessible-button button-secondary large-button stop-btn\",onClick:stopRecording,\"aria-describedby\":\"stop-instructions\",type:\"button\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u505C\\u6B62\",children:\"\\u23F9\\uFE0F\"}),\" \\u9332\\u97F3\\u505C\\u6B62\"]}),/*#__PURE__*/_jsx(\"div\",{id:\"record-instructions\",className:\"sr-only\",children:\"\\u9332\\u97F3\\u958B\\u59CB\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3059\\u3068\\u30DE\\u30A4\\u30AF\\u304C\\u6709\\u52B9\\u306B\\u306A\\u308A\\u3001\\u97F3\\u58F0\\u306E\\u9332\\u97F3\\u304C\\u59CB\\u307E\\u308A\\u307E\\u3059\"}),/*#__PURE__*/_jsx(\"div\",{id:\"stop-instructions\",className:\"sr-only\",children:\"\\u9332\\u97F3\\u505C\\u6B62\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3059\\u3068\\u9332\\u97F3\\u304C\\u7D42\\u4E86\\u3057\\u3001\\u97F3\\u306B\\u540D\\u524D\\u3092\\u3064\\u3051\\u308B\\u3053\\u3068\\u304C\\u3067\\u304D\\u307E\\u3059\"})]}),isRecording&&/*#__PURE__*/_jsx(\"div\",{className:\"recording-status\",role:\"status\",\"aria-live\":\"polite\",\"aria-label\":\"\\u9332\\u97F3\\u72B6\\u6CC1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"recording-indicator\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pulse-dot\",\"aria-hidden\":\"true\"}),\"\\u9332\\u97F3\\u4E2D...\"]})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"upload-section card\",\"aria-labelledby\":\"upload-title\",children:[/*#__PURE__*/_jsxs(\"h3\",{id:\"upload-title\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u30D5\\u30A9\\u30EB\\u30C0\",children:\"\\uD83D\\uDCC1\"}),\" \\u97F3\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"accessible-button button-secondary large-button\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},\"aria-describedby\":\"upload-instructions\",type:\"button\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u30D5\\u30A1\\u30A4\\u30EB\\u9078\\u629E\",children:\"\\uD83D\\uDCC2\"}),\" \\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\"]}),/*#__PURE__*/_jsx(\"div\",{id:\"upload-instructions\",className:\"sr-only\",children:\"\\u97F3\\u58F0\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\\u3057\\u3066\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\\u3067\\u304D\\u307E\\u3059\\u3002\\u5BFE\\u5FDC\\u5F62\\u5F0F: MP3, WAV, M4A \\u306A\\u3069\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"audio/*\",onChange:handleFileUpload,style:{display:'none'},\"aria-label\":\"\\u97F3\\u58F0\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\"})]})]}),currentRecording&&/*#__PURE__*/_jsx(RecordingEditor,{recording:currentRecording,onSave:saveRecording,onCancel:()=>setCurrentRecording(null)}),/*#__PURE__*/_jsxs(\"section\",{className:\"recent-recordings\",\"aria-labelledby\":\"recent-title\",children:[/*#__PURE__*/_jsxs(\"h3\",{id:\"recent-title\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u30E1\\u30E2\",children:\"\\uD83D\\uDCDD\"}),\" \\u6700\\u8FD1\\u9332\\u97F3\\u3057\\u305F\\u97F3\"]}),recordings.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-recordings\",children:\"\\u307E\\u3060\\u9332\\u97F3\\u3057\\u305F\\u97F3\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\\u3002\\u4E0A\\u306E\\u9332\\u97F3\\u30DC\\u30BF\\u30F3\\u304B\\u3089\\u59CB\\u3081\\u307E\\u3057\\u3087\\u3046\\uFF01\"}):/*#__PURE__*/_jsx(\"div\",{className:\"recordings-grid\",role:\"grid\",\"aria-label\":\"\\u9332\\u97F3\\u3055\\u308C\\u305F\\u97F3\\u306E\\u30EA\\u30B9\\u30C8\",children:recordings.map((recording,index)=>/*#__PURE__*/_jsx(SoundCard,{recording:recording,index:index},recording.id))})]})]});};const RecordingEditor=_ref=>{let{recording,onSave,onCancel}=_ref;const[name,setName]=useState(recording.name);const[tagInput,setTagInput]=useState('');const[tags,setTags]=useState(recording.tags);const[validationMessage,setValidationMessage]=useState('');const addTag=()=>{if(tagInput.trim()&&!tags.includes(tagInput.trim())){setTags([...tags,tagInput.trim()]);setTagInput('');setValidationMessage(\"\\u30BF\\u30B0\\u300C\".concat(tagInput.trim(),\"\\u300D\\u3092\\u8FFD\\u52A0\\u3057\\u307E\\u3057\\u305F\"));}else if(tags.includes(tagInput.trim())){setValidationMessage('このタグは既に追加されています');}};const removeTag=tagToRemove=>{setTags(tags.filter(tag=>tag!==tagToRemove));setValidationMessage(\"\\u30BF\\u30B0\\u300C\".concat(tagToRemove,\"\\u300D\\u3092\\u524A\\u9664\\u3057\\u307E\\u3057\\u305F\"));};const handleKeyPress=e=>{if(e.key==='Enter'){e.preventDefault();addTag();}};const handleSave=()=>{if(!name.trim()){setValidationMessage('音の名前を入力してください');return;}onSave(name,tags);};return/*#__PURE__*/_jsxs(\"section\",{className:\"recording-editor card\",role:\"dialog\",\"aria-labelledby\":\"editor-title\",\"aria-describedby\":\"editor-description\",children:[/*#__PURE__*/_jsxs(\"h3\",{id:\"editor-title\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u7DE8\\u96C6\",children:\"\\u270F\\uFE0F\"}),\" \\u97F3\\u306B\\u540D\\u524D\\u3092\\u3064\\u3051\\u3088\\u3046\"]}),/*#__PURE__*/_jsx(\"p\",{id:\"editor-description\",className:\"sr-only\",children:\"\\u9332\\u97F3\\u3057\\u305F\\u97F3\\u306B\\u540D\\u524D\\u3068\\u30BF\\u30B0\\u3092\\u3064\\u3051\\u3066\\u4FDD\\u5B58\\u3067\\u304D\\u307E\\u3059\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"audio-preview-container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"audio-preview\",className:\"audio-preview-label\",children:\"\\u9332\\u97F3\\u3057\\u305F\\u97F3\\u306E\\u30D7\\u30EC\\u30D3\\u30E5\\u30FC:\"}),/*#__PURE__*/_jsxs(\"audio\",{id:\"audio-preview\",controls:true,src:recording.url,className:\"accessible-audio audio-preview\",onError:e=>{console.error('音声プレビューの読み込みエラー:',e);},\"aria-describedby\":\"audio-preview-desc\",children:[/*#__PURE__*/_jsx(\"track\",{kind:\"captions\",label:\"\\u97F3\\u58F0\\u8AAC\\u660E\",srcLang:\"ja\"}),\"\\u304A\\u4F7F\\u3044\\u306E\\u30D6\\u30E9\\u30A6\\u30B6\\u306F\\u97F3\\u58F0\\u518D\\u751F\\u306B\\u5BFE\\u5FDC\\u3057\\u3066\\u3044\\u307E\\u305B\\u3093\\u3002\"]}),/*#__PURE__*/_jsx(\"p\",{id:\"audio-preview-desc\",className:\"sr-only\",children:\"\\u9332\\u97F3\\u3055\\u308C\\u305F\\u97F3\\u58F0\\u3092\\u518D\\u751F\\u3057\\u3066\\u78BA\\u8A8D\\u3067\\u304D\\u307E\\u3059\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"soundName\",className:\"required-label\",children:[\"\\u97F3\\u306E\\u540D\\u524D \",/*#__PURE__*/_jsx(\"span\",{\"aria-label\":\"\\u5FC5\\u9808\",className:\"required\",children:\"*\"}),\":\"]}),/*#__PURE__*/_jsx(\"input\",{id:\"soundName\",type:\"text\",value:name,onChange:e=>{setName(e.target.value);if(validationMessage)setValidationMessage('');},placeholder:\"\\u4F8B: \\u30D4\\u30A2\\u30CE\\u306E\\u97F3\\u3001\\u96E8\\u306E\\u97F3\",className:\"accessible-input sound-name-input\",required:true,\"aria-describedby\":\"name-help\",\"aria-invalid\":!name.trim()&&validationMessage?'true':'false'}),/*#__PURE__*/_jsx(\"p\",{id:\"name-help\",className:\"help-text\",children:\"\\u3053\\u306E\\u97F3\\u3092\\u8868\\u3059\\u5206\\u304B\\u308A\\u3084\\u3059\\u3044\\u540D\\u524D\\u3092\\u3064\\u3051\\u3066\\u304F\\u3060\\u3055\\u3044\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"soundTags\",className:\"optional-label\",children:[\"\\u30BF\\u30B0 \",/*#__PURE__*/_jsx(\"span\",{className:\"optional\",children:\"(\\u4EFB\\u610F)\"}),\":\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tag-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"soundTags\",type:\"text\",value:tagInput,onChange:e=>setTagInput(e.target.value),onKeyPress:handleKeyPress,placeholder:\"\\u4F8B: \\u697D\\u5668\\u3001\\u81EA\\u7136\",className:\"accessible-input tag-input\",\"aria-describedby\":\"tag-help\",list:\"tag-suggestions\"}),/*#__PURE__*/_jsxs(\"datalist\",{id:\"tag-suggestions\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u697D\\u5668\",children:\"\\u697D\\u5668\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u81EA\\u7136\",children:\"\\u81EA\\u7136\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u6A5F\\u68B0\",children:\"\\u6A5F\\u68B0\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u52D5\\u7269\",children:\"\\u52D5\\u7269\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u58F0\",children:\"\\u58F0\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addTag,className:\"accessible-button add-tag-btn\",type:\"button\",disabled:!tagInput.trim(),\"aria-describedby\":\"add-tag-help\",children:\"\\u8FFD\\u52A0\"})]}),/*#__PURE__*/_jsx(\"p\",{id:\"tag-help\",className:\"help-text\",children:\"\\u97F3\\u306E\\u7A2E\\u985E\\u3084\\u30AB\\u30C6\\u30B4\\u30EA\\u3092\\u8868\\u3059\\u30BF\\u30B0\\u3092\\u8FFD\\u52A0\\u3067\\u304D\\u307E\\u3059\\u3002Enter\\u30AD\\u30FC\\u3067\\u3082\\u8FFD\\u52A0\\u3067\\u304D\\u307E\\u3059\\u3002\"}),/*#__PURE__*/_jsx(\"p\",{id:\"add-tag-help\",className:\"sr-only\",children:\"\\u5165\\u529B\\u3057\\u305F\\u30BF\\u30B0\\u3092\\u97F3\\u306B\\u8FFD\\u52A0\\u3057\\u307E\\u3059\"}),tags.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"tags-display\",role:\"group\",\"aria-labelledby\":\"tags-label\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"tags-label\",className:\"tags-title\",children:\"\\u8FFD\\u52A0\\u3055\\u308C\\u305F\\u30BF\\u30B0:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"tags-list\",\"aria-live\":\"polite\",children:tags.map((tag,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"tag-item\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"tag\",children:[tag,/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeTag(tag),className:\"remove-tag\",type:\"button\",\"aria-label\":\"\\u30BF\\u30B0\\u300C\".concat(tag,\"\\u300D\\u3092\\u524A\\u9664\"),children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]})},tag))})]})]}),validationMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"validation-message\",role:\"status\",\"aria-live\":\"polite\",children:validationMessage}),/*#__PURE__*/_jsxs(\"div\",{className:\"editor-actions\",role:\"group\",\"aria-labelledby\":\"actions-label\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"actions-label\",className:\"sr-only\",children:\"\\u4FDD\\u5B58\\u30FB\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u64CD\\u4F5C\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"accessible-button button-primary\",disabled:!name.trim(),type:\"button\",\"aria-describedby\":\"save-help\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u4FDD\\u5B58\",children:\"\\uD83D\\uDCBE\"}),\" \\u4FDD\\u5B58\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onCancel,className:\"accessible-button button-secondary\",type:\"button\",\"aria-describedby\":\"cancel-help\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\",children:\"\\u274C\"}),\" \\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"]}),/*#__PURE__*/_jsx(\"p\",{id:\"save-help\",className:\"sr-only\",children:\"\\u97F3\\u306E\\u540D\\u524D\\u3068\\u30BF\\u30B0\\u3092\\u4FDD\\u5B58\\u3057\\u307E\\u3059\"}),/*#__PURE__*/_jsx(\"p\",{id:\"cancel-help\",className:\"sr-only\",children:\"\\u7DE8\\u96C6\\u3092\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u3057\\u3066\\u9332\\u97F3\\u3092\\u7834\\u68C4\\u3057\\u307E\\u3059\"})]})]});};const SoundCard=_ref2=>{let{recording,index}=_ref2;const formattedDate=new Date(recording.createdAt).toLocaleDateString('ja-JP',{year:'numeric',month:'long',day:'numeric'});return/*#__PURE__*/_jsxs(\"article\",{className:\"sound-card\",\"aria-labelledby\":\"sound-title-\".concat(recording.id),\"aria-describedby\":\"sound-desc-\".concat(recording.id),children:[/*#__PURE__*/_jsxs(\"header\",{className:\"sound-info\",children:[/*#__PURE__*/_jsx(\"h4\",{id:\"sound-title-\".concat(recording.id),className:\"sound-name\",children:recording.name}),/*#__PURE__*/_jsx(\"p\",{className:\"sound-date\",\"aria-label\":\"\\u9332\\u97F3\\u65E5: \".concat(formattedDate),children:formattedDate}),recording.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"sound-tags\",role:\"group\",\"aria-label\":\"\\u30BF\\u30B0\",children:recording.tags.map((tag,tagIndex)=>/*#__PURE__*/_jsx(\"span\",{className:\"tag small\",role:\"mark\",\"aria-label\":\"\\u30BF\\u30B0: \".concat(tag),children:tag},tag))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sound-player\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"audio-\".concat(recording.id),className:\"sr-only\",children:[recording.name,\"\\u306E\\u97F3\\u58F0\\u30D7\\u30EC\\u30FC\\u30E4\\u30FC\"]}),/*#__PURE__*/_jsxs(\"audio\",{id:\"audio-\".concat(recording.id),controls:true,src:recording.url,className:\"accessible-audio\",onError:e=>{console.error('音声カードの読み込みエラー:',e,'recording:',recording.name);},\"aria-describedby\":\"audio-desc-\".concat(recording.id),children:[/*#__PURE__*/_jsx(\"track\",{kind:\"captions\",label:\"\\u97F3\\u58F0\\u8AAC\\u660E\",srcLang:\"ja\"}),\"\\u304A\\u4F7F\\u3044\\u306E\\u30D6\\u30E9\\u30A6\\u30B6\\u306F\\u97F3\\u58F0\\u518D\\u751F\\u306B\\u5BFE\\u5FDC\\u3057\\u3066\\u3044\\u307E\\u305B\\u3093\\u3002\"]}),/*#__PURE__*/_jsxs(\"p\",{id:\"audio-desc-\".concat(recording.id),className:\"sr-only\",children:[recording.name,\"\\u306E\\u97F3\\u58F0\\u30D5\\u30A1\\u30A4\\u30EB\\u3002\\u518D\\u751F\\u30DC\\u30BF\\u30F3\\u3067\\u97F3\\u3092\\u805E\\u304F\\u3053\\u3068\\u304C\\u3067\\u304D\\u307E\\u3059\\u3002\"]})]})]});};export default SoundCollection;","map":{"version":3,"names":["React","useState","useRef","useEffect","useAnnouncement","useErrorMessages","jsx","_jsx","jsxs","_jsxs","SoundCollection","recordings","setRecordings","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","currentRecording","setCurrentRecording","fileInputRef","recordButtonRef","announce","AnnouncementRegion","showError","clearError","ErrorRegion","stop","stream","getTracks","forEach","track","recording","url","startsWith","URL","revokeObjectURL","startRecording","hasAccess","testMicrophoneAccess","console","log","audioConstraints","echoCancellation","noiseSuppression","autoGainControl","sampleRate","channelCount","navigator","mediaDevices","getUserMedia","audio","id","active","tracks","map","kind","label","enabled","muted","readyState","settings","getSettings","recorderOptions","MediaRecorder","isTypeSupported","mimeType","recorder","state","supportedTypes","chunks","ondataavailable","e","data","size","type","push","onstop","blob","Blob","createObjectURL","length","Date","now","audioBlob","name","tags","createdAt","start","error","errorMessage","message","stopRecording","blobToBase64","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsDataURL","saveRecording","trim","base64Data","savedRecording","_objectSpread","filter","tag","audioData","undefined","existingRecordings","JSON","parse","localStorage","getItem","recordingToSave","setItem","stringify","alert","handleFileUpload","event","file","target","files","replace","checkHTTPS","Error","permissions","permission","query","permError","window","location","protocol","hostname","className","children","role","ref","onClick","_fileInputRef$current","current","click","accept","onChange","style","display","RecordingEditor","onSave","onCancel","index","SoundCard","_ref","setName","tagInput","setTagInput","setTags","validationMessage","setValidationMessage","addTag","includes","concat","removeTag","tagToRemove","handleKeyPress","key","preventDefault","handleSave","htmlFor","controls","src","onError","srcLang","value","placeholder","required","onKeyPress","list","disabled","_ref2","formattedDate","toLocaleDateString","year","month","day","tagIndex"],"sources":["/Users/nakataniyuutomo/Desktop/Programing/ゼミ開発/sound-library2/src/pages/SoundCollection.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './SoundCollection.css';\nimport { useAnnouncement, useErrorMessages } from '../hooks/useAccessibility';\n\nconst SoundCollection = () => {\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [currentRecording, setCurrentRecording] = useState(null);\n  const fileInputRef = useRef(null);\n  const recordButtonRef = useRef(null);\n\n  // アクセシビリティフック\n  const { announce, AnnouncementRegion } = useAnnouncement();\n  const { showError, clearError, ErrorRegion } = useErrorMessages();\n\n  // コンポーネントアンマウント時のクリーンアップ\n  useEffect(() => {\n    return () => {\n      // 録音中の場合は停止\n      if (mediaRecorder && isRecording) {\n        mediaRecorder.stop();\n        if (mediaRecorder.stream) {\n          mediaRecorder.stream.getTracks().forEach(track => track.stop());\n        }\n      }\n      \n      // 作成されたBlobURLをクリーンアップ\n      recordings.forEach(recording => {\n        if (recording.url && recording.url.startsWith('blob:')) {\n          URL.revokeObjectURL(recording.url);\n        }\n      });\n    };\n  }, [mediaRecorder, isRecording, recordings]);\n\n  const startRecording = async () => {\n    try {\n      // エラーメッセージをクリア\n      clearError();\n      announce('録音を開始しています...', 'assertive');\n\n      // iOSでのマイクアクセス改善 - まずテストを実行\n      const hasAccess = await testMicrophoneAccess();\n      if (!hasAccess) {\n        showError('マイクにアクセスできませんでした。ブラウザの設定を確認してください。');\n        return;\n      }\n\n      console.log('録音開始処理中...');\n      \n      // iPad用の音声設定を最適化\n      const audioConstraints = {\n        echoCancellation: false, // iPadでは無効にする\n        noiseSuppression: false, // iPadでは無効にする  \n        autoGainControl: false,  // iPadでは無効にする\n        sampleRate: 44100,       // 明示的にサンプルレートを指定\n        channelCount: 1          // モノラル録音を明示\n      };\n      \n      console.log('音声制約:', audioConstraints);\n      \n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: audioConstraints\n      });\n      \n      console.log('録音ストリーム取得成功');\n      console.log('ストリーム詳細:', {\n        id: stream.id,\n        active: stream.active,\n        tracks: stream.getTracks().map(track => ({\n          id: track.id,\n          kind: track.kind,\n          label: track.label,\n          enabled: track.enabled,\n          muted: track.muted,\n          readyState: track.readyState,\n          settings: track.getSettings ? track.getSettings() : 'getSettings not supported'\n        }))\n      });\n      \n      // MediaRecorderのオプションを決定\n      let recorderOptions = {};\n      \n      if (MediaRecorder.isTypeSupported('audio/webm;codecs=opus')) {\n        recorderOptions.mimeType = 'audio/webm;codecs=opus';\n        console.log('使用するMIMEタイプ: audio/webm;codecs=opus');\n      } else if (MediaRecorder.isTypeSupported('audio/mp4')) {\n        recorderOptions.mimeType = 'audio/mp4';\n        console.log('使用するMIMEタイプ: audio/mp4');\n      } else if (MediaRecorder.isTypeSupported('audio/wav')) {\n        recorderOptions.mimeType = 'audio/wav';\n        console.log('使用するMIMEタイプ: audio/wav');\n      } else {\n        console.log('デフォルトMIMEタイプを使用');\n      }\n      \n      const recorder = new MediaRecorder(stream, recorderOptions);\n      console.log('MediaRecorder作成:', {\n        mimeType: recorder.mimeType,\n        state: recorder.state,\n        supportedTypes: {\n          'audio/webm;codecs=opus': MediaRecorder.isTypeSupported('audio/webm;codecs=opus'),\n          'audio/mp4': MediaRecorder.isTypeSupported('audio/mp4'),\n          'audio/wav': MediaRecorder.isTypeSupported('audio/wav')\n        }\n      });\n      \n      const chunks = [];\n\n      recorder.ondataavailable = (e) => {\n        console.log('録音データ受信:', e.data.size, 'bytes, type:', e.data.type);\n        chunks.push(e.data);\n      };\n\n      recorder.onstop = () => {\n        const blob = new Blob(chunks, { type: 'audio/wav' });\n        const url = URL.createObjectURL(blob);\n        console.log('録音完了 - Blobサイズ:', blob.size, 'bytes, type:', blob.type);\n        console.log('チャンク数:', chunks.length, 'chunks');\n        setCurrentRecording({\n          id: Date.now(),\n          url: url,\n          audioBlob: blob,\n          name: '',\n          tags: [],\n          createdAt: new Date()\n        });\n        \n        announce('録音が完了しました。音に名前をつけて保存してください。', 'assertive');\n      };\n\n      recorder.start();\n      console.log('録音開始:', recorder.state);\n      setMediaRecorder(recorder);\n      setIsRecording(true);\n      announce('録音を開始しました。', 'assertive');\n      console.log('録音開始完了');\n      \n    } catch (error) {\n      console.error('録音の開始に失敗しました:', error);\n      \n      let errorMessage = '録音を開始できませんでした。';\n      \n      if (error.name === 'NotAllowedError') {\n        errorMessage = 'マイクの使用が拒否されました。ブラウザの設定でマイクアクセスを許可してください。';\n      } else if (error.name === 'NotFoundError') {\n        errorMessage = 'マイクが見つかりません。デバイスにマイクが接続されているか確認してください。';\n      } else if (error.name === 'NotSupportedError') {\n        errorMessage = 'お使いのブラウザは録音機能をサポートしていません。';\n      } else if (error.name === 'NotReadableError') {\n        errorMessage = 'マイクが他のアプリケーションで使用中の可能性があります。';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      showError(errorMessage);\n      announce(errorMessage, 'assertive');\n    }\n  };\n\n  const stopRecording = () => {\n    console.log('録音停止開始');\n    setIsRecording(false); // まず録音状態を停止に設定\n    \n    if (mediaRecorder) {\n      mediaRecorder.stop();\n      mediaRecorder.stream.getTracks().forEach(track => track.stop());\n      setMediaRecorder(null);\n      announce('録音を停止しました。', 'assertive');\n    }\n    \n    console.log('録音停止完了');\n  };\n\n  // Blobを Base64 に変換する関数\n  const blobToBase64 = (blob) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  };\n\n  const saveRecording = async (name, tags) => {\n    if (currentRecording && name.trim()) {\n      try {\n        // Blobをbase64に変換\n        const base64Data = await blobToBase64(currentRecording.audioBlob);\n        \n        const savedRecording = {\n          ...currentRecording,\n          name: name.trim(),\n          tags: tags.filter(tag => tag.trim()).map(tag => tag.trim()),\n          audioData: base64Data, // base64データを保存\n          // audioBlobは一時的なものなので削除\n          audioBlob: undefined\n        };\n        \n        setRecordings([...recordings, savedRecording]);\n        setCurrentRecording(null);\n        \n        // LocalStorageに保存（audioBlobは除外）\n        const existingRecordings = JSON.parse(localStorage.getItem('soundRecordings') || '[]');\n        const recordingToSave = { ...savedRecording };\n        delete recordingToSave.audioBlob; // Blobは保存しない\n        localStorage.setItem('soundRecordings', JSON.stringify([...existingRecordings, recordingToSave]));\n      } catch (error) {\n        console.error('録音の保存に失敗しました:', error);\n        alert('録音の保存に失敗しました。再度お試しください。');\n      }\n    }\n  };\n\n  const handleFileUpload = (event) => {\n    const file = event.target.files[0];\n    if (file && file.type.startsWith('audio/')) {\n      const url = URL.createObjectURL(file);\n      setCurrentRecording({\n        id: Date.now(),\n        url: url,\n        audioBlob: file,\n        name: file.name.replace(/\\.[^/.]+$/, ''),\n        tags: [],\n        createdAt: new Date()\n      });\n    }\n  };\n\n  // マイクアクセステスト機能（iOSでの問題対策）\n  const testMicrophoneAccess = async () => {\n    try {\n      console.log('マイクアクセステスト開始');\n      \n      // HTTPS接続チェック\n      if (!checkHTTPS()) {\n        alert('🔒 録音機能を使用するにはHTTPS接続が必要です。\\n\\niPhoneでは特に、セキュアな接続が必要となります。');\n        return false;\n      }\n      \n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('お使いのブラウザは録音機能をサポートしていません。');\n      }\n\n      // まずマイクの権限状態を確認\n      if (navigator.permissions) {\n        try {\n          const permission = await navigator.permissions.query({ name: 'microphone' });\n          console.log('マイク権限状態:', permission.state);\n          \n          if (permission.state === 'denied') {\n            alert('マイクアクセスが拒否されています。ブラウザの設定からマイクの使用を許可してください。');\n            return false;\n          }\n        } catch (permError) {\n          console.log('権限確認はサポートされていません:', permError);\n        }\n      }\n\n      // 実際にマイクアクセスをテスト\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true\n        }\n      });\n      \n      // すぐにストリームを停止\n      stream.getTracks().forEach(track => track.stop());\n      console.log('マイクアクセステスト成功');\n      return true;\n      \n    } catch (error) {\n      console.error('マイクアクセステスト失敗:', error);\n      \n      let errorMessage = 'マイクにアクセスできません。';\n      \n      if (error.name === 'NotAllowedError') {\n        errorMessage = 'マイクの使用が拒否されました。ブラウザの設定でマイクアクセスを許可してください。\\n\\niPhoneの場合：\\n1. Safari設定 > プライバシーとセキュリティ > マイク\\n2. このサイトを許可に設定';\n      } else if (error.name === 'NotFoundError') {\n        errorMessage = 'マイクが見つかりません。';\n      } else if (error.name === 'NotSupportedError') {\n        errorMessage = 'お使いのブラウザは録音機能をサポートしていません。';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      alert(errorMessage);\n      return false;\n    }\n  };\n\n  // HTTPS接続チェック（iOSでの録音に必要）\n  const checkHTTPS = () => {\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {\n      return false;\n    }\n    return true;\n  };\n\n  // 音声レベル監視関数\n  return (\n    <div className=\"sound-collection\">\n      <header>\n        <h2 id=\"page-title\">\n          <span role=\"img\" aria-label=\"マイク\">🎤</span> 音あつめページ\n        </h2>\n        <p className=\"page-description\">\n          身の回りにある音を録音したり、音ファイルをアップロードして音素材を集めましょう！\n        </p>\n      </header>\n      \n      {/* アクセシビリティ用のライブリージョン */}\n      <AnnouncementRegion />\n      <ErrorRegion />\n      \n      <section className=\"collection-actions\" aria-labelledby=\"collection-title\">\n        <h3 id=\"collection-title\" className=\"sr-only\">音の収集方法</h3>\n        \n        <section className=\"recording-section card\" aria-labelledby=\"recording-title\">\n          <h3 id=\"recording-title\">\n            <span role=\"img\" aria-label=\"マイク\">🎙️</span> 音を録音する\n          </h3>\n          \n          {/* iOS用の説明 */}\n          <div className=\"ios-notice\" role=\"region\" aria-labelledby=\"ios-instructions\">\n            <h4 id=\"ios-instructions\" className=\"sr-only\">iPhone/iPad使用時の注意事項</h4>\n            <p>\n              <span role=\"img\" aria-label=\"スマートフォン\">📱</span> \n              <strong>iPhone/iPadをお使いの方へ：</strong>\n            </p>\n            <p>録音ボタンを押すとマイクの使用許可を求めるダイアログが表示されます。「許可」を選択してください。</p>\n            <p>ダイアログが表示されない場合は、Safari設定 → プライバシーとセキュリティ → マイク でこのサイトを許可してください。</p>\n          </div>\n          \n          <div className=\"recording-controls\" role=\"group\" aria-labelledby=\"recording-controls-label\">\n            <h4 id=\"recording-controls-label\" className=\"sr-only\">録音操作</h4>\n            {!isRecording ? (\n              <button \n                ref={recordButtonRef}\n                className=\"accessible-button button-primary large-button record-btn\"\n                onClick={startRecording}\n                aria-describedby=\"record-instructions\"\n                type=\"button\"\n              >\n                <span role=\"img\" aria-label=\"録音開始\">🔴</span> 録音開始\n              </button>\n            ) : (\n              <button \n                className=\"accessible-button button-secondary large-button stop-btn\"\n                onClick={stopRecording}\n                aria-describedby=\"stop-instructions\"\n                type=\"button\"\n              >\n                <span role=\"img\" aria-label=\"停止\">⏹️</span> 録音停止\n              </button>\n            )}\n            <div id=\"record-instructions\" className=\"sr-only\">\n              録音開始ボタンを押すとマイクが有効になり、音声の録音が始まります\n            </div>\n            <div id=\"stop-instructions\" className=\"sr-only\">\n              録音停止ボタンを押すと録音が終了し、音に名前をつけることができます\n            </div>\n          </div>\n\n          {isRecording && (\n            <div \n              className=\"recording-status\" \n              role=\"status\" \n              aria-live=\"polite\"\n              aria-label=\"録音状況\"\n            >\n              <div className=\"recording-indicator\">\n                <div className=\"pulse-dot\" aria-hidden=\"true\"></div>\n                録音中...\n              </div>\n            </div>\n          )}\n        </section>\n\n        <section className=\"upload-section card\" aria-labelledby=\"upload-title\">\n          <h3 id=\"upload-title\">\n            <span role=\"img\" aria-label=\"フォルダ\">📁</span> 音ファイルをアップロード\n          </h3>\n          <button \n            className=\"accessible-button button-secondary large-button\"\n            onClick={() => fileInputRef.current?.click()}\n            aria-describedby=\"upload-instructions\"\n            type=\"button\"\n          >\n            <span role=\"img\" aria-label=\"ファイル選択\">📂</span> ファイルを選択\n          </button>\n          <div id=\"upload-instructions\" className=\"sr-only\">\n            音声ファイルを選択してアップロードできます。対応形式: MP3, WAV, M4A など\n          </div>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"audio/*\"\n            onChange={handleFileUpload}\n            style={{ display: 'none' }}\n            aria-label=\"音声ファイルを選択\"\n          />\n        </section>\n      </section>\n\n      {currentRecording && (\n        <RecordingEditor \n          recording={currentRecording}\n          onSave={saveRecording}\n          onCancel={() => setCurrentRecording(null)}\n        />\n      )}\n\n      <section className=\"recent-recordings\" aria-labelledby=\"recent-title\">\n        <h3 id=\"recent-title\">\n          <span role=\"img\" aria-label=\"メモ\">📝</span> 最近録音した音\n        </h3>\n        {recordings.length === 0 ? (\n          <p className=\"no-recordings\">まだ録音した音がありません。上の録音ボタンから始めましょう！</p>\n        ) : (\n          <div \n            className=\"recordings-grid\" \n            role=\"grid\" \n            aria-label=\"録音された音のリスト\"\n          >\n            {recordings.map((recording, index) => (\n              <SoundCard \n                key={recording.id} \n                recording={recording} \n                index={index}\n              />\n            ))}\n          </div>\n        )}\n      </section>\n    </div>\n  );\n};\n\nconst RecordingEditor = ({ recording, onSave, onCancel }) => {\n  const [name, setName] = useState(recording.name);\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState(recording.tags);\n  const [validationMessage, setValidationMessage] = useState('');\n\n  const addTag = () => {\n    if (tagInput.trim() && !tags.includes(tagInput.trim())) {\n      setTags([...tags, tagInput.trim()]);\n      setTagInput('');\n      setValidationMessage(`タグ「${tagInput.trim()}」を追加しました`);\n    } else if (tags.includes(tagInput.trim())) {\n      setValidationMessage('このタグは既に追加されています');\n    }\n  };\n\n  const removeTag = (tagToRemove) => {\n    setTags(tags.filter(tag => tag !== tagToRemove));\n    setValidationMessage(`タグ「${tagToRemove}」を削除しました`);\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      addTag();\n    }\n  };\n\n  const handleSave = () => {\n    if (!name.trim()) {\n      setValidationMessage('音の名前を入力してください');\n      return;\n    }\n    onSave(name, tags);\n  };\n\n  return (\n    <section \n      className=\"recording-editor card\" \n      role=\"dialog\" \n      aria-labelledby=\"editor-title\"\n      aria-describedby=\"editor-description\"\n    >\n      <h3 id=\"editor-title\">\n        <span role=\"img\" aria-label=\"編集\">✏️</span> 音に名前をつけよう\n      </h3>\n      <p id=\"editor-description\" className=\"sr-only\">\n        録音した音に名前とタグをつけて保存できます\n      </p>\n      \n      <div className=\"audio-preview-container\">\n        <label htmlFor=\"audio-preview\" className=\"audio-preview-label\">録音した音のプレビュー:</label>\n        <audio \n          id=\"audio-preview\"\n          controls \n          src={recording.url} \n          className=\"accessible-audio audio-preview\"\n          onError={(e) => {\n            console.error('音声プレビューの読み込みエラー:', e);\n          }}\n          aria-describedby=\"audio-preview-desc\"\n        >\n          <track kind=\"captions\" label=\"音声説明\" srcLang=\"ja\" />\n          お使いのブラウザは音声再生に対応していません。\n        </audio>\n        <p id=\"audio-preview-desc\" className=\"sr-only\">\n          録音された音声を再生して確認できます\n        </p>\n      </div>\n      \n      <div className=\"form-group\">\n        <label htmlFor=\"soundName\" className=\"required-label\">\n          音の名前 <span aria-label=\"必須\" className=\"required\">*</span>:\n        </label>\n        <input\n          id=\"soundName\"\n          type=\"text\"\n          value={name}\n          onChange={(e) => {\n            setName(e.target.value);\n            if (validationMessage) setValidationMessage('');\n          }}\n          placeholder=\"例: ピアノの音、雨の音\"\n          className=\"accessible-input sound-name-input\"\n          required\n          aria-describedby=\"name-help\"\n          aria-invalid={!name.trim() && validationMessage ? 'true' : 'false'}\n        />\n        <p id=\"name-help\" className=\"help-text\">\n          この音を表す分かりやすい名前をつけてください\n        </p>\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"soundTags\" className=\"optional-label\">\n          タグ <span className=\"optional\">(任意)</span>:\n        </label>\n        <div className=\"tag-input-container\">\n          <input\n            id=\"soundTags\"\n            type=\"text\"\n            value={tagInput}\n            onChange={(e) => setTagInput(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"例: 楽器、自然\"\n            className=\"accessible-input tag-input\"\n            aria-describedby=\"tag-help\"\n            list=\"tag-suggestions\"\n          />\n          <datalist id=\"tag-suggestions\">\n            <option value=\"楽器\">楽器</option>\n            <option value=\"自然\">自然</option>\n            <option value=\"機械\">機械</option>\n            <option value=\"動物\">動物</option>\n            <option value=\"声\">声</option>\n          </datalist>\n          <button \n            onClick={addTag} \n            className=\"accessible-button add-tag-btn\"\n            type=\"button\"\n            disabled={!tagInput.trim()}\n            aria-describedby=\"add-tag-help\"\n          >\n            追加\n          </button>\n        </div>\n        <p id=\"tag-help\" className=\"help-text\">\n          音の種類やカテゴリを表すタグを追加できます。Enterキーでも追加できます。\n        </p>\n        <p id=\"add-tag-help\" className=\"sr-only\">\n          入力したタグを音に追加します\n        </p>\n        \n        {tags.length > 0 && (\n          <div className=\"tags-display\" role=\"group\" aria-labelledby=\"tags-label\">\n            <p id=\"tags-label\" className=\"tags-title\">追加されたタグ:</p>\n            <ul className=\"tags-list\" aria-live=\"polite\">\n              {tags.map((tag, index) => (\n                <li key={tag} className=\"tag-item\">\n                  <span className=\"tag\">\n                    {tag}\n                    <button \n                      onClick={() => removeTag(tag)} \n                      className=\"remove-tag\"\n                      type=\"button\"\n                      aria-label={`タグ「${tag}」を削除`}\n                    >\n                      <span aria-hidden=\"true\">×</span>\n                    </button>\n                  </span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n\n      {validationMessage && (\n        <div \n          className=\"validation-message\" \n          role=\"status\" \n          aria-live=\"polite\"\n        >\n          {validationMessage}\n        </div>\n      )}\n\n      <div className=\"editor-actions\" role=\"group\" aria-labelledby=\"actions-label\">\n        <p id=\"actions-label\" className=\"sr-only\">保存・キャンセル操作</p>\n        <button \n          onClick={handleSave}\n          className=\"accessible-button button-primary\"\n          disabled={!name.trim()}\n          type=\"button\"\n          aria-describedby=\"save-help\"\n        >\n          <span role=\"img\" aria-label=\"保存\">💾</span> 保存\n        </button>\n        <button \n          onClick={onCancel} \n          className=\"accessible-button button-secondary\"\n          type=\"button\"\n          aria-describedby=\"cancel-help\"\n        >\n          <span role=\"img\" aria-label=\"キャンセル\">❌</span> キャンセル\n        </button>\n        <p id=\"save-help\" className=\"sr-only\">\n          音の名前とタグを保存します\n        </p>\n        <p id=\"cancel-help\" className=\"sr-only\">\n          編集をキャンセルして録音を破棄します\n        </p>\n      </div>\n    </section>\n  );\n};\n\n\nconst SoundCard = ({ recording, index }) => {\n  const formattedDate = new Date(recording.createdAt).toLocaleDateString('ja-JP', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n\n  return (\n    <article \n      className=\"sound-card\" \n      aria-labelledby={`sound-title-${recording.id}`}\n      aria-describedby={`sound-desc-${recording.id}`}\n    >\n      <header className=\"sound-info\">\n        <h4 id={`sound-title-${recording.id}`} className=\"sound-name\">\n          {recording.name}\n        </h4>\n        <p className=\"sound-date\" aria-label={`録音日: ${formattedDate}`}>\n          {formattedDate}\n        </p>\n        {recording.tags.length > 0 && (\n          <div className=\"sound-tags\" role=\"group\" aria-label=\"タグ\">\n            {recording.tags.map((tag, tagIndex) => (\n              <span \n                key={tag} \n                className=\"tag small\"\n                role=\"mark\"\n                aria-label={`タグ: ${tag}`}\n              >\n                {tag}\n              </span>\n            ))}\n          </div>\n        )}\n      </header>\n      \n      <div className=\"sound-player\">\n        <label htmlFor={`audio-${recording.id}`} className=\"sr-only\">\n          {recording.name}の音声プレーヤー\n        </label>\n        <audio \n          id={`audio-${recording.id}`}\n          controls \n          src={recording.url}\n          className=\"accessible-audio\"\n          onError={(e) => {\n            console.error('音声カードの読み込みエラー:', e, 'recording:', recording.name);\n          }}\n          aria-describedby={`audio-desc-${recording.id}`}\n        >\n          <track kind=\"captions\" label=\"音声説明\" srcLang=\"ja\" />\n          お使いのブラウザは音声再生に対応していません。\n        </audio>\n        <p id={`audio-desc-${recording.id}`} className=\"sr-only\">\n          {recording.name}の音声ファイル。再生ボタンで音を聞くことができます。\n        </p>\n      </div>\n    </article>\n  );\n};\n\nexport default SoundCollection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}