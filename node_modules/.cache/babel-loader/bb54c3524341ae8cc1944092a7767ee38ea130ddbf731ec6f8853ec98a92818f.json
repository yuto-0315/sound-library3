{"ast":null,"code":"import{useEffect,useRef}from'react';/**\n * フォーカス管理フック\n * @param {boolean} shouldFocus - フォーカスすべきかどうか\n */import{jsx as _jsx}from\"react/jsx-runtime\";export const useFocus=function(){let shouldFocus=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const elementRef=useRef(null);useEffect(()=>{if(shouldFocus&&elementRef.current){elementRef.current.focus();}},[shouldFocus]);return elementRef;};/**\n * アナウンスメント用フック（スクリーンリーダー対応）\n */export const useAnnouncement=()=>{const announcementRef=useRef(null);const announce=function(message){let priority=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'polite';if(announcementRef.current){announcementRef.current.setAttribute('aria-live',priority);announcementRef.current.textContent=message;}};const AnnouncementRegion=_ref=>{let{className=''}=_ref;return/*#__PURE__*/_jsx(\"div\",{ref:announcementRef,\"aria-live\":\"polite\",\"aria-atomic\":\"true\",className:\"sr-only \".concat(className)});};return{announce,AnnouncementRegion};};/**\n * キーボードナビゲーション用フック\n */export const useKeyboardNavigation=function(items){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const{loop=true,orientation='horizontal',// 'horizontal' or 'vertical'\nonActivate=()=>{}}=options;const currentIndex=useRef(0);const itemRefs=useRef([]);const getKeys=()=>{if(orientation==='vertical'){return{next:['ArrowDown'],prev:['ArrowUp'],activate:['Enter',' ']};}return{next:['ArrowRight','ArrowDown'],prev:['ArrowLeft','ArrowUp'],activate:['Enter',' ']};};const handleKeyDown=event=>{const keys=getKeys();const{key}=event;if(keys.next.includes(key)){event.preventDefault();moveToNext();}else if(keys.prev.includes(key)){event.preventDefault();moveToPrev();}else if(keys.activate.includes(key)){event.preventDefault();onActivate(currentIndex.current,items[currentIndex.current]);}};const moveToNext=()=>{if(currentIndex.current<items.length-1){currentIndex.current+=1;}else if(loop){currentIndex.current=0;}focusCurrent();};const moveToPrev=()=>{if(currentIndex.current>0){currentIndex.current-=1;}else if(loop){currentIndex.current=items.length-1;}focusCurrent();};const focusCurrent=()=>{const currentRef=itemRefs.current[currentIndex.current];if(currentRef){currentRef.focus();}};const getItemProps=index=>({ref:el=>{itemRefs.current[index]=el;},tabIndex:index===currentIndex.current?0:-1,onKeyDown:handleKeyDown,onFocus:()=>{currentIndex.current=index;}});return{getItemProps,focusCurrent,currentIndex:currentIndex.current};};/**\n * エラーメッセージの管理フック\n */export const useErrorMessages=()=>{const errorRef=useRef(null);const showError=message=>{if(errorRef.current){errorRef.current.textContent=message;errorRef.current.setAttribute('aria-live','assertive');}};const clearError=()=>{if(errorRef.current){errorRef.current.textContent='';errorRef.current.removeAttribute('aria-live');}};const ErrorRegion=_ref2=>{let{className=''}=_ref2;return/*#__PURE__*/_jsx(\"div\",{ref:errorRef,role:\"alert\",className:\"error-message \".concat(className),\"aria-atomic\":\"true\"});};return{showError,clearError,ErrorRegion};};/**\n * 進捗状況の管理フック\n */export const useProgress=()=>{const progressRef=useRef(null);const updateProgress=function(current,total){let label=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';if(progressRef.current){const percentage=Math.round(current/total*100);progressRef.current.setAttribute('aria-valuenow',current);progressRef.current.setAttribute('aria-valuemax',total);progressRef.current.setAttribute('aria-valuetext',\"\".concat(label,\" \").concat(percentage,\"% \\u5B8C\\u4E86 (\").concat(current,\" / \").concat(total,\")\"));}};const ProgressBar=_ref3=>{let{className='',label='進捗'}=_ref3;return/*#__PURE__*/_jsx(\"div\",{ref:progressRef,role:\"progressbar\",\"aria-label\":label,\"aria-valuenow\":0,\"aria-valuemin\":0,\"aria-valuemax\":100,className:\"progress-bar \".concat(className)});};return{updateProgress,ProgressBar};};","map":{"version":3,"names":["useEffect","useRef","jsx","_jsx","useFocus","shouldFocus","arguments","length","undefined","elementRef","current","focus","useAnnouncement","announcementRef","announce","message","priority","setAttribute","textContent","AnnouncementRegion","_ref","className","ref","concat","useKeyboardNavigation","items","options","loop","orientation","onActivate","currentIndex","itemRefs","getKeys","next","prev","activate","handleKeyDown","event","keys","key","includes","preventDefault","moveToNext","moveToPrev","focusCurrent","currentRef","getItemProps","index","el","tabIndex","onKeyDown","onFocus","useErrorMessages","errorRef","showError","clearError","removeAttribute","ErrorRegion","_ref2","role","useProgress","progressRef","updateProgress","total","label","percentage","Math","round","ProgressBar","_ref3"],"sources":["/Users/nakataniyuutomo/Desktop/Programing/ゼミ開発/sound-library2/src/hooks/useAccessibility.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\n/**\n * フォーカス管理フック\n * @param {boolean} shouldFocus - フォーカスすべきかどうか\n */\nexport const useFocus = (shouldFocus = false) => {\n  const elementRef = useRef(null);\n\n  useEffect(() => {\n    if (shouldFocus && elementRef.current) {\n      elementRef.current.focus();\n    }\n  }, [shouldFocus]);\n\n  return elementRef;\n};\n\n/**\n * アナウンスメント用フック（スクリーンリーダー対応）\n */\nexport const useAnnouncement = () => {\n  const announcementRef = useRef(null);\n\n  const announce = (message, priority = 'polite') => {\n    if (announcementRef.current) {\n      announcementRef.current.setAttribute('aria-live', priority);\n      announcementRef.current.textContent = message;\n    }\n  };\n\n  const AnnouncementRegion = ({ className = '' }) => (\n    <div\n      ref={announcementRef}\n      aria-live=\"polite\"\n      aria-atomic=\"true\"\n      className={`sr-only ${className}`}\n    />\n  );\n\n  return { announce, AnnouncementRegion };\n};\n\n/**\n * キーボードナビゲーション用フック\n */\nexport const useKeyboardNavigation = (items, options = {}) => {\n  const {\n    loop = true,\n    orientation = 'horizontal', // 'horizontal' or 'vertical'\n    onActivate = () => {},\n  } = options;\n\n  const currentIndex = useRef(0);\n  const itemRefs = useRef([]);\n\n  const getKeys = () => {\n    if (orientation === 'vertical') {\n      return {\n        next: ['ArrowDown'],\n        prev: ['ArrowUp'],\n        activate: ['Enter', ' '],\n      };\n    }\n    return {\n      next: ['ArrowRight', 'ArrowDown'],\n      prev: ['ArrowLeft', 'ArrowUp'],\n      activate: ['Enter', ' '],\n    };\n  };\n\n  const handleKeyDown = (event) => {\n    const keys = getKeys();\n    const { key } = event;\n\n    if (keys.next.includes(key)) {\n      event.preventDefault();\n      moveToNext();\n    } else if (keys.prev.includes(key)) {\n      event.preventDefault();\n      moveToPrev();\n    } else if (keys.activate.includes(key)) {\n      event.preventDefault();\n      onActivate(currentIndex.current, items[currentIndex.current]);\n    }\n  };\n\n  const moveToNext = () => {\n    if (currentIndex.current < items.length - 1) {\n      currentIndex.current += 1;\n    } else if (loop) {\n      currentIndex.current = 0;\n    }\n    focusCurrent();\n  };\n\n  const moveToPrev = () => {\n    if (currentIndex.current > 0) {\n      currentIndex.current -= 1;\n    } else if (loop) {\n      currentIndex.current = items.length - 1;\n    }\n    focusCurrent();\n  };\n\n  const focusCurrent = () => {\n    const currentRef = itemRefs.current[currentIndex.current];\n    if (currentRef) {\n      currentRef.focus();\n    }\n  };\n\n  const getItemProps = (index) => ({\n    ref: (el) => {\n      itemRefs.current[index] = el;\n    },\n    tabIndex: index === currentIndex.current ? 0 : -1,\n    onKeyDown: handleKeyDown,\n    onFocus: () => {\n      currentIndex.current = index;\n    },\n  });\n\n  return {\n    getItemProps,\n    focusCurrent,\n    currentIndex: currentIndex.current,\n  };\n};\n\n/**\n * エラーメッセージの管理フック\n */\nexport const useErrorMessages = () => {\n  const errorRef = useRef(null);\n\n  const showError = (message) => {\n    if (errorRef.current) {\n      errorRef.current.textContent = message;\n      errorRef.current.setAttribute('aria-live', 'assertive');\n    }\n  };\n\n  const clearError = () => {\n    if (errorRef.current) {\n      errorRef.current.textContent = '';\n      errorRef.current.removeAttribute('aria-live');\n    }\n  };\n\n  const ErrorRegion = ({ className = '' }) => (\n    <div\n      ref={errorRef}\n      role=\"alert\"\n      className={`error-message ${className}`}\n      aria-atomic=\"true\"\n    />\n  );\n\n  return { showError, clearError, ErrorRegion };\n};\n\n/**\n * 進捗状況の管理フック\n */\nexport const useProgress = () => {\n  const progressRef = useRef(null);\n\n  const updateProgress = (current, total, label = '') => {\n    if (progressRef.current) {\n      const percentage = Math.round((current / total) * 100);\n      progressRef.current.setAttribute('aria-valuenow', current);\n      progressRef.current.setAttribute('aria-valuemax', total);\n      progressRef.current.setAttribute('aria-valuetext', \n        `${label} ${percentage}% 完了 (${current} / ${total})`\n      );\n    }\n  };\n\n  const ProgressBar = ({ className = '', label = '進捗' }) => (\n    <div\n      ref={progressRef}\n      role=\"progressbar\"\n      aria-label={label}\n      aria-valuenow={0}\n      aria-valuemin={0}\n      aria-valuemax={100}\n      className={`progress-bar ${className}`}\n    />\n  );\n\n  return { updateProgress, ProgressBar };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}