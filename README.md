# 音楽づくり支援アプリ

小学校における音楽づくりの支援教材として開発されたWebアプリケーションです。iPadでの使用を想定して、直感的で使いやすいUIを実現しています。

## 機能概要

### 🎤 音あつめページ
- **録音機能**: ブラウザのマイクを使って身の回りの音を録音
- **ファイルアップロード**: 音声ファイルの直接アップロード対応
- **音素材の管理**: 録音した音に名前とタグを付けて整理
- **リアルタイム録音**: 視覚的なフィードバック付きの録音体験

### 📚 音ライブラリページ
- **音素材の一覧表示**: 収集した全ての音素材を見やすく表示
- **検索機能**: 音の名前やタグで素早く検索
- **タグフィルター**: カテゴリ別に音素材を絞り込み
- **ドラッグ&ドロップ対応**: DAWページへ直接ドラッグして使用可能

### 🎹 音楽づくりページ (DAW)
- **マルチトラック対応**: 複数のトラックで重ね録り可能
- **拍に合わせた配置**: 音素材が自動的に拍に合わせて配置
- **BPM調整**: 音楽の速さを自由に変更
- **視覚的なタイムライン**: 分かりやすい小節・拍表示
- **再生コントロール**: 再生、一時停止、停止機能

## 技術仕様

- **フロントエンド**: React 18
- **ルーティング**: React Router DOM
- **スタイリング**: CSS3 (カスタムCSS)
- **音声処理**: Web Audio API, MediaRecorder API
- **データ保存**: LocalStorage
- **アクセシビリティ**: WCAG 2.1 AAレベル準拠
- **対応ブラウザ**: モダンブラウザ（Chrome, Safari, Firefox, Edge）

## アクセシビリティ対応

本アプリケーションは、デジタル庁のウェブアクセシビリティ導入ガイドブックに基づいて開発されており、以下の特徴があります：

### 主要な機能
- **スクリーンリーダー対応**: 全機能がスクリーンリーダーで利用可能
- **キーボードナビゲーション**: マウスなしでの完全操作
- **高コントラストモード**: 視覚障害者向けの表示改善
- **大きなタッチターゲット**: 44px以上のタッチエリア
- **レスポンシブデザイン**: 様々なデバイス・画面サイズに対応

### 対応する支援技術
- NVDA（Windows）
- JAWS（Windows）
- VoiceOver（macOS/iOS）
- TalkBack（Android）
- 音声認識ソフトウェア

詳細は [アクセシビリティガイド](docs/ACCESSIBILITY.md) をご覧ください。

## 開発環境のセットアップ

### 必要な環境
- Node.js 16.0以上
- npm 8.0以上

### インストール手順

1. リポジトリのクローン
```bash
git clone <repository-url>
cd sound-library2
```

2. 依存関係のインストール
```bash
npm install
```

3. 開発サーバーの起動
```bash
npm start
```

4. ブラウザで http://localhost:3000 にアクセス

## ビルド

本番用のビルドを作成:
```bash
npm run build
```

## 使用方法

### 音の録音・収集
1. 「音あつめ」ページに移動
2. 「録音開始」ボタンをクリックして音を録音
3. 録音停止後、音に名前とタグを付けて保存

### 音楽づくり
1. 「音楽づくり」ページに移動
2. 音ライブラリから音素材をトラックにドラッグ&ドロップ
3. 再生ボタンで作成した音楽を確認
4. BPMやトラック数を調整して音楽を完成

## 教育的配慮

- **小学生向けUI**: 大きなボタンと分かりやすいアイコン
- **視覚的フィードバック**: 録音中のアニメーション、ドラッグ時のハイライト
- **直感的操作**: ドラッグ&ドロップによる簡単な操作
- **iPad最適化**: タッチ操作に最適化されたインターface
- **アクセシブルデザイン**: 障害のある児童も含めた全ての児童が利用可能
- **多様な学習スタイル**: 視覚・聴覚・運動感覚での学習をサポート

## テストとアクセシビリティチェック

### アクセシビリティテスト
```bash
npm run accessibility-test
npm run lint
```

### 手動チェック項目
- キーボードナビゲーション（Tabキー、Enterキー、Escキー）
- スクリーンリーダーでの操作
- 200%ズーム時の表示確認
- カラーコントラストの確認

## テスト

このプロジェクトには包括的なJestユニットテストスイートが含まれています。

### テストの実行

```bash
# 全テストの実行
npm test

# カバレッジレポート付きテスト
npm run test:coverage

# CI環境での実行
npm run test:ci

# 基本テストのみ実行
npm test -- --testPathPattern="basic.test.js" --watchAll=false
```

### カテゴリ別テスト実行

```bash
# ユニットテストのみ
npm run test:unit

# アクセシビリティテストのみ
npm run test:accessibility

# コンポーネントテストのみ
npm run test:components

# カスタムフックテストのみ
npm run test:hooks
```

### テスト構成

- **コンポーネントテスト**: App, Navigation, SoundCollection, SoundLibrary, DAWPage
- **カスタムフックテスト**: useAccessibility関連フック
- **アクセシビリティテスト**: WAI-ARIA準拠、キーボードナビゲーション
- **統合テスト**: ルーティング、LocalStorage連携

### テストカバレッジ

目標カバレッジ: 70%以上（ブランチ、関数、行、ステートメント）

詳細なテスト情報は [TEST_DOCUMENTATION.md](./TEST_DOCUMENTATION.md) を参照してください。

## 開発

### コード品質

```bash
# ESLintでのコード検査
npm run lint

# ESLintでの自動修正
npm run lint:fix
```

### アクセシビリティ

- WAI-ARIA準拠
- キーボードナビゲーション対応
- スクリーンリーダー対応
- 色コントラスト配慮
- フォーカス管理

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

---

**注意**: 
- このアプリケーションはマイクへのアクセス許可が必要です。初回使用時にブラウザの許可を与えてください。
- アクセシビリティ機能を最大限活用するため、最新のブラウザおよび支援技術をご利用ください。
- 教育現場での使用時は、多様な学習ニーズに対応できるよう事前に機能を確認してください。



# 機能追加
拍と秒数を切り替えることができるようにする？
クラウド機能の追加実装。
